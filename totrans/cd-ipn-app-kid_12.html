<html><head></head><body>
<h2 class="h2" id="ch10"><span id="page_141"></span>
 <strong>
<span class="big">10</span>
</strong>
</h2>
<h2 class="h2a">
<strong>ADDING A BIRTHDAY CLASS AND HANDLING USER INPUT</strong>
</h2>
<div class="image1"><img src="Image00001.jpg" />
</div>
<p class="noindent">In <a href="text00020.html#ch09">Chapter 9</a>
 , you set up the visual interface for your app by creating view controllers, buttons to navigate between them, and the screen that takes user input. Now it’s time to dig into the programming! In this chapter, we’ll show you how to code your app and connect it to your storyboard. You’ll write <span class="code">Birthday</span>
 and <span class="code">AddBirthdayViewController</span>
 classes so you can add birthdays using the input controls that you created in the previous chapter.</p>
<h3 class="h3" id="ch10lev1sec1"><span id="page_142"></span>
 <strong>THE BIRTHDAY CLASS</strong>
</h3>
<p class="noindent">In this section, you’ll write a temporary <span class="code">Birthday</span>
 class that will store your birthdays but won’t permanently save the birthday data on the device. We’ll replace it later with a better solution, but this approach will let us test our input controls.</p>
<div class="image"><img src="Image00221.jpg" />
</div>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Sometimes when you’re programming, you’ll need to write apps with many parts that will work together. You may write one part of the app first, like we did with the input controls, but to test that part, you might need some other code you haven’t written yet. When that happens, you can quickly write some temporary</em>
 test code <em>that you’ll rework after you’ve finished making the rest of your app work. That’s what we’re doing with the <span class="code">Birthday</span>
 class—we’ll replace it in <a href="text00023.html#ch12">Chapter 12</a>
 .</em>
</p>
</div>
<p class="indent">If you don’t already have it open, open your BirthdayTracker app in Xcode. Make sure you can see the Project navigator (<span class="ent">⌘</span>
 -0).</p>
<h4 class="h4" id="ch10lev2sec1">
<strong>CREATING A NEW FILE</strong>
</h4>
<p class="noindent">First, you’ll create a file where you’ll write the <span class="code">Birthday</span>
 class. A file in Xcode is just like any other computer file—it’s a type of document. When you write an app in Swift, you’ll write your classes and functions in Swift files. Just like how Word files have the extension <em>.doc</em>
 or <em>.docx</em>
 and PDF files end with <em>.pdf</em>
 , a Swift file has the extension <em>.swift</em>
 after its name.</p>
<p class="indent">If you want to add a new class to your application, create a new Swift file to write that class. You can write as many classes as you want in the same file, but it’s easier to organize your project if you keep classes in separate files with filenames that match each class’s name. <span class="smallcaps">CONTROL</span>
 -click the <em>BirthdayTracker</em>
 folder in the Project navigator and choose the <strong>New File…</strong>
 option from the menu, as shown in <a href="text00021.html#ch10fig1">Figure 10-1</a>
 .</p>
<div class="image"><img src="Image00222.jpg" alt="image" />
</div>
<p class="figcap"><a id="ch10fig1"></a>
 <em>Figure 10-1: Creating a new file in Xcode</em>
</p>
<p class="indent">This brings up a dialog like the one in <a href="text00021.html#ch10fig2">Figure 10-2</a>
 . Here you’re asked to select the kind of file you want to create, which is a generic, empty Swift file. Select <strong>iOS</strong>
 at the top of the dialog, select <strong>Swift File</strong>
 , and then click <strong>Next</strong>
 .</p>
<div class="image"><img src="Image00223.jpg" />
</div>
<p class="figcap"><a id="ch10fig2"></a>
 <span id="page_143"></span>
 <em>Figure 10-2: Choose</em>
 <strong>
<em>Swift File</em>
</strong>
 <em>for the template.</em>
</p>
<p class="indent">Finally, name the file <em>Birthday</em>
 and click <strong>Create</strong>
 . You should see <em>Birthday.swift</em>
 listed in the <em>BirthdayTracker</em>
 folder of the Project navigator. Click it and you should see an empty <em>Birthday.swift</em>
 file, as shown in <a href="text00021.html#ch10fig3">Figure 10-3</a>
 .</p>
<div class="image"><img src="Image00224.jpg" />
</div>
<p class="figcap"><a id="ch10fig3"></a>
 <em>Figure 10-3: The</em>
 Birthday.swift <em>file</em>
</p>
<p class="indent">Notice that at the top of the file, Xcode has automatically written some copyright information in code comments. The name that comes after “Created by” is pulled from your Contact Card in your computer’s Contacts application. After the copyright year, you should see the Organization Name that you used in <a href="text00011.html#ch01">Chapter 1</a>
 when you created your first Xcode project. Every time you create a new file in Xcode, this commented header is automatically included.</p>
<p class="indent"><span id="page_144"></span>
 Now that you have your <em>Birthday.swift</em>
 file, you can create the <span class="code">Birthday</span>
 class to store your birthdays.</p>
<h4 class="h4" id="ch10lev2sec2">
<strong>WRITING THE BIRTHDAY CLASS</strong>
</h4>
<p class="noindent">Your <span class="code">Birthday</span>
 class will have three constant properties: <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . The properties <span class="code">firstName</span>
 and <span class="code">lastName</span>
 should be of type <span class="code">String</span>
 , but <span class="code">birthdate</span>
 will be a special class built into Swift called <span class="code">Date</span>
 , which is specifically made to handle dates and times. We’ll use the <span class="code">Date</span>
 class’s functionality to alert the user about birthdays. Enter the following into <em>Birthday.swift</em>
 under the <span class="code">import Foundation</span>
 statement.</p>
<div class="image"><img src="Image00225.jpg" />
</div>
<p class="noindent1">
<em>Birthday.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 Birthday {<br />
<br />
    <span class="pink">let</span>
 firstName: <span class="violet">String</span>
<br />
    <span class="pink">let</span>
 lastName: <span class="violet">String</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 birthdate: <span class="violet">Date</span>
<br />
<br />
  <span class="ent">➋</span>
 <span class="pink">init</span>
 (firstName: <span class="violet">String</span>
 , lastName: <span class="violet">String</span>
 , birthdate: <span class="violet">Date</span>
 ) {<br />
<br />
      <span class="ent">➌</span>
 <span class="pink">self</span>
 .<span class="green1">firstName</span>
 = firstName<br />
        <span class="pink">self</span>
 .<span class="green1">lastName</span>
 = lastName<br />
        <span class="pink">self</span>
 .<span class="green1">birthdate</span>
 = birthdate<br />
    }<br />
}</pre>
</div>
<p class="indent">You can see the new <span class="code">Date</span>
 data type at <span class="ent">➊</span>
 . A <span class="code">Date</span>
 is declared just like any other variable.</p>
<p class="indent">At <span class="ent">➋</span>
 , you add an initializer to the <span class="code">Birthday</span>
 class that takes a <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 as input parameters. Then, using the <span class="code">self</span>
 property, you set them to the class properties <span class="ent">➌</span>
 . This will let you pass names and dates to the <span class="code">Birthday</span>
 class to store a birthday.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<h3 class="h3" id="ch10lev1sec2">
<strong>PROGRAMMING USER INPUT</strong>
</h3>
<p class="noindent">At this point, you have a <span class="code">Birthday</span>
 class that can hold a friend’s name and birthdate, and you have input fields in the storyboard that you set up in <a href="text00020.html#ch09">Chapter 9</a>
 . But the <span class="code">Birthday</span>
 class and the input fields aren’t connected, so the user’s input isn’t stored as a <span class="code">Birthday</span>
 . It’s time to write code to make the interface add birthdays. To do that, you’ll create a new <span class="code">AddBirthdayViewController</span>
 class to manage the input fields in the Add a Birthday Scene in the storyboard. (Remember that a view is controlled by a view controller, which is what you’ll make next.)</p>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<h2 class="h2a">
<strong>ADDING A BIRTHDAY CLASS AND HANDLING USER INPUT</strong>
</h2>
<div class="image1"><img src="Image00001.jpg" />
</div>
<p class="noindent">In <a href="text00020.html#ch09">Chapter 9</a>
 , you set up the visual interface for your app by creating view controllers, buttons to navigate between them, and the screen that takes user input. Now it’s time to dig into the programming! In this chapter, we’ll show you how to code your app and connect it to your storyboard. You’ll write <span class="code">Birthday</span>
 and <span class="code">AddBirthdayViewController</span>
 classes so you can add birthdays using the input controls that you created in the previous chapter.</p>
<h3 class="h3" id="ch10lev1sec1"><span id="page_142"></span>
 <strong>THE BIRTHDAY CLASS</strong>
</h3>
<p class="noindent">In this section, you’ll write a temporary <span class="code">Birthday</span>
 class that will store your birthdays but won’t permanently save the birthday data on the device. We’ll replace it later with a better solution, but this approach will let us test our input controls.</p>
<div class="image"><img src="Image00221.jpg" />
</div>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Sometimes when you’re programming, you’ll need to write apps with many parts that will work together. You may write one part of the app first, like we did with the input controls, but to test that part, you might need some other code you haven’t written yet. When that happens, you can quickly write some temporary</em>
 test code <em>that you’ll rework after you’ve finished making the rest of your app work. That’s what we’re doing with the <span class="code">Birthday</span>
 class—we’ll replace it in <a href="text00023.html#ch12">Chapter 12</a>
 .</em>
</p>
</div>
<p class="indent">If you don’t already have it open, open your BirthdayTracker app in Xcode. Make sure you can see the Project navigator (<span class="ent">⌘</span>
 -0).</p>
<h4 class="h4" id="ch10lev2sec1">
<strong>CREATING A NEW FILE</strong>
</h4>
<p class="noindent">First, you’ll create a file where you’ll write the <span class="code">Birthday</span>
 class. A file in Xcode is just like any other computer file—it’s a type of document. When you write an app in Swift, you’ll write your classes and functions in Swift files. Just like how Word files have the extension <em>.doc</em>
 or <em>.docx</em>
 and PDF files end with <em>.pdf</em>
 , a Swift file has the extension <em>.swift</em>
 after its name.</p>
<p class="indent">If you want to add a new class to your application, create a new Swift file to write that class. You can write as many classes as you want in the same file, but it’s easier to organize your project if you keep classes in separate files with filenames that match each class’s name. <span class="smallcaps">CONTROL</span>
 -click the <em>BirthdayTracker</em>
 folder in the Project navigator and choose the <strong>New File…</strong>
 option from the menu, as shown in <a href="text00021.html#ch10fig1">Figure 10-1</a>
 .</p>
<div class="image"><img src="Image00222.jpg" alt="image" />
</div>
<p class="figcap"><a id="ch10fig1"></a>
 <em>Figure 10-1: Creating a new file in Xcode</em>
</p>
<p class="indent">This brings up a dialog like the one in <a href="text00021.html#ch10fig2">Figure 10-2</a>
 . Here you’re asked to select the kind of file you want to create, which is a generic, empty Swift file. Select <strong>iOS</strong>
 at the top of the dialog, select <strong>Swift File</strong>
 , and then click <strong>Next</strong>
 .</p>
<div class="image"><img src="Image00223.jpg" />
</div>
<p class="figcap"><a id="ch10fig2"></a>
 <span id="page_143"></span>
 <em>Figure 10-2: Choose</em>
 <strong>
<em>Swift File</em>
</strong>
 <em>for the template.</em>
</p>
<p class="indent">Finally, name the file <em>Birthday</em>
 and click <strong>Create</strong>
 . You should see <em>Birthday.swift</em>
 listed in the <em>BirthdayTracker</em>
 folder of the Project navigator. Click it and you should see an empty <em>Birthday.swift</em>
 file, as shown in <a href="text00021.html#ch10fig3">Figure 10-3</a>
 .</p>
<div class="image"><img src="Image00224.jpg" />
</div>
<p class="figcap"><a id="ch10fig3"></a>
 <em>Figure 10-3: The</em>
 Birthday.swift <em>file</em>
</p>
<p class="indent">Notice that at the top of the file, Xcode has automatically written some copyright information in code comments. The name that comes after “Created by” is pulled from your Contact Card in your computer’s Contacts application. After the copyright year, you should see the Organization Name that you used in <a href="text00011.html#ch01">Chapter 1</a>
 when you created your first Xcode project. Every time you create a new file in Xcode, this commented header is automatically included.</p>
<p class="indent"><span id="page_144"></span>
 Now that you have your <em>Birthday.swift</em>
 file, you can create the <span class="code">Birthday</span>
 class to store your birthdays.</p>
<h4 class="h4" id="ch10lev2sec2">
<strong>WRITING THE BIRTHDAY CLASS</strong>
</h4>
<p class="noindent">Your <span class="code">Birthday</span>
 class will have three constant properties: <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . The properties <span class="code">firstName</span>
 and <span class="code">lastName</span>
 should be of type <span class="code">String</span>
 , but <span class="code">birthdate</span>
 will be a special class built into Swift called <span class="code">Date</span>
 , which is specifically made to handle dates and times. We’ll use the <span class="code">Date</span>
 class’s functionality to alert the user about birthdays. Enter the following into <em>Birthday.swift</em>
 under the <span class="code">import Foundation</span>
 statement.</p>
<div class="image"><img src="Image00225.jpg" />
</div>
<p class="noindent1">
<em>Birthday.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 Birthday {<br />
<br />
    <span class="pink">let</span>
 firstName: <span class="violet">String</span>
<br />
    <span class="pink">let</span>
 lastName: <span class="violet">String</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 birthdate: <span class="violet">Date</span>
<br />
<br />
  <span class="ent">➋</span>
 <span class="pink">init</span>
 (firstName: <span class="violet">String</span>
 , lastName: <span class="violet">String</span>
 , birthdate: <span class="violet">Date</span>
 ) {<br />
<br />
      <span class="ent">➌</span>
 <span class="pink">self</span>
 .<span class="green1">firstName</span>
 = firstName<br />
        <span class="pink">self</span>
 .<span class="green1">lastName</span>
 = lastName<br />
        <span class="pink">self</span>
 .<span class="green1">birthdate</span>
 = birthdate<br />
    }<br />
}</pre>
</div>
<p class="indent">You can see the new <span class="code">Date</span>
 data type at <span class="ent">➊</span>
 . A <span class="code">Date</span>
 is declared just like any other variable.</p>
<p class="indent">At <span class="ent">➋</span>
 , you add an initializer to the <span class="code">Birthday</span>
 class that takes a <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 as input parameters. Then, using the <span class="code">self</span>
 property, you set them to the class properties <span class="ent">➌</span>
 . This will let you pass names and dates to the <span class="code">Birthday</span>
 class to store a birthday.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<h3 class="h3" id="ch10lev1sec2">
<strong>PROGRAMMING USER INPUT</strong>
</h3>
<p class="noindent">At this point, you have a <span class="code">Birthday</span>
 class that can hold a friend’s name and birthdate, and you have input fields in the storyboard that you set up in <a href="text00020.html#ch09">Chapter 9</a>
 . But the <span class="code">Birthday</span>
 class and the input fields aren’t connected, so the user’s input isn’t stored as a <span class="code">Birthday</span>
 . It’s time to write code to make the interface add birthdays. To do that, you’ll create a new <span class="code">AddBirthdayViewController</span>
 class to manage the input fields in the Add a Birthday Scene in the storyboard. (Remember that a view is controlled by a view controller, which is what you’ll make next.)</p>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<div class="image1"><img src="Image00001.jpg" />
</div>
<p class="noindent">In <a href="text00020.html#ch09">Chapter 9</a>
 , you set up the visual interface for your app by creating view controllers, buttons to navigate between them, and the screen that takes user input. Now it’s time to dig into the programming! In this chapter, we’ll show you how to code your app and connect it to your storyboard. You’ll write <span class="code">Birthday</span>
 and <span class="code">AddBirthdayViewController</span>
 classes so you can add birthdays using the input controls that you created in the previous chapter.</p>
<h3 class="h3" id="ch10lev1sec1"><span id="page_142"></span>
 <strong>THE BIRTHDAY CLASS</strong>
</h3>
<p class="noindent">In this section, you’ll write a temporary <span class="code">Birthday</span>
 class that will store your birthdays but won’t permanently save the birthday data on the device. We’ll replace it later with a better solution, but this approach will let us test our input controls.</p>
<div class="image"><img src="Image00221.jpg" />
</div>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Sometimes when you’re programming, you’ll need to write apps with many parts that will work together. You may write one part of the app first, like we did with the input controls, but to test that part, you might need some other code you haven’t written yet. When that happens, you can quickly write some temporary</em>
 test code <em>that you’ll rework after you’ve finished making the rest of your app work. That’s what we’re doing with the <span class="code">Birthday</span>
 class—we’ll replace it in <a href="text00023.html#ch12">Chapter 12</a>
 .</em>
</p>
</div>
<p class="indent">If you don’t already have it open, open your BirthdayTracker app in Xcode. Make sure you can see the Project navigator (<span class="ent">⌘</span>
 -0).</p>
<h4 class="h4" id="ch10lev2sec1">
<strong>CREATING A NEW FILE</strong>
</h4>
<p class="noindent">First, you’ll create a file where you’ll write the <span class="code">Birthday</span>
 class. A file in Xcode is just like any other computer file—it’s a type of document. When you write an app in Swift, you’ll write your classes and functions in Swift files. Just like how Word files have the extension <em>.doc</em>
 or <em>.docx</em>
 and PDF files end with <em>.pdf</em>
 , a Swift file has the extension <em>.swift</em>
 after its name.</p>
<p class="indent">If you want to add a new class to your application, create a new Swift file to write that class. You can write as many classes as you want in the same file, but it’s easier to organize your project if you keep classes in separate files with filenames that match each class’s name. <span class="smallcaps">CONTROL</span>
 -click the <em>BirthdayTracker</em>
 folder in the Project navigator and choose the <strong>New File…</strong>
 option from the menu, as shown in <a href="text00021.html#ch10fig1">Figure 10-1</a>
 .</p>
<div class="image"><img src="Image00222.jpg" alt="image" />
</div>
<p class="figcap"><a id="ch10fig1"></a>
 <em>Figure 10-1: Creating a new file in Xcode</em>
</p>
<p class="indent">This brings up a dialog like the one in <a href="text00021.html#ch10fig2">Figure 10-2</a>
 . Here you’re asked to select the kind of file you want to create, which is a generic, empty Swift file. Select <strong>iOS</strong>
 at the top of the dialog, select <strong>Swift File</strong>
 , and then click <strong>Next</strong>
 .</p>
<div class="image"><img src="Image00223.jpg" />
</div>
<p class="figcap"><a id="ch10fig2"></a>
 <span id="page_143"></span>
 <em>Figure 10-2: Choose</em>
 <strong>
<em>Swift File</em>
</strong>
 <em>for the template.</em>
</p>
<p class="indent">Finally, name the file <em>Birthday</em>
 and click <strong>Create</strong>
 . You should see <em>Birthday.swift</em>
 listed in the <em>BirthdayTracker</em>
 folder of the Project navigator. Click it and you should see an empty <em>Birthday.swift</em>
 file, as shown in <a href="text00021.html#ch10fig3">Figure 10-3</a>
 .</p>
<div class="image"><img src="Image00224.jpg" />
</div>
<p class="figcap"><a id="ch10fig3"></a>
 <em>Figure 10-3: The</em>
 Birthday.swift <em>file</em>
</p>
<p class="indent">Notice that at the top of the file, Xcode has automatically written some copyright information in code comments. The name that comes after “Created by” is pulled from your Contact Card in your computer’s Contacts application. After the copyright year, you should see the Organization Name that you used in <a href="text00011.html#ch01">Chapter 1</a>
 when you created your first Xcode project. Every time you create a new file in Xcode, this commented header is automatically included.</p>
<p class="indent"><span id="page_144"></span>
 Now that you have your <em>Birthday.swift</em>
 file, you can create the <span class="code">Birthday</span>
 class to store your birthdays.</p>
<h4 class="h4" id="ch10lev2sec2">
<strong>WRITING THE BIRTHDAY CLASS</strong>
</h4>
<p class="noindent">Your <span class="code">Birthday</span>
 class will have three constant properties: <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . The properties <span class="code">firstName</span>
 and <span class="code">lastName</span>
 should be of type <span class="code">String</span>
 , but <span class="code">birthdate</span>
 will be a special class built into Swift called <span class="code">Date</span>
 , which is specifically made to handle dates and times. We’ll use the <span class="code">Date</span>
 class’s functionality to alert the user about birthdays. Enter the following into <em>Birthday.swift</em>
 under the <span class="code">import Foundation</span>
 statement.</p>
<div class="image"><img src="Image00225.jpg" />
</div>
<p class="noindent1">
<em>Birthday.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 Birthday {<br />
<br />
    <span class="pink">let</span>
 firstName: <span class="violet">String</span>
<br />
    <span class="pink">let</span>
 lastName: <span class="violet">String</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 birthdate: <span class="violet">Date</span>
<br />
<br />
  <span class="ent">➋</span>
 <span class="pink">init</span>
 (firstName: <span class="violet">String</span>
 , lastName: <span class="violet">String</span>
 , birthdate: <span class="violet">Date</span>
 ) {<br />
<br />
      <span class="ent">➌</span>
 <span class="pink">self</span>
 .<span class="green1">firstName</span>
 = firstName<br />
        <span class="pink">self</span>
 .<span class="green1">lastName</span>
 = lastName<br />
        <span class="pink">self</span>
 .<span class="green1">birthdate</span>
 = birthdate<br />
    }<br />
}</pre>
</div>
<p class="indent">You can see the new <span class="code">Date</span>
 data type at <span class="ent">➊</span>
 . A <span class="code">Date</span>
 is declared just like any other variable.</p>
<p class="indent">At <span class="ent">➋</span>
 , you add an initializer to the <span class="code">Birthday</span>
 class that takes a <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 as input parameters. Then, using the <span class="code">self</span>
 property, you set them to the class properties <span class="ent">➌</span>
 . This will let you pass names and dates to the <span class="code">Birthday</span>
 class to store a birthday.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<h3 class="h3" id="ch10lev1sec2">
<strong>PROGRAMMING USER INPUT</strong>
</h3>
<p class="noindent">At this point, you have a <span class="code">Birthday</span>
 class that can hold a friend’s name and birthdate, and you have input fields in the storyboard that you set up in <a href="text00020.html#ch09">Chapter 9</a>
 . But the <span class="code">Birthday</span>
 class and the input fields aren’t connected, so the user’s input isn’t stored as a <span class="code">Birthday</span>
 . It’s time to write code to make the interface add birthdays. To do that, you’ll create a new <span class="code">AddBirthdayViewController</span>
 class to manage the input fields in the Add a Birthday Scene in the storyboard. (Remember that a view is controlled by a view controller, which is what you’ll make next.)</p>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="noindent">In <a href="text00020.html#ch09">Chapter 9</a>
 , you set up the visual interface for your app by creating view controllers, buttons to navigate between them, and the screen that takes user input. Now it’s time to dig into the programming! In this chapter, we’ll show you how to code your app and connect it to your storyboard. You’ll write <span class="code">Birthday</span>
 and <span class="code">AddBirthdayViewController</span>
 classes so you can add birthdays using the input controls that you created in the previous chapter.</p>
<h3 class="h3" id="ch10lev1sec1"><span id="page_142"></span>
 <strong>THE BIRTHDAY CLASS</strong>
</h3>
<p class="noindent">In this section, you’ll write a temporary <span class="code">Birthday</span>
 class that will store your birthdays but won’t permanently save the birthday data on the device. We’ll replace it later with a better solution, but this approach will let us test our input controls.</p>
<div class="image"><img src="Image00221.jpg" />
</div>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Sometimes when you’re programming, you’ll need to write apps with many parts that will work together. You may write one part of the app first, like we did with the input controls, but to test that part, you might need some other code you haven’t written yet. When that happens, you can quickly write some temporary</em>
 test code <em>that you’ll rework after you’ve finished making the rest of your app work. That’s what we’re doing with the <span class="code">Birthday</span>
 class—we’ll replace it in <a href="text00023.html#ch12">Chapter 12</a>
 .</em>
</p>
</div>
<p class="indent">If you don’t already have it open, open your BirthdayTracker app in Xcode. Make sure you can see the Project navigator (<span class="ent">⌘</span>
 -0).</p>
<h4 class="h4" id="ch10lev2sec1">
<strong>CREATING A NEW FILE</strong>
</h4>
<p class="noindent">First, you’ll create a file where you’ll write the <span class="code">Birthday</span>
 class. A file in Xcode is just like any other computer file—it’s a type of document. When you write an app in Swift, you’ll write your classes and functions in Swift files. Just like how Word files have the extension <em>.doc</em>
 or <em>.docx</em>
 and PDF files end with <em>.pdf</em>
 , a Swift file has the extension <em>.swift</em>
 after its name.</p>
<p class="indent">If you want to add a new class to your application, create a new Swift file to write that class. You can write as many classes as you want in the same file, but it’s easier to organize your project if you keep classes in separate files with filenames that match each class’s name. <span class="smallcaps">CONTROL</span>
 -click the <em>BirthdayTracker</em>
 folder in the Project navigator and choose the <strong>New File…</strong>
 option from the menu, as shown in <a href="text00021.html#ch10fig1">Figure 10-1</a>
 .</p>
<div class="image"><img src="Image00222.jpg" alt="image" />
</div>
<p class="figcap"><a id="ch10fig1"></a>
 <em>Figure 10-1: Creating a new file in Xcode</em>
</p>
<p class="indent">This brings up a dialog like the one in <a href="text00021.html#ch10fig2">Figure 10-2</a>
 . Here you’re asked to select the kind of file you want to create, which is a generic, empty Swift file. Select <strong>iOS</strong>
 at the top of the dialog, select <strong>Swift File</strong>
 , and then click <strong>Next</strong>
 .</p>
<div class="image"><img src="Image00223.jpg" />
</div>
<p class="figcap"><a id="ch10fig2"></a>
 <span id="page_143"></span>
 <em>Figure 10-2: Choose</em>
 <strong>
<em>Swift File</em>
</strong>
 <em>for the template.</em>
</p>
<p class="indent">Finally, name the file <em>Birthday</em>
 and click <strong>Create</strong>
 . You should see <em>Birthday.swift</em>
 listed in the <em>BirthdayTracker</em>
 folder of the Project navigator. Click it and you should see an empty <em>Birthday.swift</em>
 file, as shown in <a href="text00021.html#ch10fig3">Figure 10-3</a>
 .</p>
<div class="image"><img src="Image00224.jpg" />
</div>
<p class="figcap"><a id="ch10fig3"></a>
 <em>Figure 10-3: The</em>
 Birthday.swift <em>file</em>
</p>
<p class="indent">Notice that at the top of the file, Xcode has automatically written some copyright information in code comments. The name that comes after “Created by” is pulled from your Contact Card in your computer’s Contacts application. After the copyright year, you should see the Organization Name that you used in <a href="text00011.html#ch01">Chapter 1</a>
 when you created your first Xcode project. Every time you create a new file in Xcode, this commented header is automatically included.</p>
<p class="indent"><span id="page_144"></span>
 Now that you have your <em>Birthday.swift</em>
 file, you can create the <span class="code">Birthday</span>
 class to store your birthdays.</p>
<h4 class="h4" id="ch10lev2sec2">
<strong>WRITING THE BIRTHDAY CLASS</strong>
</h4>
<p class="noindent">Your <span class="code">Birthday</span>
 class will have three constant properties: <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . The properties <span class="code">firstName</span>
 and <span class="code">lastName</span>
 should be of type <span class="code">String</span>
 , but <span class="code">birthdate</span>
 will be a special class built into Swift called <span class="code">Date</span>
 , which is specifically made to handle dates and times. We’ll use the <span class="code">Date</span>
 class’s functionality to alert the user about birthdays. Enter the following into <em>Birthday.swift</em>
 under the <span class="code">import Foundation</span>
 statement.</p>
<div class="image"><img src="Image00225.jpg" />
</div>
<p class="noindent1">
<em>Birthday.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 Birthday {<br />
<br />
    <span class="pink">let</span>
 firstName: <span class="violet">String</span>
<br />
    <span class="pink">let</span>
 lastName: <span class="violet">String</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 birthdate: <span class="violet">Date</span>
<br />
<br />
  <span class="ent">➋</span>
 <span class="pink">init</span>
 (firstName: <span class="violet">String</span>
 , lastName: <span class="violet">String</span>
 , birthdate: <span class="violet">Date</span>
 ) {<br />
<br />
      <span class="ent">➌</span>
 <span class="pink">self</span>
 .<span class="green1">firstName</span>
 = firstName<br />
        <span class="pink">self</span>
 .<span class="green1">lastName</span>
 = lastName<br />
        <span class="pink">self</span>
 .<span class="green1">birthdate</span>
 = birthdate<br />
    }<br />
}</pre>
</div>
<p class="indent">You can see the new <span class="code">Date</span>
 data type at <span class="ent">➊</span>
 . A <span class="code">Date</span>
 is declared just like any other variable.</p>
<p class="indent">At <span class="ent">➋</span>
 , you add an initializer to the <span class="code">Birthday</span>
 class that takes a <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 as input parameters. Then, using the <span class="code">self</span>
 property, you set them to the class properties <span class="ent">➌</span>
 . This will let you pass names and dates to the <span class="code">Birthday</span>
 class to store a birthday.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<h3 class="h3" id="ch10lev1sec2">
<strong>PROGRAMMING USER INPUT</strong>
</h3>
<p class="noindent">At this point, you have a <span class="code">Birthday</span>
 class that can hold a friend’s name and birthdate, and you have input fields in the storyboard that you set up in <a href="text00020.html#ch09">Chapter 9</a>
 . But the <span class="code">Birthday</span>
 class and the input fields aren’t connected, so the user’s input isn’t stored as a <span class="code">Birthday</span>
 . It’s time to write code to make the interface add birthdays. To do that, you’ll create a new <span class="code">AddBirthdayViewController</span>
 class to manage the input fields in the Add a Birthday Scene in the storyboard. (Remember that a view is controlled by a view controller, which is what you’ll make next.)</p>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<h3 class="h3" id="ch10lev1sec1"><span id="page_142"></span>
 <strong>THE BIRTHDAY CLASS</strong>
</h3>
<p class="noindent">In this section, you’ll write a temporary <span class="code">Birthday</span>
 class that will store your birthdays but won’t permanently save the birthday data on the device. We’ll replace it later with a better solution, but this approach will let us test our input controls.</p>
<div class="image"><img src="Image00221.jpg" />
</div>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Sometimes when you’re programming, you’ll need to write apps with many parts that will work together. You may write one part of the app first, like we did with the input controls, but to test that part, you might need some other code you haven’t written yet. When that happens, you can quickly write some temporary</em>
 test code <em>that you’ll rework after you’ve finished making the rest of your app work. That’s what we’re doing with the <span class="code">Birthday</span>
 class—we’ll replace it in <a href="text00023.html#ch12">Chapter 12</a>
 .</em>
</p>
</div>
<p class="indent">If you don’t already have it open, open your BirthdayTracker app in Xcode. Make sure you can see the Project navigator (<span class="ent">⌘</span>
 -0).</p>
<h4 class="h4" id="ch10lev2sec1">
<strong>CREATING A NEW FILE</strong>
</h4>
<p class="noindent">First, you’ll create a file where you’ll write the <span class="code">Birthday</span>
 class. A file in Xcode is just like any other computer file—it’s a type of document. When you write an app in Swift, you’ll write your classes and functions in Swift files. Just like how Word files have the extension <em>.doc</em>
 or <em>.docx</em>
 and PDF files end with <em>.pdf</em>
 , a Swift file has the extension <em>.swift</em>
 after its name.</p>
<p class="indent">If you want to add a new class to your application, create a new Swift file to write that class. You can write as many classes as you want in the same file, but it’s easier to organize your project if you keep classes in separate files with filenames that match each class’s name. <span class="smallcaps">CONTROL</span>
 -click the <em>BirthdayTracker</em>
 folder in the Project navigator and choose the <strong>New File…</strong>
 option from the menu, as shown in <a href="text00021.html#ch10fig1">Figure 10-1</a>
 .</p>
<div class="image"><img src="Image00222.jpg" alt="image" />
</div>
<p class="figcap"><a id="ch10fig1"></a>
 <em>Figure 10-1: Creating a new file in Xcode</em>
</p>
<p class="indent">This brings up a dialog like the one in <a href="text00021.html#ch10fig2">Figure 10-2</a>
 . Here you’re asked to select the kind of file you want to create, which is a generic, empty Swift file. Select <strong>iOS</strong>
 at the top of the dialog, select <strong>Swift File</strong>
 , and then click <strong>Next</strong>
 .</p>
<div class="image"><img src="Image00223.jpg" />
</div>
<p class="figcap"><a id="ch10fig2"></a>
 <span id="page_143"></span>
 <em>Figure 10-2: Choose</em>
 <strong>
<em>Swift File</em>
</strong>
 <em>for the template.</em>
</p>
<p class="indent">Finally, name the file <em>Birthday</em>
 and click <strong>Create</strong>
 . You should see <em>Birthday.swift</em>
 listed in the <em>BirthdayTracker</em>
 folder of the Project navigator. Click it and you should see an empty <em>Birthday.swift</em>
 file, as shown in <a href="text00021.html#ch10fig3">Figure 10-3</a>
 .</p>
<div class="image"><img src="Image00224.jpg" />
</div>
<p class="figcap"><a id="ch10fig3"></a>
 <em>Figure 10-3: The</em>
 Birthday.swift <em>file</em>
</p>
<p class="indent">Notice that at the top of the file, Xcode has automatically written some copyright information in code comments. The name that comes after “Created by” is pulled from your Contact Card in your computer’s Contacts application. After the copyright year, you should see the Organization Name that you used in <a href="text00011.html#ch01">Chapter 1</a>
 when you created your first Xcode project. Every time you create a new file in Xcode, this commented header is automatically included.</p>
<p class="indent"><span id="page_144"></span>
 Now that you have your <em>Birthday.swift</em>
 file, you can create the <span class="code">Birthday</span>
 class to store your birthdays.</p>
<h4 class="h4" id="ch10lev2sec2">
<strong>WRITING THE BIRTHDAY CLASS</strong>
</h4>
<p class="noindent">Your <span class="code">Birthday</span>
 class will have three constant properties: <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . The properties <span class="code">firstName</span>
 and <span class="code">lastName</span>
 should be of type <span class="code">String</span>
 , but <span class="code">birthdate</span>
 will be a special class built into Swift called <span class="code">Date</span>
 , which is specifically made to handle dates and times. We’ll use the <span class="code">Date</span>
 class’s functionality to alert the user about birthdays. Enter the following into <em>Birthday.swift</em>
 under the <span class="code">import Foundation</span>
 statement.</p>
<div class="image"><img src="Image00225.jpg" />
</div>
<p class="noindent1">
<em>Birthday.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 Birthday {<br />
<br />
    <span class="pink">let</span>
 firstName: <span class="violet">String</span>
<br />
    <span class="pink">let</span>
 lastName: <span class="violet">String</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 birthdate: <span class="violet">Date</span>
<br />
<br />
  <span class="ent">➋</span>
 <span class="pink">init</span>
 (firstName: <span class="violet">String</span>
 , lastName: <span class="violet">String</span>
 , birthdate: <span class="violet">Date</span>
 ) {<br />
<br />
      <span class="ent">➌</span>
 <span class="pink">self</span>
 .<span class="green1">firstName</span>
 = firstName<br />
        <span class="pink">self</span>
 .<span class="green1">lastName</span>
 = lastName<br />
        <span class="pink">self</span>
 .<span class="green1">birthdate</span>
 = birthdate<br />
    }<br />
}</pre>
</div>
<p class="indent">You can see the new <span class="code">Date</span>
 data type at <span class="ent">➊</span>
 . A <span class="code">Date</span>
 is declared just like any other variable.</p>
<p class="indent">At <span class="ent">➋</span>
 , you add an initializer to the <span class="code">Birthday</span>
 class that takes a <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 as input parameters. Then, using the <span class="code">self</span>
 property, you set them to the class properties <span class="ent">➌</span>
 . This will let you pass names and dates to the <span class="code">Birthday</span>
 class to store a birthday.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<h3 class="h3" id="ch10lev1sec2">
<strong>PROGRAMMING USER INPUT</strong>
</h3>
<p class="noindent">At this point, you have a <span class="code">Birthday</span>
 class that can hold a friend’s name and birthdate, and you have input fields in the storyboard that you set up in <a href="text00020.html#ch09">Chapter 9</a>
 . But the <span class="code">Birthday</span>
 class and the input fields aren’t connected, so the user’s input isn’t stored as a <span class="code">Birthday</span>
 . It’s time to write code to make the interface add birthdays. To do that, you’ll create a new <span class="code">AddBirthdayViewController</span>
 class to manage the input fields in the Add a Birthday Scene in the storyboard. (Remember that a view is controlled by a view controller, which is what you’ll make next.)</p>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="noindent">In this section, you’ll write a temporary <span class="code">Birthday</span>
 class that will store your birthdays but won’t permanently save the birthday data on the device. We’ll replace it later with a better solution, but this approach will let us test our input controls.</p>
<div class="image"><img src="Image00221.jpg" />
</div>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Sometimes when you’re programming, you’ll need to write apps with many parts that will work together. You may write one part of the app first, like we did with the input controls, but to test that part, you might need some other code you haven’t written yet. When that happens, you can quickly write some temporary</em>
 test code <em>that you’ll rework after you’ve finished making the rest of your app work. That’s what we’re doing with the <span class="code">Birthday</span>
 class—we’ll replace it in <a href="text00023.html#ch12">Chapter 12</a>
 .</em>
</p>
</div>
<p class="indent">If you don’t already have it open, open your BirthdayTracker app in Xcode. Make sure you can see the Project navigator (<span class="ent">⌘</span>
 -0).</p>
<h4 class="h4" id="ch10lev2sec1">
<strong>CREATING A NEW FILE</strong>
</h4>
<p class="noindent">First, you’ll create a file where you’ll write the <span class="code">Birthday</span>
 class. A file in Xcode is just like any other computer file—it’s a type of document. When you write an app in Swift, you’ll write your classes and functions in Swift files. Just like how Word files have the extension <em>.doc</em>
 or <em>.docx</em>
 and PDF files end with <em>.pdf</em>
 , a Swift file has the extension <em>.swift</em>
 after its name.</p>
<p class="indent">If you want to add a new class to your application, create a new Swift file to write that class. You can write as many classes as you want in the same file, but it’s easier to organize your project if you keep classes in separate files with filenames that match each class’s name. <span class="smallcaps">CONTROL</span>
 -click the <em>BirthdayTracker</em>
 folder in the Project navigator and choose the <strong>New File…</strong>
 option from the menu, as shown in <a href="text00021.html#ch10fig1">Figure 10-1</a>
 .</p>
<div class="image"><img src="Image00222.jpg" alt="image" />
</div>
<p class="figcap"><a id="ch10fig1"></a>
 <em>Figure 10-1: Creating a new file in Xcode</em>
</p>
<p class="indent">This brings up a dialog like the one in <a href="text00021.html#ch10fig2">Figure 10-2</a>
 . Here you’re asked to select the kind of file you want to create, which is a generic, empty Swift file. Select <strong>iOS</strong>
 at the top of the dialog, select <strong>Swift File</strong>
 , and then click <strong>Next</strong>
 .</p>
<div class="image"><img src="Image00223.jpg" />
</div>
<p class="figcap"><a id="ch10fig2"></a>
 <span id="page_143"></span>
 <em>Figure 10-2: Choose</em>
 <strong>
<em>Swift File</em>
</strong>
 <em>for the template.</em>
</p>
<p class="indent">Finally, name the file <em>Birthday</em>
 and click <strong>Create</strong>
 . You should see <em>Birthday.swift</em>
 listed in the <em>BirthdayTracker</em>
 folder of the Project navigator. Click it and you should see an empty <em>Birthday.swift</em>
 file, as shown in <a href="text00021.html#ch10fig3">Figure 10-3</a>
 .</p>
<div class="image"><img src="Image00224.jpg" />
</div>
<p class="figcap"><a id="ch10fig3"></a>
 <em>Figure 10-3: The</em>
 Birthday.swift <em>file</em>
</p>
<p class="indent">Notice that at the top of the file, Xcode has automatically written some copyright information in code comments. The name that comes after “Created by” is pulled from your Contact Card in your computer’s Contacts application. After the copyright year, you should see the Organization Name that you used in <a href="text00011.html#ch01">Chapter 1</a>
 when you created your first Xcode project. Every time you create a new file in Xcode, this commented header is automatically included.</p>
<p class="indent"><span id="page_144"></span>
 Now that you have your <em>Birthday.swift</em>
 file, you can create the <span class="code">Birthday</span>
 class to store your birthdays.</p>
<h4 class="h4" id="ch10lev2sec2">
<strong>WRITING THE BIRTHDAY CLASS</strong>
</h4>
<p class="noindent">Your <span class="code">Birthday</span>
 class will have three constant properties: <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . The properties <span class="code">firstName</span>
 and <span class="code">lastName</span>
 should be of type <span class="code">String</span>
 , but <span class="code">birthdate</span>
 will be a special class built into Swift called <span class="code">Date</span>
 , which is specifically made to handle dates and times. We’ll use the <span class="code">Date</span>
 class’s functionality to alert the user about birthdays. Enter the following into <em>Birthday.swift</em>
 under the <span class="code">import Foundation</span>
 statement.</p>
<div class="image"><img src="Image00225.jpg" />
</div>
<p class="noindent1">
<em>Birthday.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 Birthday {<br />
<br />
    <span class="pink">let</span>
 firstName: <span class="violet">String</span>
<br />
    <span class="pink">let</span>
 lastName: <span class="violet">String</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 birthdate: <span class="violet">Date</span>
<br />
<br />
  <span class="ent">➋</span>
 <span class="pink">init</span>
 (firstName: <span class="violet">String</span>
 , lastName: <span class="violet">String</span>
 , birthdate: <span class="violet">Date</span>
 ) {<br />
<br />
      <span class="ent">➌</span>
 <span class="pink">self</span>
 .<span class="green1">firstName</span>
 = firstName<br />
        <span class="pink">self</span>
 .<span class="green1">lastName</span>
 = lastName<br />
        <span class="pink">self</span>
 .<span class="green1">birthdate</span>
 = birthdate<br />
    }<br />
}</pre>
</div>
<p class="indent">You can see the new <span class="code">Date</span>
 data type at <span class="ent">➊</span>
 . A <span class="code">Date</span>
 is declared just like any other variable.</p>
<p class="indent">At <span class="ent">➋</span>
 , you add an initializer to the <span class="code">Birthday</span>
 class that takes a <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 as input parameters. Then, using the <span class="code">self</span>
 property, you set them to the class properties <span class="ent">➌</span>
 . This will let you pass names and dates to the <span class="code">Birthday</span>
 class to store a birthday.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<h3 class="h3" id="ch10lev1sec2">
<strong>PROGRAMMING USER INPUT</strong>
</h3>
<p class="noindent">At this point, you have a <span class="code">Birthday</span>
 class that can hold a friend’s name and birthdate, and you have input fields in the storyboard that you set up in <a href="text00020.html#ch09">Chapter 9</a>
 . But the <span class="code">Birthday</span>
 class and the input fields aren’t connected, so the user’s input isn’t stored as a <span class="code">Birthday</span>
 . It’s time to write code to make the interface add birthdays. To do that, you’ll create a new <span class="code">AddBirthdayViewController</span>
 class to manage the input fields in the Add a Birthday Scene in the storyboard. (Remember that a view is controlled by a view controller, which is what you’ll make next.)</p>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<div class="image"><img src="Image00221.jpg" />
</div>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Sometimes when you’re programming, you’ll need to write apps with many parts that will work together. You may write one part of the app first, like we did with the input controls, but to test that part, you might need some other code you haven’t written yet. When that happens, you can quickly write some temporary</em>
 test code <em>that you’ll rework after you’ve finished making the rest of your app work. That’s what we’re doing with the <span class="code">Birthday</span>
 class—we’ll replace it in <a href="text00023.html#ch12">Chapter 12</a>
 .</em>
</p>
</div>
<p class="indent">If you don’t already have it open, open your BirthdayTracker app in Xcode. Make sure you can see the Project navigator (<span class="ent">⌘</span>
 -0).</p>
<h4 class="h4" id="ch10lev2sec1">
<strong>CREATING A NEW FILE</strong>
</h4>
<p class="noindent">First, you’ll create a file where you’ll write the <span class="code">Birthday</span>
 class. A file in Xcode is just like any other computer file—it’s a type of document. When you write an app in Swift, you’ll write your classes and functions in Swift files. Just like how Word files have the extension <em>.doc</em>
 or <em>.docx</em>
 and PDF files end with <em>.pdf</em>
 , a Swift file has the extension <em>.swift</em>
 after its name.</p>
<p class="indent">If you want to add a new class to your application, create a new Swift file to write that class. You can write as many classes as you want in the same file, but it’s easier to organize your project if you keep classes in separate files with filenames that match each class’s name. <span class="smallcaps">CONTROL</span>
 -click the <em>BirthdayTracker</em>
 folder in the Project navigator and choose the <strong>New File…</strong>
 option from the menu, as shown in <a href="text00021.html#ch10fig1">Figure 10-1</a>
 .</p>
<div class="image"><img src="Image00222.jpg" alt="image" />
</div>
<p class="figcap"><a id="ch10fig1"></a>
 <em>Figure 10-1: Creating a new file in Xcode</em>
</p>
<p class="indent">This brings up a dialog like the one in <a href="text00021.html#ch10fig2">Figure 10-2</a>
 . Here you’re asked to select the kind of file you want to create, which is a generic, empty Swift file. Select <strong>iOS</strong>
 at the top of the dialog, select <strong>Swift File</strong>
 , and then click <strong>Next</strong>
 .</p>
<div class="image"><img src="Image00223.jpg" />
</div>
<p class="figcap"><a id="ch10fig2"></a>
 <span id="page_143"></span>
 <em>Figure 10-2: Choose</em>
 <strong>
<em>Swift File</em>
</strong>
 <em>for the template.</em>
</p>
<p class="indent">Finally, name the file <em>Birthday</em>
 and click <strong>Create</strong>
 . You should see <em>Birthday.swift</em>
 listed in the <em>BirthdayTracker</em>
 folder of the Project navigator. Click it and you should see an empty <em>Birthday.swift</em>
 file, as shown in <a href="text00021.html#ch10fig3">Figure 10-3</a>
 .</p>
<div class="image"><img src="Image00224.jpg" />
</div>
<p class="figcap"><a id="ch10fig3"></a>
 <em>Figure 10-3: The</em>
 Birthday.swift <em>file</em>
</p>
<p class="indent">Notice that at the top of the file, Xcode has automatically written some copyright information in code comments. The name that comes after “Created by” is pulled from your Contact Card in your computer’s Contacts application. After the copyright year, you should see the Organization Name that you used in <a href="text00011.html#ch01">Chapter 1</a>
 when you created your first Xcode project. Every time you create a new file in Xcode, this commented header is automatically included.</p>
<p class="indent"><span id="page_144"></span>
 Now that you have your <em>Birthday.swift</em>
 file, you can create the <span class="code">Birthday</span>
 class to store your birthdays.</p>
<h4 class="h4" id="ch10lev2sec2">
<strong>WRITING THE BIRTHDAY CLASS</strong>
</h4>
<p class="noindent">Your <span class="code">Birthday</span>
 class will have three constant properties: <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . The properties <span class="code">firstName</span>
 and <span class="code">lastName</span>
 should be of type <span class="code">String</span>
 , but <span class="code">birthdate</span>
 will be a special class built into Swift called <span class="code">Date</span>
 , which is specifically made to handle dates and times. We’ll use the <span class="code">Date</span>
 class’s functionality to alert the user about birthdays. Enter the following into <em>Birthday.swift</em>
 under the <span class="code">import Foundation</span>
 statement.</p>
<div class="image"><img src="Image00225.jpg" />
</div>
<p class="noindent1">
<em>Birthday.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 Birthday {<br />
<br />
    <span class="pink">let</span>
 firstName: <span class="violet">String</span>
<br />
    <span class="pink">let</span>
 lastName: <span class="violet">String</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 birthdate: <span class="violet">Date</span>
<br />
<br />
  <span class="ent">➋</span>
 <span class="pink">init</span>
 (firstName: <span class="violet">String</span>
 , lastName: <span class="violet">String</span>
 , birthdate: <span class="violet">Date</span>
 ) {<br />
<br />
      <span class="ent">➌</span>
 <span class="pink">self</span>
 .<span class="green1">firstName</span>
 = firstName<br />
        <span class="pink">self</span>
 .<span class="green1">lastName</span>
 = lastName<br />
        <span class="pink">self</span>
 .<span class="green1">birthdate</span>
 = birthdate<br />
    }<br />
}</pre>
</div>
<p class="indent">You can see the new <span class="code">Date</span>
 data type at <span class="ent">➊</span>
 . A <span class="code">Date</span>
 is declared just like any other variable.</p>
<p class="indent">At <span class="ent">➋</span>
 , you add an initializer to the <span class="code">Birthday</span>
 class that takes a <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 as input parameters. Then, using the <span class="code">self</span>
 property, you set them to the class properties <span class="ent">➌</span>
 . This will let you pass names and dates to the <span class="code">Birthday</span>
 class to store a birthday.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<h3 class="h3" id="ch10lev1sec2">
<strong>PROGRAMMING USER INPUT</strong>
</h3>
<p class="noindent">At this point, you have a <span class="code">Birthday</span>
 class that can hold a friend’s name and birthdate, and you have input fields in the storyboard that you set up in <a href="text00020.html#ch09">Chapter 9</a>
 . But the <span class="code">Birthday</span>
 class and the input fields aren’t connected, so the user’s input isn’t stored as a <span class="code">Birthday</span>
 . It’s time to write code to make the interface add birthdays. To do that, you’ll create a new <span class="code">AddBirthdayViewController</span>
 class to manage the input fields in the Add a Birthday Scene in the storyboard. (Remember that a view is controlled by a view controller, which is what you’ll make next.)</p>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>Sometimes when you’re programming, you’ll need to write apps with many parts that will work together. You may write one part of the app first, like we did with the input controls, but to test that part, you might need some other code you haven’t written yet. When that happens, you can quickly write some temporary</em>
 test code <em>that you’ll rework after you’ve finished making the rest of your app work. That’s what we’re doing with the <span class="code">Birthday</span>
 class—we’ll replace it in <a href="text00023.html#ch12">Chapter 12</a>
 .</em>
</p>
</div>
<p class="indent">If you don’t already have it open, open your BirthdayTracker app in Xcode. Make sure you can see the Project navigator (<span class="ent">⌘</span>
 -0).</p>
<h4 class="h4" id="ch10lev2sec1">
<strong>CREATING A NEW FILE</strong>
</h4>
<p class="noindent">First, you’ll create a file where you’ll write the <span class="code">Birthday</span>
 class. A file in Xcode is just like any other computer file—it’s a type of document. When you write an app in Swift, you’ll write your classes and functions in Swift files. Just like how Word files have the extension <em>.doc</em>
 or <em>.docx</em>
 and PDF files end with <em>.pdf</em>
 , a Swift file has the extension <em>.swift</em>
 after its name.</p>
<p class="indent">If you want to add a new class to your application, create a new Swift file to write that class. You can write as many classes as you want in the same file, but it’s easier to organize your project if you keep classes in separate files with filenames that match each class’s name. <span class="smallcaps">CONTROL</span>
 -click the <em>BirthdayTracker</em>
 folder in the Project navigator and choose the <strong>New File…</strong>
 option from the menu, as shown in <a href="text00021.html#ch10fig1">Figure 10-1</a>
 .</p>
<div class="image"><img src="Image00222.jpg" alt="image" />
</div>
<p class="figcap"><a id="ch10fig1"></a>
 <em>Figure 10-1: Creating a new file in Xcode</em>
</p>
<p class="indent">This brings up a dialog like the one in <a href="text00021.html#ch10fig2">Figure 10-2</a>
 . Here you’re asked to select the kind of file you want to create, which is a generic, empty Swift file. Select <strong>iOS</strong>
 at the top of the dialog, select <strong>Swift File</strong>
 , and then click <strong>Next</strong>
 .</p>
<div class="image"><img src="Image00223.jpg" />
</div>
<p class="figcap"><a id="ch10fig2"></a>
 <span id="page_143"></span>
 <em>Figure 10-2: Choose</em>
 <strong>
<em>Swift File</em>
</strong>
 <em>for the template.</em>
</p>
<p class="indent">Finally, name the file <em>Birthday</em>
 and click <strong>Create</strong>
 . You should see <em>Birthday.swift</em>
 listed in the <em>BirthdayTracker</em>
 folder of the Project navigator. Click it and you should see an empty <em>Birthday.swift</em>
 file, as shown in <a href="text00021.html#ch10fig3">Figure 10-3</a>
 .</p>
<div class="image"><img src="Image00224.jpg" />
</div>
<p class="figcap"><a id="ch10fig3"></a>
 <em>Figure 10-3: The</em>
 Birthday.swift <em>file</em>
</p>
<p class="indent">Notice that at the top of the file, Xcode has automatically written some copyright information in code comments. The name that comes after “Created by” is pulled from your Contact Card in your computer’s Contacts application. After the copyright year, you should see the Organization Name that you used in <a href="text00011.html#ch01">Chapter 1</a>
 when you created your first Xcode project. Every time you create a new file in Xcode, this commented header is automatically included.</p>
<p class="indent"><span id="page_144"></span>
 Now that you have your <em>Birthday.swift</em>
 file, you can create the <span class="code">Birthday</span>
 class to store your birthdays.</p>
<h4 class="h4" id="ch10lev2sec2">
<strong>WRITING THE BIRTHDAY CLASS</strong>
</h4>
<p class="noindent">Your <span class="code">Birthday</span>
 class will have three constant properties: <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . The properties <span class="code">firstName</span>
 and <span class="code">lastName</span>
 should be of type <span class="code">String</span>
 , but <span class="code">birthdate</span>
 will be a special class built into Swift called <span class="code">Date</span>
 , which is specifically made to handle dates and times. We’ll use the <span class="code">Date</span>
 class’s functionality to alert the user about birthdays. Enter the following into <em>Birthday.swift</em>
 under the <span class="code">import Foundation</span>
 statement.</p>
<div class="image"><img src="Image00225.jpg" />
</div>
<p class="noindent1">
<em>Birthday.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 Birthday {<br />
<br />
    <span class="pink">let</span>
 firstName: <span class="violet">String</span>
<br />
    <span class="pink">let</span>
 lastName: <span class="violet">String</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 birthdate: <span class="violet">Date</span>
<br />
<br />
  <span class="ent">➋</span>
 <span class="pink">init</span>
 (firstName: <span class="violet">String</span>
 , lastName: <span class="violet">String</span>
 , birthdate: <span class="violet">Date</span>
 ) {<br />
<br />
      <span class="ent">➌</span>
 <span class="pink">self</span>
 .<span class="green1">firstName</span>
 = firstName<br />
        <span class="pink">self</span>
 .<span class="green1">lastName</span>
 = lastName<br />
        <span class="pink">self</span>
 .<span class="green1">birthdate</span>
 = birthdate<br />
    }<br />
}</pre>
</div>
<p class="indent">You can see the new <span class="code">Date</span>
 data type at <span class="ent">➊</span>
 . A <span class="code">Date</span>
 is declared just like any other variable.</p>
<p class="indent">At <span class="ent">➋</span>
 , you add an initializer to the <span class="code">Birthday</span>
 class that takes a <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 as input parameters. Then, using the <span class="code">self</span>
 property, you set them to the class properties <span class="ent">➌</span>
 . This will let you pass names and dates to the <span class="code">Birthday</span>
 class to store a birthday.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<h3 class="h3" id="ch10lev1sec2">
<strong>PROGRAMMING USER INPUT</strong>
</h3>
<p class="noindent">At this point, you have a <span class="code">Birthday</span>
 class that can hold a friend’s name and birthdate, and you have input fields in the storyboard that you set up in <a href="text00020.html#ch09">Chapter 9</a>
 . But the <span class="code">Birthday</span>
 class and the input fields aren’t connected, so the user’s input isn’t stored as a <span class="code">Birthday</span>
 . It’s time to write code to make the interface add birthdays. To do that, you’ll create a new <span class="code">AddBirthdayViewController</span>
 class to manage the input fields in the Add a Birthday Scene in the storyboard. (Remember that a view is controlled by a view controller, which is what you’ll make next.)</p>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">If you don’t already have it open, open your BirthdayTracker app in Xcode. Make sure you can see the Project navigator (<span class="ent">⌘</span>
 -0).</p>
<h4 class="h4" id="ch10lev2sec1">
<strong>CREATING A NEW FILE</strong>
</h4>
<p class="noindent">First, you’ll create a file where you’ll write the <span class="code">Birthday</span>
 class. A file in Xcode is just like any other computer file—it’s a type of document. When you write an app in Swift, you’ll write your classes and functions in Swift files. Just like how Word files have the extension <em>.doc</em>
 or <em>.docx</em>
 and PDF files end with <em>.pdf</em>
 , a Swift file has the extension <em>.swift</em>
 after its name.</p>
<p class="indent">If you want to add a new class to your application, create a new Swift file to write that class. You can write as many classes as you want in the same file, but it’s easier to organize your project if you keep classes in separate files with filenames that match each class’s name. <span class="smallcaps">CONTROL</span>
 -click the <em>BirthdayTracker</em>
 folder in the Project navigator and choose the <strong>New File…</strong>
 option from the menu, as shown in <a href="text00021.html#ch10fig1">Figure 10-1</a>
 .</p>
<div class="image"><img src="Image00222.jpg" alt="image" />
</div>
<p class="figcap"><a id="ch10fig1"></a>
 <em>Figure 10-1: Creating a new file in Xcode</em>
</p>
<p class="indent">This brings up a dialog like the one in <a href="text00021.html#ch10fig2">Figure 10-2</a>
 . Here you’re asked to select the kind of file you want to create, which is a generic, empty Swift file. Select <strong>iOS</strong>
 at the top of the dialog, select <strong>Swift File</strong>
 , and then click <strong>Next</strong>
 .</p>
<div class="image"><img src="Image00223.jpg" />
</div>
<p class="figcap"><a id="ch10fig2"></a>
 <span id="page_143"></span>
 <em>Figure 10-2: Choose</em>
 <strong>
<em>Swift File</em>
</strong>
 <em>for the template.</em>
</p>
<p class="indent">Finally, name the file <em>Birthday</em>
 and click <strong>Create</strong>
 . You should see <em>Birthday.swift</em>
 listed in the <em>BirthdayTracker</em>
 folder of the Project navigator. Click it and you should see an empty <em>Birthday.swift</em>
 file, as shown in <a href="text00021.html#ch10fig3">Figure 10-3</a>
 .</p>
<div class="image"><img src="Image00224.jpg" />
</div>
<p class="figcap"><a id="ch10fig3"></a>
 <em>Figure 10-3: The</em>
 Birthday.swift <em>file</em>
</p>
<p class="indent">Notice that at the top of the file, Xcode has automatically written some copyright information in code comments. The name that comes after “Created by” is pulled from your Contact Card in your computer’s Contacts application. After the copyright year, you should see the Organization Name that you used in <a href="text00011.html#ch01">Chapter 1</a>
 when you created your first Xcode project. Every time you create a new file in Xcode, this commented header is automatically included.</p>
<p class="indent"><span id="page_144"></span>
 Now that you have your <em>Birthday.swift</em>
 file, you can create the <span class="code">Birthday</span>
 class to store your birthdays.</p>
<h4 class="h4" id="ch10lev2sec2">
<strong>WRITING THE BIRTHDAY CLASS</strong>
</h4>
<p class="noindent">Your <span class="code">Birthday</span>
 class will have three constant properties: <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . The properties <span class="code">firstName</span>
 and <span class="code">lastName</span>
 should be of type <span class="code">String</span>
 , but <span class="code">birthdate</span>
 will be a special class built into Swift called <span class="code">Date</span>
 , which is specifically made to handle dates and times. We’ll use the <span class="code">Date</span>
 class’s functionality to alert the user about birthdays. Enter the following into <em>Birthday.swift</em>
 under the <span class="code">import Foundation</span>
 statement.</p>
<div class="image"><img src="Image00225.jpg" />
</div>
<p class="noindent1">
<em>Birthday.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 Birthday {<br />
<br />
    <span class="pink">let</span>
 firstName: <span class="violet">String</span>
<br />
    <span class="pink">let</span>
 lastName: <span class="violet">String</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 birthdate: <span class="violet">Date</span>
<br />
<br />
  <span class="ent">➋</span>
 <span class="pink">init</span>
 (firstName: <span class="violet">String</span>
 , lastName: <span class="violet">String</span>
 , birthdate: <span class="violet">Date</span>
 ) {<br />
<br />
      <span class="ent">➌</span>
 <span class="pink">self</span>
 .<span class="green1">firstName</span>
 = firstName<br />
        <span class="pink">self</span>
 .<span class="green1">lastName</span>
 = lastName<br />
        <span class="pink">self</span>
 .<span class="green1">birthdate</span>
 = birthdate<br />
    }<br />
}</pre>
</div>
<p class="indent">You can see the new <span class="code">Date</span>
 data type at <span class="ent">➊</span>
 . A <span class="code">Date</span>
 is declared just like any other variable.</p>
<p class="indent">At <span class="ent">➋</span>
 , you add an initializer to the <span class="code">Birthday</span>
 class that takes a <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 as input parameters. Then, using the <span class="code">self</span>
 property, you set them to the class properties <span class="ent">➌</span>
 . This will let you pass names and dates to the <span class="code">Birthday</span>
 class to store a birthday.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<h3 class="h3" id="ch10lev1sec2">
<strong>PROGRAMMING USER INPUT</strong>
</h3>
<p class="noindent">At this point, you have a <span class="code">Birthday</span>
 class that can hold a friend’s name and birthdate, and you have input fields in the storyboard that you set up in <a href="text00020.html#ch09">Chapter 9</a>
 . But the <span class="code">Birthday</span>
 class and the input fields aren’t connected, so the user’s input isn’t stored as a <span class="code">Birthday</span>
 . It’s time to write code to make the interface add birthdays. To do that, you’ll create a new <span class="code">AddBirthdayViewController</span>
 class to manage the input fields in the Add a Birthday Scene in the storyboard. (Remember that a view is controlled by a view controller, which is what you’ll make next.)</p>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<h4 class="h4" id="ch10lev2sec1">
<strong>CREATING A NEW FILE</strong>
</h4>
<p class="noindent">First, you’ll create a file where you’ll write the <span class="code">Birthday</span>
 class. A file in Xcode is just like any other computer file—it’s a type of document. When you write an app in Swift, you’ll write your classes and functions in Swift files. Just like how Word files have the extension <em>.doc</em>
 or <em>.docx</em>
 and PDF files end with <em>.pdf</em>
 , a Swift file has the extension <em>.swift</em>
 after its name.</p>
<p class="indent">If you want to add a new class to your application, create a new Swift file to write that class. You can write as many classes as you want in the same file, but it’s easier to organize your project if you keep classes in separate files with filenames that match each class’s name. <span class="smallcaps">CONTROL</span>
 -click the <em>BirthdayTracker</em>
 folder in the Project navigator and choose the <strong>New File…</strong>
 option from the menu, as shown in <a href="text00021.html#ch10fig1">Figure 10-1</a>
 .</p>
<div class="image"><img src="Image00222.jpg" alt="image" />
</div>
<p class="figcap"><a id="ch10fig1"></a>
 <em>Figure 10-1: Creating a new file in Xcode</em>
</p>
<p class="indent">This brings up a dialog like the one in <a href="text00021.html#ch10fig2">Figure 10-2</a>
 . Here you’re asked to select the kind of file you want to create, which is a generic, empty Swift file. Select <strong>iOS</strong>
 at the top of the dialog, select <strong>Swift File</strong>
 , and then click <strong>Next</strong>
 .</p>
<div class="image"><img src="Image00223.jpg" />
</div>
<p class="figcap"><a id="ch10fig2"></a>
 <span id="page_143"></span>
 <em>Figure 10-2: Choose</em>
 <strong>
<em>Swift File</em>
</strong>
 <em>for the template.</em>
</p>
<p class="indent">Finally, name the file <em>Birthday</em>
 and click <strong>Create</strong>
 . You should see <em>Birthday.swift</em>
 listed in the <em>BirthdayTracker</em>
 folder of the Project navigator. Click it and you should see an empty <em>Birthday.swift</em>
 file, as shown in <a href="text00021.html#ch10fig3">Figure 10-3</a>
 .</p>
<div class="image"><img src="Image00224.jpg" />
</div>
<p class="figcap"><a id="ch10fig3"></a>
 <em>Figure 10-3: The</em>
 Birthday.swift <em>file</em>
</p>
<p class="indent">Notice that at the top of the file, Xcode has automatically written some copyright information in code comments. The name that comes after “Created by” is pulled from your Contact Card in your computer’s Contacts application. After the copyright year, you should see the Organization Name that you used in <a href="text00011.html#ch01">Chapter 1</a>
 when you created your first Xcode project. Every time you create a new file in Xcode, this commented header is automatically included.</p>
<p class="indent"><span id="page_144"></span>
 Now that you have your <em>Birthday.swift</em>
 file, you can create the <span class="code">Birthday</span>
 class to store your birthdays.</p>
<h4 class="h4" id="ch10lev2sec2">
<strong>WRITING THE BIRTHDAY CLASS</strong>
</h4>
<p class="noindent">Your <span class="code">Birthday</span>
 class will have three constant properties: <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . The properties <span class="code">firstName</span>
 and <span class="code">lastName</span>
 should be of type <span class="code">String</span>
 , but <span class="code">birthdate</span>
 will be a special class built into Swift called <span class="code">Date</span>
 , which is specifically made to handle dates and times. We’ll use the <span class="code">Date</span>
 class’s functionality to alert the user about birthdays. Enter the following into <em>Birthday.swift</em>
 under the <span class="code">import Foundation</span>
 statement.</p>
<div class="image"><img src="Image00225.jpg" />
</div>
<p class="noindent1">
<em>Birthday.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 Birthday {<br />
<br />
    <span class="pink">let</span>
 firstName: <span class="violet">String</span>
<br />
    <span class="pink">let</span>
 lastName: <span class="violet">String</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 birthdate: <span class="violet">Date</span>
<br />
<br />
  <span class="ent">➋</span>
 <span class="pink">init</span>
 (firstName: <span class="violet">String</span>
 , lastName: <span class="violet">String</span>
 , birthdate: <span class="violet">Date</span>
 ) {<br />
<br />
      <span class="ent">➌</span>
 <span class="pink">self</span>
 .<span class="green1">firstName</span>
 = firstName<br />
        <span class="pink">self</span>
 .<span class="green1">lastName</span>
 = lastName<br />
        <span class="pink">self</span>
 .<span class="green1">birthdate</span>
 = birthdate<br />
    }<br />
}</pre>
</div>
<p class="indent">You can see the new <span class="code">Date</span>
 data type at <span class="ent">➊</span>
 . A <span class="code">Date</span>
 is declared just like any other variable.</p>
<p class="indent">At <span class="ent">➋</span>
 , you add an initializer to the <span class="code">Birthday</span>
 class that takes a <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 as input parameters. Then, using the <span class="code">self</span>
 property, you set them to the class properties <span class="ent">➌</span>
 . This will let you pass names and dates to the <span class="code">Birthday</span>
 class to store a birthday.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<h3 class="h3" id="ch10lev1sec2">
<strong>PROGRAMMING USER INPUT</strong>
</h3>
<p class="noindent">At this point, you have a <span class="code">Birthday</span>
 class that can hold a friend’s name and birthdate, and you have input fields in the storyboard that you set up in <a href="text00020.html#ch09">Chapter 9</a>
 . But the <span class="code">Birthday</span>
 class and the input fields aren’t connected, so the user’s input isn’t stored as a <span class="code">Birthday</span>
 . It’s time to write code to make the interface add birthdays. To do that, you’ll create a new <span class="code">AddBirthdayViewController</span>
 class to manage the input fields in the Add a Birthday Scene in the storyboard. (Remember that a view is controlled by a view controller, which is what you’ll make next.)</p>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="noindent">First, you’ll create a file where you’ll write the <span class="code">Birthday</span>
 class. A file in Xcode is just like any other computer file—it’s a type of document. When you write an app in Swift, you’ll write your classes and functions in Swift files. Just like how Word files have the extension <em>.doc</em>
 or <em>.docx</em>
 and PDF files end with <em>.pdf</em>
 , a Swift file has the extension <em>.swift</em>
 after its name.</p>
<p class="indent">If you want to add a new class to your application, create a new Swift file to write that class. You can write as many classes as you want in the same file, but it’s easier to organize your project if you keep classes in separate files with filenames that match each class’s name. <span class="smallcaps">CONTROL</span>
 -click the <em>BirthdayTracker</em>
 folder in the Project navigator and choose the <strong>New File…</strong>
 option from the menu, as shown in <a href="text00021.html#ch10fig1">Figure 10-1</a>
 .</p>
<div class="image"><img src="Image00222.jpg" alt="image" />
</div>
<p class="figcap"><a id="ch10fig1"></a>
 <em>Figure 10-1: Creating a new file in Xcode</em>
</p>
<p class="indent">This brings up a dialog like the one in <a href="text00021.html#ch10fig2">Figure 10-2</a>
 . Here you’re asked to select the kind of file you want to create, which is a generic, empty Swift file. Select <strong>iOS</strong>
 at the top of the dialog, select <strong>Swift File</strong>
 , and then click <strong>Next</strong>
 .</p>
<div class="image"><img src="Image00223.jpg" />
</div>
<p class="figcap"><a id="ch10fig2"></a>
 <span id="page_143"></span>
 <em>Figure 10-2: Choose</em>
 <strong>
<em>Swift File</em>
</strong>
 <em>for the template.</em>
</p>
<p class="indent">Finally, name the file <em>Birthday</em>
 and click <strong>Create</strong>
 . You should see <em>Birthday.swift</em>
 listed in the <em>BirthdayTracker</em>
 folder of the Project navigator. Click it and you should see an empty <em>Birthday.swift</em>
 file, as shown in <a href="text00021.html#ch10fig3">Figure 10-3</a>
 .</p>
<div class="image"><img src="Image00224.jpg" />
</div>
<p class="figcap"><a id="ch10fig3"></a>
 <em>Figure 10-3: The</em>
 Birthday.swift <em>file</em>
</p>
<p class="indent">Notice that at the top of the file, Xcode has automatically written some copyright information in code comments. The name that comes after “Created by” is pulled from your Contact Card in your computer’s Contacts application. After the copyright year, you should see the Organization Name that you used in <a href="text00011.html#ch01">Chapter 1</a>
 when you created your first Xcode project. Every time you create a new file in Xcode, this commented header is automatically included.</p>
<p class="indent"><span id="page_144"></span>
 Now that you have your <em>Birthday.swift</em>
 file, you can create the <span class="code">Birthday</span>
 class to store your birthdays.</p>
<h4 class="h4" id="ch10lev2sec2">
<strong>WRITING THE BIRTHDAY CLASS</strong>
</h4>
<p class="noindent">Your <span class="code">Birthday</span>
 class will have three constant properties: <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . The properties <span class="code">firstName</span>
 and <span class="code">lastName</span>
 should be of type <span class="code">String</span>
 , but <span class="code">birthdate</span>
 will be a special class built into Swift called <span class="code">Date</span>
 , which is specifically made to handle dates and times. We’ll use the <span class="code">Date</span>
 class’s functionality to alert the user about birthdays. Enter the following into <em>Birthday.swift</em>
 under the <span class="code">import Foundation</span>
 statement.</p>
<div class="image"><img src="Image00225.jpg" />
</div>
<p class="noindent1">
<em>Birthday.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 Birthday {<br />
<br />
    <span class="pink">let</span>
 firstName: <span class="violet">String</span>
<br />
    <span class="pink">let</span>
 lastName: <span class="violet">String</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 birthdate: <span class="violet">Date</span>
<br />
<br />
  <span class="ent">➋</span>
 <span class="pink">init</span>
 (firstName: <span class="violet">String</span>
 , lastName: <span class="violet">String</span>
 , birthdate: <span class="violet">Date</span>
 ) {<br />
<br />
      <span class="ent">➌</span>
 <span class="pink">self</span>
 .<span class="green1">firstName</span>
 = firstName<br />
        <span class="pink">self</span>
 .<span class="green1">lastName</span>
 = lastName<br />
        <span class="pink">self</span>
 .<span class="green1">birthdate</span>
 = birthdate<br />
    }<br />
}</pre>
</div>
<p class="indent">You can see the new <span class="code">Date</span>
 data type at <span class="ent">➊</span>
 . A <span class="code">Date</span>
 is declared just like any other variable.</p>
<p class="indent">At <span class="ent">➋</span>
 , you add an initializer to the <span class="code">Birthday</span>
 class that takes a <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 as input parameters. Then, using the <span class="code">self</span>
 property, you set them to the class properties <span class="ent">➌</span>
 . This will let you pass names and dates to the <span class="code">Birthday</span>
 class to store a birthday.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<h3 class="h3" id="ch10lev1sec2">
<strong>PROGRAMMING USER INPUT</strong>
</h3>
<p class="noindent">At this point, you have a <span class="code">Birthday</span>
 class that can hold a friend’s name and birthdate, and you have input fields in the storyboard that you set up in <a href="text00020.html#ch09">Chapter 9</a>
 . But the <span class="code">Birthday</span>
 class and the input fields aren’t connected, so the user’s input isn’t stored as a <span class="code">Birthday</span>
 . It’s time to write code to make the interface add birthdays. To do that, you’ll create a new <span class="code">AddBirthdayViewController</span>
 class to manage the input fields in the Add a Birthday Scene in the storyboard. (Remember that a view is controlled by a view controller, which is what you’ll make next.)</p>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">If you want to add a new class to your application, create a new Swift file to write that class. You can write as many classes as you want in the same file, but it’s easier to organize your project if you keep classes in separate files with filenames that match each class’s name. <span class="smallcaps">CONTROL</span>
 -click the <em>BirthdayTracker</em>
 folder in the Project navigator and choose the <strong>New File…</strong>
 option from the menu, as shown in <a href="text00021.html#ch10fig1">Figure 10-1</a>
 .</p>
<div class="image"><img src="Image00222.jpg" alt="image" />
</div>
<p class="figcap"><a id="ch10fig1"></a>
 <em>Figure 10-1: Creating a new file in Xcode</em>
</p>
<p class="indent">This brings up a dialog like the one in <a href="text00021.html#ch10fig2">Figure 10-2</a>
 . Here you’re asked to select the kind of file you want to create, which is a generic, empty Swift file. Select <strong>iOS</strong>
 at the top of the dialog, select <strong>Swift File</strong>
 , and then click <strong>Next</strong>
 .</p>
<div class="image"><img src="Image00223.jpg" />
</div>
<p class="figcap"><a id="ch10fig2"></a>
 <span id="page_143"></span>
 <em>Figure 10-2: Choose</em>
 <strong>
<em>Swift File</em>
</strong>
 <em>for the template.</em>
</p>
<p class="indent">Finally, name the file <em>Birthday</em>
 and click <strong>Create</strong>
 . You should see <em>Birthday.swift</em>
 listed in the <em>BirthdayTracker</em>
 folder of the Project navigator. Click it and you should see an empty <em>Birthday.swift</em>
 file, as shown in <a href="text00021.html#ch10fig3">Figure 10-3</a>
 .</p>
<div class="image"><img src="Image00224.jpg" />
</div>
<p class="figcap"><a id="ch10fig3"></a>
 <em>Figure 10-3: The</em>
 Birthday.swift <em>file</em>
</p>
<p class="indent">Notice that at the top of the file, Xcode has automatically written some copyright information in code comments. The name that comes after “Created by” is pulled from your Contact Card in your computer’s Contacts application. After the copyright year, you should see the Organization Name that you used in <a href="text00011.html#ch01">Chapter 1</a>
 when you created your first Xcode project. Every time you create a new file in Xcode, this commented header is automatically included.</p>
<p class="indent"><span id="page_144"></span>
 Now that you have your <em>Birthday.swift</em>
 file, you can create the <span class="code">Birthday</span>
 class to store your birthdays.</p>
<h4 class="h4" id="ch10lev2sec2">
<strong>WRITING THE BIRTHDAY CLASS</strong>
</h4>
<p class="noindent">Your <span class="code">Birthday</span>
 class will have three constant properties: <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . The properties <span class="code">firstName</span>
 and <span class="code">lastName</span>
 should be of type <span class="code">String</span>
 , but <span class="code">birthdate</span>
 will be a special class built into Swift called <span class="code">Date</span>
 , which is specifically made to handle dates and times. We’ll use the <span class="code">Date</span>
 class’s functionality to alert the user about birthdays. Enter the following into <em>Birthday.swift</em>
 under the <span class="code">import Foundation</span>
 statement.</p>
<div class="image"><img src="Image00225.jpg" />
</div>
<p class="noindent1">
<em>Birthday.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 Birthday {<br />
<br />
    <span class="pink">let</span>
 firstName: <span class="violet">String</span>
<br />
    <span class="pink">let</span>
 lastName: <span class="violet">String</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 birthdate: <span class="violet">Date</span>
<br />
<br />
  <span class="ent">➋</span>
 <span class="pink">init</span>
 (firstName: <span class="violet">String</span>
 , lastName: <span class="violet">String</span>
 , birthdate: <span class="violet">Date</span>
 ) {<br />
<br />
      <span class="ent">➌</span>
 <span class="pink">self</span>
 .<span class="green1">firstName</span>
 = firstName<br />
        <span class="pink">self</span>
 .<span class="green1">lastName</span>
 = lastName<br />
        <span class="pink">self</span>
 .<span class="green1">birthdate</span>
 = birthdate<br />
    }<br />
}</pre>
</div>
<p class="indent">You can see the new <span class="code">Date</span>
 data type at <span class="ent">➊</span>
 . A <span class="code">Date</span>
 is declared just like any other variable.</p>
<p class="indent">At <span class="ent">➋</span>
 , you add an initializer to the <span class="code">Birthday</span>
 class that takes a <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 as input parameters. Then, using the <span class="code">self</span>
 property, you set them to the class properties <span class="ent">➌</span>
 . This will let you pass names and dates to the <span class="code">Birthday</span>
 class to store a birthday.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<h3 class="h3" id="ch10lev1sec2">
<strong>PROGRAMMING USER INPUT</strong>
</h3>
<p class="noindent">At this point, you have a <span class="code">Birthday</span>
 class that can hold a friend’s name and birthdate, and you have input fields in the storyboard that you set up in <a href="text00020.html#ch09">Chapter 9</a>
 . But the <span class="code">Birthday</span>
 class and the input fields aren’t connected, so the user’s input isn’t stored as a <span class="code">Birthday</span>
 . It’s time to write code to make the interface add birthdays. To do that, you’ll create a new <span class="code">AddBirthdayViewController</span>
 class to manage the input fields in the Add a Birthday Scene in the storyboard. (Remember that a view is controlled by a view controller, which is what you’ll make next.)</p>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<div class="image"><img src="Image00222.jpg" alt="image" />
</div>
<p class="figcap"><a id="ch10fig1"></a>
 <em>Figure 10-1: Creating a new file in Xcode</em>
</p>
<p class="indent">This brings up a dialog like the one in <a href="text00021.html#ch10fig2">Figure 10-2</a>
 . Here you’re asked to select the kind of file you want to create, which is a generic, empty Swift file. Select <strong>iOS</strong>
 at the top of the dialog, select <strong>Swift File</strong>
 , and then click <strong>Next</strong>
 .</p>
<div class="image"><img src="Image00223.jpg" />
</div>
<p class="figcap"><a id="ch10fig2"></a>
 <span id="page_143"></span>
 <em>Figure 10-2: Choose</em>
 <strong>
<em>Swift File</em>
</strong>
 <em>for the template.</em>
</p>
<p class="indent">Finally, name the file <em>Birthday</em>
 and click <strong>Create</strong>
 . You should see <em>Birthday.swift</em>
 listed in the <em>BirthdayTracker</em>
 folder of the Project navigator. Click it and you should see an empty <em>Birthday.swift</em>
 file, as shown in <a href="text00021.html#ch10fig3">Figure 10-3</a>
 .</p>
<div class="image"><img src="Image00224.jpg" />
</div>
<p class="figcap"><a id="ch10fig3"></a>
 <em>Figure 10-3: The</em>
 Birthday.swift <em>file</em>
</p>
<p class="indent">Notice that at the top of the file, Xcode has automatically written some copyright information in code comments. The name that comes after “Created by” is pulled from your Contact Card in your computer’s Contacts application. After the copyright year, you should see the Organization Name that you used in <a href="text00011.html#ch01">Chapter 1</a>
 when you created your first Xcode project. Every time you create a new file in Xcode, this commented header is automatically included.</p>
<p class="indent"><span id="page_144"></span>
 Now that you have your <em>Birthday.swift</em>
 file, you can create the <span class="code">Birthday</span>
 class to store your birthdays.</p>
<h4 class="h4" id="ch10lev2sec2">
<strong>WRITING THE BIRTHDAY CLASS</strong>
</h4>
<p class="noindent">Your <span class="code">Birthday</span>
 class will have three constant properties: <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . The properties <span class="code">firstName</span>
 and <span class="code">lastName</span>
 should be of type <span class="code">String</span>
 , but <span class="code">birthdate</span>
 will be a special class built into Swift called <span class="code">Date</span>
 , which is specifically made to handle dates and times. We’ll use the <span class="code">Date</span>
 class’s functionality to alert the user about birthdays. Enter the following into <em>Birthday.swift</em>
 under the <span class="code">import Foundation</span>
 statement.</p>
<div class="image"><img src="Image00225.jpg" />
</div>
<p class="noindent1">
<em>Birthday.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 Birthday {<br />
<br />
    <span class="pink">let</span>
 firstName: <span class="violet">String</span>
<br />
    <span class="pink">let</span>
 lastName: <span class="violet">String</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 birthdate: <span class="violet">Date</span>
<br />
<br />
  <span class="ent">➋</span>
 <span class="pink">init</span>
 (firstName: <span class="violet">String</span>
 , lastName: <span class="violet">String</span>
 , birthdate: <span class="violet">Date</span>
 ) {<br />
<br />
      <span class="ent">➌</span>
 <span class="pink">self</span>
 .<span class="green1">firstName</span>
 = firstName<br />
        <span class="pink">self</span>
 .<span class="green1">lastName</span>
 = lastName<br />
        <span class="pink">self</span>
 .<span class="green1">birthdate</span>
 = birthdate<br />
    }<br />
}</pre>
</div>
<p class="indent">You can see the new <span class="code">Date</span>
 data type at <span class="ent">➊</span>
 . A <span class="code">Date</span>
 is declared just like any other variable.</p>
<p class="indent">At <span class="ent">➋</span>
 , you add an initializer to the <span class="code">Birthday</span>
 class that takes a <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 as input parameters. Then, using the <span class="code">self</span>
 property, you set them to the class properties <span class="ent">➌</span>
 . This will let you pass names and dates to the <span class="code">Birthday</span>
 class to store a birthday.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<h3 class="h3" id="ch10lev1sec2">
<strong>PROGRAMMING USER INPUT</strong>
</h3>
<p class="noindent">At this point, you have a <span class="code">Birthday</span>
 class that can hold a friend’s name and birthdate, and you have input fields in the storyboard that you set up in <a href="text00020.html#ch09">Chapter 9</a>
 . But the <span class="code">Birthday</span>
 class and the input fields aren’t connected, so the user’s input isn’t stored as a <span class="code">Birthday</span>
 . It’s time to write code to make the interface add birthdays. To do that, you’ll create a new <span class="code">AddBirthdayViewController</span>
 class to manage the input fields in the Add a Birthday Scene in the storyboard. (Remember that a view is controlled by a view controller, which is what you’ll make next.)</p>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="figcap"><a id="ch10fig1"></a>
 <em>Figure 10-1: Creating a new file in Xcode</em>
</p>
<p class="indent">This brings up a dialog like the one in <a href="text00021.html#ch10fig2">Figure 10-2</a>
 . Here you’re asked to select the kind of file you want to create, which is a generic, empty Swift file. Select <strong>iOS</strong>
 at the top of the dialog, select <strong>Swift File</strong>
 , and then click <strong>Next</strong>
 .</p>
<div class="image"><img src="Image00223.jpg" />
</div>
<p class="figcap"><a id="ch10fig2"></a>
 <span id="page_143"></span>
 <em>Figure 10-2: Choose</em>
 <strong>
<em>Swift File</em>
</strong>
 <em>for the template.</em>
</p>
<p class="indent">Finally, name the file <em>Birthday</em>
 and click <strong>Create</strong>
 . You should see <em>Birthday.swift</em>
 listed in the <em>BirthdayTracker</em>
 folder of the Project navigator. Click it and you should see an empty <em>Birthday.swift</em>
 file, as shown in <a href="text00021.html#ch10fig3">Figure 10-3</a>
 .</p>
<div class="image"><img src="Image00224.jpg" />
</div>
<p class="figcap"><a id="ch10fig3"></a>
 <em>Figure 10-3: The</em>
 Birthday.swift <em>file</em>
</p>
<p class="indent">Notice that at the top of the file, Xcode has automatically written some copyright information in code comments. The name that comes after “Created by” is pulled from your Contact Card in your computer’s Contacts application. After the copyright year, you should see the Organization Name that you used in <a href="text00011.html#ch01">Chapter 1</a>
 when you created your first Xcode project. Every time you create a new file in Xcode, this commented header is automatically included.</p>
<p class="indent"><span id="page_144"></span>
 Now that you have your <em>Birthday.swift</em>
 file, you can create the <span class="code">Birthday</span>
 class to store your birthdays.</p>
<h4 class="h4" id="ch10lev2sec2">
<strong>WRITING THE BIRTHDAY CLASS</strong>
</h4>
<p class="noindent">Your <span class="code">Birthday</span>
 class will have three constant properties: <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . The properties <span class="code">firstName</span>
 and <span class="code">lastName</span>
 should be of type <span class="code">String</span>
 , but <span class="code">birthdate</span>
 will be a special class built into Swift called <span class="code">Date</span>
 , which is specifically made to handle dates and times. We’ll use the <span class="code">Date</span>
 class’s functionality to alert the user about birthdays. Enter the following into <em>Birthday.swift</em>
 under the <span class="code">import Foundation</span>
 statement.</p>
<div class="image"><img src="Image00225.jpg" />
</div>
<p class="noindent1">
<em>Birthday.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 Birthday {<br />
<br />
    <span class="pink">let</span>
 firstName: <span class="violet">String</span>
<br />
    <span class="pink">let</span>
 lastName: <span class="violet">String</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 birthdate: <span class="violet">Date</span>
<br />
<br />
  <span class="ent">➋</span>
 <span class="pink">init</span>
 (firstName: <span class="violet">String</span>
 , lastName: <span class="violet">String</span>
 , birthdate: <span class="violet">Date</span>
 ) {<br />
<br />
      <span class="ent">➌</span>
 <span class="pink">self</span>
 .<span class="green1">firstName</span>
 = firstName<br />
        <span class="pink">self</span>
 .<span class="green1">lastName</span>
 = lastName<br />
        <span class="pink">self</span>
 .<span class="green1">birthdate</span>
 = birthdate<br />
    }<br />
}</pre>
</div>
<p class="indent">You can see the new <span class="code">Date</span>
 data type at <span class="ent">➊</span>
 . A <span class="code">Date</span>
 is declared just like any other variable.</p>
<p class="indent">At <span class="ent">➋</span>
 , you add an initializer to the <span class="code">Birthday</span>
 class that takes a <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 as input parameters. Then, using the <span class="code">self</span>
 property, you set them to the class properties <span class="ent">➌</span>
 . This will let you pass names and dates to the <span class="code">Birthday</span>
 class to store a birthday.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<h3 class="h3" id="ch10lev1sec2">
<strong>PROGRAMMING USER INPUT</strong>
</h3>
<p class="noindent">At this point, you have a <span class="code">Birthday</span>
 class that can hold a friend’s name and birthdate, and you have input fields in the storyboard that you set up in <a href="text00020.html#ch09">Chapter 9</a>
 . But the <span class="code">Birthday</span>
 class and the input fields aren’t connected, so the user’s input isn’t stored as a <span class="code">Birthday</span>
 . It’s time to write code to make the interface add birthdays. To do that, you’ll create a new <span class="code">AddBirthdayViewController</span>
 class to manage the input fields in the Add a Birthday Scene in the storyboard. (Remember that a view is controlled by a view controller, which is what you’ll make next.)</p>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">This brings up a dialog like the one in <a href="text00021.html#ch10fig2">Figure 10-2</a>
 . Here you’re asked to select the kind of file you want to create, which is a generic, empty Swift file. Select <strong>iOS</strong>
 at the top of the dialog, select <strong>Swift File</strong>
 , and then click <strong>Next</strong>
 .</p>
<div class="image"><img src="Image00223.jpg" />
</div>
<p class="figcap"><a id="ch10fig2"></a>
 <span id="page_143"></span>
 <em>Figure 10-2: Choose</em>
 <strong>
<em>Swift File</em>
</strong>
 <em>for the template.</em>
</p>
<p class="indent">Finally, name the file <em>Birthday</em>
 and click <strong>Create</strong>
 . You should see <em>Birthday.swift</em>
 listed in the <em>BirthdayTracker</em>
 folder of the Project navigator. Click it and you should see an empty <em>Birthday.swift</em>
 file, as shown in <a href="text00021.html#ch10fig3">Figure 10-3</a>
 .</p>
<div class="image"><img src="Image00224.jpg" />
</div>
<p class="figcap"><a id="ch10fig3"></a>
 <em>Figure 10-3: The</em>
 Birthday.swift <em>file</em>
</p>
<p class="indent">Notice that at the top of the file, Xcode has automatically written some copyright information in code comments. The name that comes after “Created by” is pulled from your Contact Card in your computer’s Contacts application. After the copyright year, you should see the Organization Name that you used in <a href="text00011.html#ch01">Chapter 1</a>
 when you created your first Xcode project. Every time you create a new file in Xcode, this commented header is automatically included.</p>
<p class="indent"><span id="page_144"></span>
 Now that you have your <em>Birthday.swift</em>
 file, you can create the <span class="code">Birthday</span>
 class to store your birthdays.</p>
<h4 class="h4" id="ch10lev2sec2">
<strong>WRITING THE BIRTHDAY CLASS</strong>
</h4>
<p class="noindent">Your <span class="code">Birthday</span>
 class will have three constant properties: <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . The properties <span class="code">firstName</span>
 and <span class="code">lastName</span>
 should be of type <span class="code">String</span>
 , but <span class="code">birthdate</span>
 will be a special class built into Swift called <span class="code">Date</span>
 , which is specifically made to handle dates and times. We’ll use the <span class="code">Date</span>
 class’s functionality to alert the user about birthdays. Enter the following into <em>Birthday.swift</em>
 under the <span class="code">import Foundation</span>
 statement.</p>
<div class="image"><img src="Image00225.jpg" />
</div>
<p class="noindent1">
<em>Birthday.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 Birthday {<br />
<br />
    <span class="pink">let</span>
 firstName: <span class="violet">String</span>
<br />
    <span class="pink">let</span>
 lastName: <span class="violet">String</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 birthdate: <span class="violet">Date</span>
<br />
<br />
  <span class="ent">➋</span>
 <span class="pink">init</span>
 (firstName: <span class="violet">String</span>
 , lastName: <span class="violet">String</span>
 , birthdate: <span class="violet">Date</span>
 ) {<br />
<br />
      <span class="ent">➌</span>
 <span class="pink">self</span>
 .<span class="green1">firstName</span>
 = firstName<br />
        <span class="pink">self</span>
 .<span class="green1">lastName</span>
 = lastName<br />
        <span class="pink">self</span>
 .<span class="green1">birthdate</span>
 = birthdate<br />
    }<br />
}</pre>
</div>
<p class="indent">You can see the new <span class="code">Date</span>
 data type at <span class="ent">➊</span>
 . A <span class="code">Date</span>
 is declared just like any other variable.</p>
<p class="indent">At <span class="ent">➋</span>
 , you add an initializer to the <span class="code">Birthday</span>
 class that takes a <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 as input parameters. Then, using the <span class="code">self</span>
 property, you set them to the class properties <span class="ent">➌</span>
 . This will let you pass names and dates to the <span class="code">Birthday</span>
 class to store a birthday.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<h3 class="h3" id="ch10lev1sec2">
<strong>PROGRAMMING USER INPUT</strong>
</h3>
<p class="noindent">At this point, you have a <span class="code">Birthday</span>
 class that can hold a friend’s name and birthdate, and you have input fields in the storyboard that you set up in <a href="text00020.html#ch09">Chapter 9</a>
 . But the <span class="code">Birthday</span>
 class and the input fields aren’t connected, so the user’s input isn’t stored as a <span class="code">Birthday</span>
 . It’s time to write code to make the interface add birthdays. To do that, you’ll create a new <span class="code">AddBirthdayViewController</span>
 class to manage the input fields in the Add a Birthday Scene in the storyboard. (Remember that a view is controlled by a view controller, which is what you’ll make next.)</p>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<div class="image"><img src="Image00223.jpg" />
</div>
<p class="figcap"><a id="ch10fig2"></a>
 <span id="page_143"></span>
 <em>Figure 10-2: Choose</em>
 <strong>
<em>Swift File</em>
</strong>
 <em>for the template.</em>
</p>
<p class="indent">Finally, name the file <em>Birthday</em>
 and click <strong>Create</strong>
 . You should see <em>Birthday.swift</em>
 listed in the <em>BirthdayTracker</em>
 folder of the Project navigator. Click it and you should see an empty <em>Birthday.swift</em>
 file, as shown in <a href="text00021.html#ch10fig3">Figure 10-3</a>
 .</p>
<div class="image"><img src="Image00224.jpg" />
</div>
<p class="figcap"><a id="ch10fig3"></a>
 <em>Figure 10-3: The</em>
 Birthday.swift <em>file</em>
</p>
<p class="indent">Notice that at the top of the file, Xcode has automatically written some copyright information in code comments. The name that comes after “Created by” is pulled from your Contact Card in your computer’s Contacts application. After the copyright year, you should see the Organization Name that you used in <a href="text00011.html#ch01">Chapter 1</a>
 when you created your first Xcode project. Every time you create a new file in Xcode, this commented header is automatically included.</p>
<p class="indent"><span id="page_144"></span>
 Now that you have your <em>Birthday.swift</em>
 file, you can create the <span class="code">Birthday</span>
 class to store your birthdays.</p>
<h4 class="h4" id="ch10lev2sec2">
<strong>WRITING THE BIRTHDAY CLASS</strong>
</h4>
<p class="noindent">Your <span class="code">Birthday</span>
 class will have three constant properties: <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . The properties <span class="code">firstName</span>
 and <span class="code">lastName</span>
 should be of type <span class="code">String</span>
 , but <span class="code">birthdate</span>
 will be a special class built into Swift called <span class="code">Date</span>
 , which is specifically made to handle dates and times. We’ll use the <span class="code">Date</span>
 class’s functionality to alert the user about birthdays. Enter the following into <em>Birthday.swift</em>
 under the <span class="code">import Foundation</span>
 statement.</p>
<div class="image"><img src="Image00225.jpg" />
</div>
<p class="noindent1">
<em>Birthday.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 Birthday {<br />
<br />
    <span class="pink">let</span>
 firstName: <span class="violet">String</span>
<br />
    <span class="pink">let</span>
 lastName: <span class="violet">String</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 birthdate: <span class="violet">Date</span>
<br />
<br />
  <span class="ent">➋</span>
 <span class="pink">init</span>
 (firstName: <span class="violet">String</span>
 , lastName: <span class="violet">String</span>
 , birthdate: <span class="violet">Date</span>
 ) {<br />
<br />
      <span class="ent">➌</span>
 <span class="pink">self</span>
 .<span class="green1">firstName</span>
 = firstName<br />
        <span class="pink">self</span>
 .<span class="green1">lastName</span>
 = lastName<br />
        <span class="pink">self</span>
 .<span class="green1">birthdate</span>
 = birthdate<br />
    }<br />
}</pre>
</div>
<p class="indent">You can see the new <span class="code">Date</span>
 data type at <span class="ent">➊</span>
 . A <span class="code">Date</span>
 is declared just like any other variable.</p>
<p class="indent">At <span class="ent">➋</span>
 , you add an initializer to the <span class="code">Birthday</span>
 class that takes a <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 as input parameters. Then, using the <span class="code">self</span>
 property, you set them to the class properties <span class="ent">➌</span>
 . This will let you pass names and dates to the <span class="code">Birthday</span>
 class to store a birthday.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<h3 class="h3" id="ch10lev1sec2">
<strong>PROGRAMMING USER INPUT</strong>
</h3>
<p class="noindent">At this point, you have a <span class="code">Birthday</span>
 class that can hold a friend’s name and birthdate, and you have input fields in the storyboard that you set up in <a href="text00020.html#ch09">Chapter 9</a>
 . But the <span class="code">Birthday</span>
 class and the input fields aren’t connected, so the user’s input isn’t stored as a <span class="code">Birthday</span>
 . It’s time to write code to make the interface add birthdays. To do that, you’ll create a new <span class="code">AddBirthdayViewController</span>
 class to manage the input fields in the Add a Birthday Scene in the storyboard. (Remember that a view is controlled by a view controller, which is what you’ll make next.)</p>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="figcap"><a id="ch10fig2"></a>
 <span id="page_143"></span>
 <em>Figure 10-2: Choose</em>
 <strong>
<em>Swift File</em>
</strong>
 <em>for the template.</em>
</p>
<p class="indent">Finally, name the file <em>Birthday</em>
 and click <strong>Create</strong>
 . You should see <em>Birthday.swift</em>
 listed in the <em>BirthdayTracker</em>
 folder of the Project navigator. Click it and you should see an empty <em>Birthday.swift</em>
 file, as shown in <a href="text00021.html#ch10fig3">Figure 10-3</a>
 .</p>
<div class="image"><img src="Image00224.jpg" />
</div>
<p class="figcap"><a id="ch10fig3"></a>
 <em>Figure 10-3: The</em>
 Birthday.swift <em>file</em>
</p>
<p class="indent">Notice that at the top of the file, Xcode has automatically written some copyright information in code comments. The name that comes after “Created by” is pulled from your Contact Card in your computer’s Contacts application. After the copyright year, you should see the Organization Name that you used in <a href="text00011.html#ch01">Chapter 1</a>
 when you created your first Xcode project. Every time you create a new file in Xcode, this commented header is automatically included.</p>
<p class="indent"><span id="page_144"></span>
 Now that you have your <em>Birthday.swift</em>
 file, you can create the <span class="code">Birthday</span>
 class to store your birthdays.</p>
<h4 class="h4" id="ch10lev2sec2">
<strong>WRITING THE BIRTHDAY CLASS</strong>
</h4>
<p class="noindent">Your <span class="code">Birthday</span>
 class will have three constant properties: <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . The properties <span class="code">firstName</span>
 and <span class="code">lastName</span>
 should be of type <span class="code">String</span>
 , but <span class="code">birthdate</span>
 will be a special class built into Swift called <span class="code">Date</span>
 , which is specifically made to handle dates and times. We’ll use the <span class="code">Date</span>
 class’s functionality to alert the user about birthdays. Enter the following into <em>Birthday.swift</em>
 under the <span class="code">import Foundation</span>
 statement.</p>
<div class="image"><img src="Image00225.jpg" />
</div>
<p class="noindent1">
<em>Birthday.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 Birthday {<br />
<br />
    <span class="pink">let</span>
 firstName: <span class="violet">String</span>
<br />
    <span class="pink">let</span>
 lastName: <span class="violet">String</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 birthdate: <span class="violet">Date</span>
<br />
<br />
  <span class="ent">➋</span>
 <span class="pink">init</span>
 (firstName: <span class="violet">String</span>
 , lastName: <span class="violet">String</span>
 , birthdate: <span class="violet">Date</span>
 ) {<br />
<br />
      <span class="ent">➌</span>
 <span class="pink">self</span>
 .<span class="green1">firstName</span>
 = firstName<br />
        <span class="pink">self</span>
 .<span class="green1">lastName</span>
 = lastName<br />
        <span class="pink">self</span>
 .<span class="green1">birthdate</span>
 = birthdate<br />
    }<br />
}</pre>
</div>
<p class="indent">You can see the new <span class="code">Date</span>
 data type at <span class="ent">➊</span>
 . A <span class="code">Date</span>
 is declared just like any other variable.</p>
<p class="indent">At <span class="ent">➋</span>
 , you add an initializer to the <span class="code">Birthday</span>
 class that takes a <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 as input parameters. Then, using the <span class="code">self</span>
 property, you set them to the class properties <span class="ent">➌</span>
 . This will let you pass names and dates to the <span class="code">Birthday</span>
 class to store a birthday.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<h3 class="h3" id="ch10lev1sec2">
<strong>PROGRAMMING USER INPUT</strong>
</h3>
<p class="noindent">At this point, you have a <span class="code">Birthday</span>
 class that can hold a friend’s name and birthdate, and you have input fields in the storyboard that you set up in <a href="text00020.html#ch09">Chapter 9</a>
 . But the <span class="code">Birthday</span>
 class and the input fields aren’t connected, so the user’s input isn’t stored as a <span class="code">Birthday</span>
 . It’s time to write code to make the interface add birthdays. To do that, you’ll create a new <span class="code">AddBirthdayViewController</span>
 class to manage the input fields in the Add a Birthday Scene in the storyboard. (Remember that a view is controlled by a view controller, which is what you’ll make next.)</p>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">Finally, name the file <em>Birthday</em>
 and click <strong>Create</strong>
 . You should see <em>Birthday.swift</em>
 listed in the <em>BirthdayTracker</em>
 folder of the Project navigator. Click it and you should see an empty <em>Birthday.swift</em>
 file, as shown in <a href="text00021.html#ch10fig3">Figure 10-3</a>
 .</p>
<div class="image"><img src="Image00224.jpg" />
</div>
<p class="figcap"><a id="ch10fig3"></a>
 <em>Figure 10-3: The</em>
 Birthday.swift <em>file</em>
</p>
<p class="indent">Notice that at the top of the file, Xcode has automatically written some copyright information in code comments. The name that comes after “Created by” is pulled from your Contact Card in your computer’s Contacts application. After the copyright year, you should see the Organization Name that you used in <a href="text00011.html#ch01">Chapter 1</a>
 when you created your first Xcode project. Every time you create a new file in Xcode, this commented header is automatically included.</p>
<p class="indent"><span id="page_144"></span>
 Now that you have your <em>Birthday.swift</em>
 file, you can create the <span class="code">Birthday</span>
 class to store your birthdays.</p>
<h4 class="h4" id="ch10lev2sec2">
<strong>WRITING THE BIRTHDAY CLASS</strong>
</h4>
<p class="noindent">Your <span class="code">Birthday</span>
 class will have three constant properties: <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . The properties <span class="code">firstName</span>
 and <span class="code">lastName</span>
 should be of type <span class="code">String</span>
 , but <span class="code">birthdate</span>
 will be a special class built into Swift called <span class="code">Date</span>
 , which is specifically made to handle dates and times. We’ll use the <span class="code">Date</span>
 class’s functionality to alert the user about birthdays. Enter the following into <em>Birthday.swift</em>
 under the <span class="code">import Foundation</span>
 statement.</p>
<div class="image"><img src="Image00225.jpg" />
</div>
<p class="noindent1">
<em>Birthday.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 Birthday {<br />
<br />
    <span class="pink">let</span>
 firstName: <span class="violet">String</span>
<br />
    <span class="pink">let</span>
 lastName: <span class="violet">String</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 birthdate: <span class="violet">Date</span>
<br />
<br />
  <span class="ent">➋</span>
 <span class="pink">init</span>
 (firstName: <span class="violet">String</span>
 , lastName: <span class="violet">String</span>
 , birthdate: <span class="violet">Date</span>
 ) {<br />
<br />
      <span class="ent">➌</span>
 <span class="pink">self</span>
 .<span class="green1">firstName</span>
 = firstName<br />
        <span class="pink">self</span>
 .<span class="green1">lastName</span>
 = lastName<br />
        <span class="pink">self</span>
 .<span class="green1">birthdate</span>
 = birthdate<br />
    }<br />
}</pre>
</div>
<p class="indent">You can see the new <span class="code">Date</span>
 data type at <span class="ent">➊</span>
 . A <span class="code">Date</span>
 is declared just like any other variable.</p>
<p class="indent">At <span class="ent">➋</span>
 , you add an initializer to the <span class="code">Birthday</span>
 class that takes a <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 as input parameters. Then, using the <span class="code">self</span>
 property, you set them to the class properties <span class="ent">➌</span>
 . This will let you pass names and dates to the <span class="code">Birthday</span>
 class to store a birthday.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<h3 class="h3" id="ch10lev1sec2">
<strong>PROGRAMMING USER INPUT</strong>
</h3>
<p class="noindent">At this point, you have a <span class="code">Birthday</span>
 class that can hold a friend’s name and birthdate, and you have input fields in the storyboard that you set up in <a href="text00020.html#ch09">Chapter 9</a>
 . But the <span class="code">Birthday</span>
 class and the input fields aren’t connected, so the user’s input isn’t stored as a <span class="code">Birthday</span>
 . It’s time to write code to make the interface add birthdays. To do that, you’ll create a new <span class="code">AddBirthdayViewController</span>
 class to manage the input fields in the Add a Birthday Scene in the storyboard. (Remember that a view is controlled by a view controller, which is what you’ll make next.)</p>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<div class="image"><img src="Image00224.jpg" />
</div>
<p class="figcap"><a id="ch10fig3"></a>
 <em>Figure 10-3: The</em>
 Birthday.swift <em>file</em>
</p>
<p class="indent">Notice that at the top of the file, Xcode has automatically written some copyright information in code comments. The name that comes after “Created by” is pulled from your Contact Card in your computer’s Contacts application. After the copyright year, you should see the Organization Name that you used in <a href="text00011.html#ch01">Chapter 1</a>
 when you created your first Xcode project. Every time you create a new file in Xcode, this commented header is automatically included.</p>
<p class="indent"><span id="page_144"></span>
 Now that you have your <em>Birthday.swift</em>
 file, you can create the <span class="code">Birthday</span>
 class to store your birthdays.</p>
<h4 class="h4" id="ch10lev2sec2">
<strong>WRITING THE BIRTHDAY CLASS</strong>
</h4>
<p class="noindent">Your <span class="code">Birthday</span>
 class will have three constant properties: <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . The properties <span class="code">firstName</span>
 and <span class="code">lastName</span>
 should be of type <span class="code">String</span>
 , but <span class="code">birthdate</span>
 will be a special class built into Swift called <span class="code">Date</span>
 , which is specifically made to handle dates and times. We’ll use the <span class="code">Date</span>
 class’s functionality to alert the user about birthdays. Enter the following into <em>Birthday.swift</em>
 under the <span class="code">import Foundation</span>
 statement.</p>
<div class="image"><img src="Image00225.jpg" />
</div>
<p class="noindent1">
<em>Birthday.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 Birthday {<br />
<br />
    <span class="pink">let</span>
 firstName: <span class="violet">String</span>
<br />
    <span class="pink">let</span>
 lastName: <span class="violet">String</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 birthdate: <span class="violet">Date</span>
<br />
<br />
  <span class="ent">➋</span>
 <span class="pink">init</span>
 (firstName: <span class="violet">String</span>
 , lastName: <span class="violet">String</span>
 , birthdate: <span class="violet">Date</span>
 ) {<br />
<br />
      <span class="ent">➌</span>
 <span class="pink">self</span>
 .<span class="green1">firstName</span>
 = firstName<br />
        <span class="pink">self</span>
 .<span class="green1">lastName</span>
 = lastName<br />
        <span class="pink">self</span>
 .<span class="green1">birthdate</span>
 = birthdate<br />
    }<br />
}</pre>
</div>
<p class="indent">You can see the new <span class="code">Date</span>
 data type at <span class="ent">➊</span>
 . A <span class="code">Date</span>
 is declared just like any other variable.</p>
<p class="indent">At <span class="ent">➋</span>
 , you add an initializer to the <span class="code">Birthday</span>
 class that takes a <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 as input parameters. Then, using the <span class="code">self</span>
 property, you set them to the class properties <span class="ent">➌</span>
 . This will let you pass names and dates to the <span class="code">Birthday</span>
 class to store a birthday.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<h3 class="h3" id="ch10lev1sec2">
<strong>PROGRAMMING USER INPUT</strong>
</h3>
<p class="noindent">At this point, you have a <span class="code">Birthday</span>
 class that can hold a friend’s name and birthdate, and you have input fields in the storyboard that you set up in <a href="text00020.html#ch09">Chapter 9</a>
 . But the <span class="code">Birthday</span>
 class and the input fields aren’t connected, so the user’s input isn’t stored as a <span class="code">Birthday</span>
 . It’s time to write code to make the interface add birthdays. To do that, you’ll create a new <span class="code">AddBirthdayViewController</span>
 class to manage the input fields in the Add a Birthday Scene in the storyboard. (Remember that a view is controlled by a view controller, which is what you’ll make next.)</p>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="figcap"><a id="ch10fig3"></a>
 <em>Figure 10-3: The</em>
 Birthday.swift <em>file</em>
</p>
<p class="indent">Notice that at the top of the file, Xcode has automatically written some copyright information in code comments. The name that comes after “Created by” is pulled from your Contact Card in your computer’s Contacts application. After the copyright year, you should see the Organization Name that you used in <a href="text00011.html#ch01">Chapter 1</a>
 when you created your first Xcode project. Every time you create a new file in Xcode, this commented header is automatically included.</p>
<p class="indent"><span id="page_144"></span>
 Now that you have your <em>Birthday.swift</em>
 file, you can create the <span class="code">Birthday</span>
 class to store your birthdays.</p>
<h4 class="h4" id="ch10lev2sec2">
<strong>WRITING THE BIRTHDAY CLASS</strong>
</h4>
<p class="noindent">Your <span class="code">Birthday</span>
 class will have three constant properties: <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . The properties <span class="code">firstName</span>
 and <span class="code">lastName</span>
 should be of type <span class="code">String</span>
 , but <span class="code">birthdate</span>
 will be a special class built into Swift called <span class="code">Date</span>
 , which is specifically made to handle dates and times. We’ll use the <span class="code">Date</span>
 class’s functionality to alert the user about birthdays. Enter the following into <em>Birthday.swift</em>
 under the <span class="code">import Foundation</span>
 statement.</p>
<div class="image"><img src="Image00225.jpg" />
</div>
<p class="noindent1">
<em>Birthday.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 Birthday {<br />
<br />
    <span class="pink">let</span>
 firstName: <span class="violet">String</span>
<br />
    <span class="pink">let</span>
 lastName: <span class="violet">String</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 birthdate: <span class="violet">Date</span>
<br />
<br />
  <span class="ent">➋</span>
 <span class="pink">init</span>
 (firstName: <span class="violet">String</span>
 , lastName: <span class="violet">String</span>
 , birthdate: <span class="violet">Date</span>
 ) {<br />
<br />
      <span class="ent">➌</span>
 <span class="pink">self</span>
 .<span class="green1">firstName</span>
 = firstName<br />
        <span class="pink">self</span>
 .<span class="green1">lastName</span>
 = lastName<br />
        <span class="pink">self</span>
 .<span class="green1">birthdate</span>
 = birthdate<br />
    }<br />
}</pre>
</div>
<p class="indent">You can see the new <span class="code">Date</span>
 data type at <span class="ent">➊</span>
 . A <span class="code">Date</span>
 is declared just like any other variable.</p>
<p class="indent">At <span class="ent">➋</span>
 , you add an initializer to the <span class="code">Birthday</span>
 class that takes a <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 as input parameters. Then, using the <span class="code">self</span>
 property, you set them to the class properties <span class="ent">➌</span>
 . This will let you pass names and dates to the <span class="code">Birthday</span>
 class to store a birthday.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<h3 class="h3" id="ch10lev1sec2">
<strong>PROGRAMMING USER INPUT</strong>
</h3>
<p class="noindent">At this point, you have a <span class="code">Birthday</span>
 class that can hold a friend’s name and birthdate, and you have input fields in the storyboard that you set up in <a href="text00020.html#ch09">Chapter 9</a>
 . But the <span class="code">Birthday</span>
 class and the input fields aren’t connected, so the user’s input isn’t stored as a <span class="code">Birthday</span>
 . It’s time to write code to make the interface add birthdays. To do that, you’ll create a new <span class="code">AddBirthdayViewController</span>
 class to manage the input fields in the Add a Birthday Scene in the storyboard. (Remember that a view is controlled by a view controller, which is what you’ll make next.)</p>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">Notice that at the top of the file, Xcode has automatically written some copyright information in code comments. The name that comes after “Created by” is pulled from your Contact Card in your computer’s Contacts application. After the copyright year, you should see the Organization Name that you used in <a href="text00011.html#ch01">Chapter 1</a>
 when you created your first Xcode project. Every time you create a new file in Xcode, this commented header is automatically included.</p>
<p class="indent"><span id="page_144"></span>
 Now that you have your <em>Birthday.swift</em>
 file, you can create the <span class="code">Birthday</span>
 class to store your birthdays.</p>
<h4 class="h4" id="ch10lev2sec2">
<strong>WRITING THE BIRTHDAY CLASS</strong>
</h4>
<p class="noindent">Your <span class="code">Birthday</span>
 class will have three constant properties: <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . The properties <span class="code">firstName</span>
 and <span class="code">lastName</span>
 should be of type <span class="code">String</span>
 , but <span class="code">birthdate</span>
 will be a special class built into Swift called <span class="code">Date</span>
 , which is specifically made to handle dates and times. We’ll use the <span class="code">Date</span>
 class’s functionality to alert the user about birthdays. Enter the following into <em>Birthday.swift</em>
 under the <span class="code">import Foundation</span>
 statement.</p>
<div class="image"><img src="Image00225.jpg" />
</div>
<p class="noindent1">
<em>Birthday.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 Birthday {<br />
<br />
    <span class="pink">let</span>
 firstName: <span class="violet">String</span>
<br />
    <span class="pink">let</span>
 lastName: <span class="violet">String</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 birthdate: <span class="violet">Date</span>
<br />
<br />
  <span class="ent">➋</span>
 <span class="pink">init</span>
 (firstName: <span class="violet">String</span>
 , lastName: <span class="violet">String</span>
 , birthdate: <span class="violet">Date</span>
 ) {<br />
<br />
      <span class="ent">➌</span>
 <span class="pink">self</span>
 .<span class="green1">firstName</span>
 = firstName<br />
        <span class="pink">self</span>
 .<span class="green1">lastName</span>
 = lastName<br />
        <span class="pink">self</span>
 .<span class="green1">birthdate</span>
 = birthdate<br />
    }<br />
}</pre>
</div>
<p class="indent">You can see the new <span class="code">Date</span>
 data type at <span class="ent">➊</span>
 . A <span class="code">Date</span>
 is declared just like any other variable.</p>
<p class="indent">At <span class="ent">➋</span>
 , you add an initializer to the <span class="code">Birthday</span>
 class that takes a <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 as input parameters. Then, using the <span class="code">self</span>
 property, you set them to the class properties <span class="ent">➌</span>
 . This will let you pass names and dates to the <span class="code">Birthday</span>
 class to store a birthday.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<h3 class="h3" id="ch10lev1sec2">
<strong>PROGRAMMING USER INPUT</strong>
</h3>
<p class="noindent">At this point, you have a <span class="code">Birthday</span>
 class that can hold a friend’s name and birthdate, and you have input fields in the storyboard that you set up in <a href="text00020.html#ch09">Chapter 9</a>
 . But the <span class="code">Birthday</span>
 class and the input fields aren’t connected, so the user’s input isn’t stored as a <span class="code">Birthday</span>
 . It’s time to write code to make the interface add birthdays. To do that, you’ll create a new <span class="code">AddBirthdayViewController</span>
 class to manage the input fields in the Add a Birthday Scene in the storyboard. (Remember that a view is controlled by a view controller, which is what you’ll make next.)</p>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent"><span id="page_144"></span>
 Now that you have your <em>Birthday.swift</em>
 file, you can create the <span class="code">Birthday</span>
 class to store your birthdays.</p>
<h4 class="h4" id="ch10lev2sec2">
<strong>WRITING THE BIRTHDAY CLASS</strong>
</h4>
<p class="noindent">Your <span class="code">Birthday</span>
 class will have three constant properties: <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . The properties <span class="code">firstName</span>
 and <span class="code">lastName</span>
 should be of type <span class="code">String</span>
 , but <span class="code">birthdate</span>
 will be a special class built into Swift called <span class="code">Date</span>
 , which is specifically made to handle dates and times. We’ll use the <span class="code">Date</span>
 class’s functionality to alert the user about birthdays. Enter the following into <em>Birthday.swift</em>
 under the <span class="code">import Foundation</span>
 statement.</p>
<div class="image"><img src="Image00225.jpg" />
</div>
<p class="noindent1">
<em>Birthday.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 Birthday {<br />
<br />
    <span class="pink">let</span>
 firstName: <span class="violet">String</span>
<br />
    <span class="pink">let</span>
 lastName: <span class="violet">String</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 birthdate: <span class="violet">Date</span>
<br />
<br />
  <span class="ent">➋</span>
 <span class="pink">init</span>
 (firstName: <span class="violet">String</span>
 , lastName: <span class="violet">String</span>
 , birthdate: <span class="violet">Date</span>
 ) {<br />
<br />
      <span class="ent">➌</span>
 <span class="pink">self</span>
 .<span class="green1">firstName</span>
 = firstName<br />
        <span class="pink">self</span>
 .<span class="green1">lastName</span>
 = lastName<br />
        <span class="pink">self</span>
 .<span class="green1">birthdate</span>
 = birthdate<br />
    }<br />
}</pre>
</div>
<p class="indent">You can see the new <span class="code">Date</span>
 data type at <span class="ent">➊</span>
 . A <span class="code">Date</span>
 is declared just like any other variable.</p>
<p class="indent">At <span class="ent">➋</span>
 , you add an initializer to the <span class="code">Birthday</span>
 class that takes a <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 as input parameters. Then, using the <span class="code">self</span>
 property, you set them to the class properties <span class="ent">➌</span>
 . This will let you pass names and dates to the <span class="code">Birthday</span>
 class to store a birthday.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<h3 class="h3" id="ch10lev1sec2">
<strong>PROGRAMMING USER INPUT</strong>
</h3>
<p class="noindent">At this point, you have a <span class="code">Birthday</span>
 class that can hold a friend’s name and birthdate, and you have input fields in the storyboard that you set up in <a href="text00020.html#ch09">Chapter 9</a>
 . But the <span class="code">Birthday</span>
 class and the input fields aren’t connected, so the user’s input isn’t stored as a <span class="code">Birthday</span>
 . It’s time to write code to make the interface add birthdays. To do that, you’ll create a new <span class="code">AddBirthdayViewController</span>
 class to manage the input fields in the Add a Birthday Scene in the storyboard. (Remember that a view is controlled by a view controller, which is what you’ll make next.)</p>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<h4 class="h4" id="ch10lev2sec2">
<strong>WRITING THE BIRTHDAY CLASS</strong>
</h4>
<p class="noindent">Your <span class="code">Birthday</span>
 class will have three constant properties: <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . The properties <span class="code">firstName</span>
 and <span class="code">lastName</span>
 should be of type <span class="code">String</span>
 , but <span class="code">birthdate</span>
 will be a special class built into Swift called <span class="code">Date</span>
 , which is specifically made to handle dates and times. We’ll use the <span class="code">Date</span>
 class’s functionality to alert the user about birthdays. Enter the following into <em>Birthday.swift</em>
 under the <span class="code">import Foundation</span>
 statement.</p>
<div class="image"><img src="Image00225.jpg" />
</div>
<p class="noindent1">
<em>Birthday.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 Birthday {<br />
<br />
    <span class="pink">let</span>
 firstName: <span class="violet">String</span>
<br />
    <span class="pink">let</span>
 lastName: <span class="violet">String</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 birthdate: <span class="violet">Date</span>
<br />
<br />
  <span class="ent">➋</span>
 <span class="pink">init</span>
 (firstName: <span class="violet">String</span>
 , lastName: <span class="violet">String</span>
 , birthdate: <span class="violet">Date</span>
 ) {<br />
<br />
      <span class="ent">➌</span>
 <span class="pink">self</span>
 .<span class="green1">firstName</span>
 = firstName<br />
        <span class="pink">self</span>
 .<span class="green1">lastName</span>
 = lastName<br />
        <span class="pink">self</span>
 .<span class="green1">birthdate</span>
 = birthdate<br />
    }<br />
}</pre>
</div>
<p class="indent">You can see the new <span class="code">Date</span>
 data type at <span class="ent">➊</span>
 . A <span class="code">Date</span>
 is declared just like any other variable.</p>
<p class="indent">At <span class="ent">➋</span>
 , you add an initializer to the <span class="code">Birthday</span>
 class that takes a <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 as input parameters. Then, using the <span class="code">self</span>
 property, you set them to the class properties <span class="ent">➌</span>
 . This will let you pass names and dates to the <span class="code">Birthday</span>
 class to store a birthday.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<h3 class="h3" id="ch10lev1sec2">
<strong>PROGRAMMING USER INPUT</strong>
</h3>
<p class="noindent">At this point, you have a <span class="code">Birthday</span>
 class that can hold a friend’s name and birthdate, and you have input fields in the storyboard that you set up in <a href="text00020.html#ch09">Chapter 9</a>
 . But the <span class="code">Birthday</span>
 class and the input fields aren’t connected, so the user’s input isn’t stored as a <span class="code">Birthday</span>
 . It’s time to write code to make the interface add birthdays. To do that, you’ll create a new <span class="code">AddBirthdayViewController</span>
 class to manage the input fields in the Add a Birthday Scene in the storyboard. (Remember that a view is controlled by a view controller, which is what you’ll make next.)</p>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="noindent">Your <span class="code">Birthday</span>
 class will have three constant properties: <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . The properties <span class="code">firstName</span>
 and <span class="code">lastName</span>
 should be of type <span class="code">String</span>
 , but <span class="code">birthdate</span>
 will be a special class built into Swift called <span class="code">Date</span>
 , which is specifically made to handle dates and times. We’ll use the <span class="code">Date</span>
 class’s functionality to alert the user about birthdays. Enter the following into <em>Birthday.swift</em>
 under the <span class="code">import Foundation</span>
 statement.</p>
<div class="image"><img src="Image00225.jpg" />
</div>
<p class="noindent1">
<em>Birthday.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 Birthday {<br />
<br />
    <span class="pink">let</span>
 firstName: <span class="violet">String</span>
<br />
    <span class="pink">let</span>
 lastName: <span class="violet">String</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 birthdate: <span class="violet">Date</span>
<br />
<br />
  <span class="ent">➋</span>
 <span class="pink">init</span>
 (firstName: <span class="violet">String</span>
 , lastName: <span class="violet">String</span>
 , birthdate: <span class="violet">Date</span>
 ) {<br />
<br />
      <span class="ent">➌</span>
 <span class="pink">self</span>
 .<span class="green1">firstName</span>
 = firstName<br />
        <span class="pink">self</span>
 .<span class="green1">lastName</span>
 = lastName<br />
        <span class="pink">self</span>
 .<span class="green1">birthdate</span>
 = birthdate<br />
    }<br />
}</pre>
</div>
<p class="indent">You can see the new <span class="code">Date</span>
 data type at <span class="ent">➊</span>
 . A <span class="code">Date</span>
 is declared just like any other variable.</p>
<p class="indent">At <span class="ent">➋</span>
 , you add an initializer to the <span class="code">Birthday</span>
 class that takes a <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 as input parameters. Then, using the <span class="code">self</span>
 property, you set them to the class properties <span class="ent">➌</span>
 . This will let you pass names and dates to the <span class="code">Birthday</span>
 class to store a birthday.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<h3 class="h3" id="ch10lev1sec2">
<strong>PROGRAMMING USER INPUT</strong>
</h3>
<p class="noindent">At this point, you have a <span class="code">Birthday</span>
 class that can hold a friend’s name and birthdate, and you have input fields in the storyboard that you set up in <a href="text00020.html#ch09">Chapter 9</a>
 . But the <span class="code">Birthday</span>
 class and the input fields aren’t connected, so the user’s input isn’t stored as a <span class="code">Birthday</span>
 . It’s time to write code to make the interface add birthdays. To do that, you’ll create a new <span class="code">AddBirthdayViewController</span>
 class to manage the input fields in the Add a Birthday Scene in the storyboard. (Remember that a view is controlled by a view controller, which is what you’ll make next.)</p>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<div class="image"><img src="Image00225.jpg" />
</div>
<p class="noindent1">
<em>Birthday.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 Birthday {<br />
<br />
    <span class="pink">let</span>
 firstName: <span class="violet">String</span>
<br />
    <span class="pink">let</span>
 lastName: <span class="violet">String</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 birthdate: <span class="violet">Date</span>
<br />
<br />
  <span class="ent">➋</span>
 <span class="pink">init</span>
 (firstName: <span class="violet">String</span>
 , lastName: <span class="violet">String</span>
 , birthdate: <span class="violet">Date</span>
 ) {<br />
<br />
      <span class="ent">➌</span>
 <span class="pink">self</span>
 .<span class="green1">firstName</span>
 = firstName<br />
        <span class="pink">self</span>
 .<span class="green1">lastName</span>
 = lastName<br />
        <span class="pink">self</span>
 .<span class="green1">birthdate</span>
 = birthdate<br />
    }<br />
}</pre>
</div>
<p class="indent">You can see the new <span class="code">Date</span>
 data type at <span class="ent">➊</span>
 . A <span class="code">Date</span>
 is declared just like any other variable.</p>
<p class="indent">At <span class="ent">➋</span>
 , you add an initializer to the <span class="code">Birthday</span>
 class that takes a <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 as input parameters. Then, using the <span class="code">self</span>
 property, you set them to the class properties <span class="ent">➌</span>
 . This will let you pass names and dates to the <span class="code">Birthday</span>
 class to store a birthday.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<h3 class="h3" id="ch10lev1sec2">
<strong>PROGRAMMING USER INPUT</strong>
</h3>
<p class="noindent">At this point, you have a <span class="code">Birthday</span>
 class that can hold a friend’s name and birthdate, and you have input fields in the storyboard that you set up in <a href="text00020.html#ch09">Chapter 9</a>
 . But the <span class="code">Birthday</span>
 class and the input fields aren’t connected, so the user’s input isn’t stored as a <span class="code">Birthday</span>
 . It’s time to write code to make the interface add birthdays. To do that, you’ll create a new <span class="code">AddBirthdayViewController</span>
 class to manage the input fields in the Add a Birthday Scene in the storyboard. (Remember that a view is controlled by a view controller, which is what you’ll make next.)</p>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="noindent1">
<em>Birthday.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 Birthday {<br />
<br />
    <span class="pink">let</span>
 firstName: <span class="violet">String</span>
<br />
    <span class="pink">let</span>
 lastName: <span class="violet">String</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 birthdate: <span class="violet">Date</span>
<br />
<br />
  <span class="ent">➋</span>
 <span class="pink">init</span>
 (firstName: <span class="violet">String</span>
 , lastName: <span class="violet">String</span>
 , birthdate: <span class="violet">Date</span>
 ) {<br />
<br />
      <span class="ent">➌</span>
 <span class="pink">self</span>
 .<span class="green1">firstName</span>
 = firstName<br />
        <span class="pink">self</span>
 .<span class="green1">lastName</span>
 = lastName<br />
        <span class="pink">self</span>
 .<span class="green1">birthdate</span>
 = birthdate<br />
    }<br />
}</pre>
</div>
<p class="indent">You can see the new <span class="code">Date</span>
 data type at <span class="ent">➊</span>
 . A <span class="code">Date</span>
 is declared just like any other variable.</p>
<p class="indent">At <span class="ent">➋</span>
 , you add an initializer to the <span class="code">Birthday</span>
 class that takes a <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 as input parameters. Then, using the <span class="code">self</span>
 property, you set them to the class properties <span class="ent">➌</span>
 . This will let you pass names and dates to the <span class="code">Birthday</span>
 class to store a birthday.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<h3 class="h3" id="ch10lev1sec2">
<strong>PROGRAMMING USER INPUT</strong>
</h3>
<p class="noindent">At this point, you have a <span class="code">Birthday</span>
 class that can hold a friend’s name and birthdate, and you have input fields in the storyboard that you set up in <a href="text00020.html#ch09">Chapter 9</a>
 . But the <span class="code">Birthday</span>
 class and the input fields aren’t connected, so the user’s input isn’t stored as a <span class="code">Birthday</span>
 . It’s time to write code to make the interface add birthdays. To do that, you’ll create a new <span class="code">AddBirthdayViewController</span>
 class to manage the input fields in the Add a Birthday Scene in the storyboard. (Remember that a view is controlled by a view controller, which is what you’ll make next.)</p>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<div class="box">
<pre>
<span class="pink">class</span>
 Birthday {<br />
<br />
    <span class="pink">let</span>
 firstName: <span class="violet">String</span>
<br />
    <span class="pink">let</span>
 lastName: <span class="violet">String</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 birthdate: <span class="violet">Date</span>
<br />
<br />
  <span class="ent">➋</span>
 <span class="pink">init</span>
 (firstName: <span class="violet">String</span>
 , lastName: <span class="violet">String</span>
 , birthdate: <span class="violet">Date</span>
 ) {<br />
<br />
      <span class="ent">➌</span>
 <span class="pink">self</span>
 .<span class="green1">firstName</span>
 = firstName<br />
        <span class="pink">self</span>
 .<span class="green1">lastName</span>
 = lastName<br />
        <span class="pink">self</span>
 .<span class="green1">birthdate</span>
 = birthdate<br />
    }<br />
}</pre>
</div>
<p class="indent">You can see the new <span class="code">Date</span>
 data type at <span class="ent">➊</span>
 . A <span class="code">Date</span>
 is declared just like any other variable.</p>
<p class="indent">At <span class="ent">➋</span>
 , you add an initializer to the <span class="code">Birthday</span>
 class that takes a <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 as input parameters. Then, using the <span class="code">self</span>
 property, you set them to the class properties <span class="ent">➌</span>
 . This will let you pass names and dates to the <span class="code">Birthday</span>
 class to store a birthday.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<h3 class="h3" id="ch10lev1sec2">
<strong>PROGRAMMING USER INPUT</strong>
</h3>
<p class="noindent">At this point, you have a <span class="code">Birthday</span>
 class that can hold a friend’s name and birthdate, and you have input fields in the storyboard that you set up in <a href="text00020.html#ch09">Chapter 9</a>
 . But the <span class="code">Birthday</span>
 class and the input fields aren’t connected, so the user’s input isn’t stored as a <span class="code">Birthday</span>
 . It’s time to write code to make the interface add birthdays. To do that, you’ll create a new <span class="code">AddBirthdayViewController</span>
 class to manage the input fields in the Add a Birthday Scene in the storyboard. (Remember that a view is controlled by a view controller, which is what you’ll make next.)</p>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">You can see the new <span class="code">Date</span>
 data type at <span class="ent">➊</span>
 . A <span class="code">Date</span>
 is declared just like any other variable.</p>
<p class="indent">At <span class="ent">➋</span>
 , you add an initializer to the <span class="code">Birthday</span>
 class that takes a <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 as input parameters. Then, using the <span class="code">self</span>
 property, you set them to the class properties <span class="ent">➌</span>
 . This will let you pass names and dates to the <span class="code">Birthday</span>
 class to store a birthday.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<h3 class="h3" id="ch10lev1sec2">
<strong>PROGRAMMING USER INPUT</strong>
</h3>
<p class="noindent">At this point, you have a <span class="code">Birthday</span>
 class that can hold a friend’s name and birthdate, and you have input fields in the storyboard that you set up in <a href="text00020.html#ch09">Chapter 9</a>
 . But the <span class="code">Birthday</span>
 class and the input fields aren’t connected, so the user’s input isn’t stored as a <span class="code">Birthday</span>
 . It’s time to write code to make the interface add birthdays. To do that, you’ll create a new <span class="code">AddBirthdayViewController</span>
 class to manage the input fields in the Add a Birthday Scene in the storyboard. (Remember that a view is controlled by a view controller, which is what you’ll make next.)</p>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">At <span class="ent">➋</span>
 , you add an initializer to the <span class="code">Birthday</span>
 class that takes a <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 as input parameters. Then, using the <span class="code">self</span>
 property, you set them to the class properties <span class="ent">➌</span>
 . This will let you pass names and dates to the <span class="code">Birthday</span>
 class to store a birthday.</p>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<h3 class="h3" id="ch10lev1sec2">
<strong>PROGRAMMING USER INPUT</strong>
</h3>
<p class="noindent">At this point, you have a <span class="code">Birthday</span>
 class that can hold a friend’s name and birthdate, and you have input fields in the storyboard that you set up in <a href="text00020.html#ch09">Chapter 9</a>
 . But the <span class="code">Birthday</span>
 class and the input fields aren’t connected, so the user’s input isn’t stored as a <span class="code">Birthday</span>
 . It’s time to write code to make the interface add birthdays. To do that, you’ll create a new <span class="code">AddBirthdayViewController</span>
 class to manage the input fields in the Add a Birthday Scene in the storyboard. (Remember that a view is controlled by a view controller, which is what you’ll make next.)</p>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<div class="note">
<p class="notet">
<strong>
<span class="bgblue">NOTE</span>
</strong>
</p>
<p class="notep">
<em>We’ll be building each code file for the projects step-by-step. The final versions are available from</em>
 <a href="https://www.nostarch.com/iphoneappsforkids/">https://www.nostarch.com/iphoneappsforkids/</a>
 <em>.</em>
</p>
</div>
<h3 class="h3" id="ch10lev1sec2">
<strong>PROGRAMMING USER INPUT</strong>
</h3>
<p class="noindent">At this point, you have a <span class="code">Birthday</span>
 class that can hold a friend’s name and birthdate, and you have input fields in the storyboard that you set up in <a href="text00020.html#ch09">Chapter 9</a>
 . But the <span class="code">Birthday</span>
 class and the input fields aren’t connected, so the user’s input isn’t stored as a <span class="code">Birthday</span>
 . It’s time to write code to make the interface add birthdays. To do that, you’ll create a new <span class="code">AddBirthdayViewController</span>
 class to manage the input fields in the Add a Birthday Scene in the storyboard. (Remember that a view is controlled by a view controller, which is what you’ll make next.)</p>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<h3 class="h3" id="ch10lev1sec2">
<strong>PROGRAMMING USER INPUT</strong>
</h3>
<p class="noindent">At this point, you have a <span class="code">Birthday</span>
 class that can hold a friend’s name and birthdate, and you have input fields in the storyboard that you set up in <a href="text00020.html#ch09">Chapter 9</a>
 . But the <span class="code">Birthday</span>
 class and the input fields aren’t connected, so the user’s input isn’t stored as a <span class="code">Birthday</span>
 . It’s time to write code to make the interface add birthdays. To do that, you’ll create a new <span class="code">AddBirthdayViewController</span>
 class to manage the input fields in the Add a Birthday Scene in the storyboard. (Remember that a view is controlled by a view controller, which is what you’ll make next.)</p>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="noindent">At this point, you have a <span class="code">Birthday</span>
 class that can hold a friend’s name and birthdate, and you have input fields in the storyboard that you set up in <a href="text00020.html#ch09">Chapter 9</a>
 . But the <span class="code">Birthday</span>
 class and the input fields aren’t connected, so the user’s input isn’t stored as a <span class="code">Birthday</span>
 . It’s time to write code to make the interface add birthdays. To do that, you’ll create a new <span class="code">AddBirthdayViewController</span>
 class to manage the input fields in the Add a Birthday Scene in the storyboard. (Remember that a view is controlled by a view controller, which is what you’ll make next.)</p>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<h4 class="h4" id="ch10lev2sec3"><span id="page_145"></span>
 <strong>CREATING THE ADD BIRTHDAY VIEW CONTROLLER</strong>
</h4>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="noindent">When you make an app and start with a Single View Application template, Xcode automatically creates a file called <em>ViewController.swift</em>
 , which contains a <span class="code">ViewController</span>
 class that represents and controls a view with code. The view controller in the storyboard is managed with this <span class="code">ViewController</span>
 class, which we’ll rename <span class="code">AddBirthdayViewController</span>
 so that the class’s name describes what it will be doing.</p>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">To change the name of the file <em>ViewController.swift</em>
 , select it and click inside its name in the Project navigator so that it’s highlighted (see <a href="text00021.html#ch10fig4">Figure 10-4</a>
 ). Then type the new filename, <em>AddBirthdayViewController</em>
 .</p>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">Next, you need to change the name of the <span class="code">ViewController</span>
 class to <span class="code">AddBirthdayViewController</span>
 . You do this inside the file by changing the line:</p>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<div class="image"><img src="Image00226.jpg" />
</div>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="figcap"><a id="ch10fig4"></a>
 <em>Figure 10-4: Changing the filename of</em>
 ViewController.swift</p>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<div class="box">
<pre>
<span class="pink">class</span>
 ViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="noindent">to the line:</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
</pre>
</div>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">You won’t need the built-in method <span class="code">didReceiveMemoryWarning()</span>
 , so you can clean up your code by deleting that method. Now your class should look like this:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<div class="box">
<pre>
<span class="pink">class</span>
 AddBirthdayViewController: <span class="violet">UIViewController</span>
 {<br />
<br />
    <span class="pink">override</span>
 <span class="pink">func</span>
 viewDidLoad() {<br />
        <span class="pink">super</span>
 .<span class="blue">viewDidLoad</span>
 ()<br />
        <span class="green">// Do any additional setup after loading the view,</span>
<br />
        <span class="green">// typically from a nib</span>
<br />
    }<br />
}</pre>
</div>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">
<span class="code">UIViewController</span>
 is a class that comes with built-in methods for managing views that appear onscreen when you run your app. <span class="code">AddBirthdayViewController</span>
 is a <em>subclass</em>
 of <span class="code">UIViewController</span>
 , which lets us control the view controller in the storyboard by implementing our own versions of some of <span class="code">UIViewController</span>
 ’s built-in methods.</p>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">The <span class="code">UIViewController</span>
 class has four useful built-in callback methods that will be called when the view controller is created and appears on or disappears from the screen. These callback methods are:</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidLoad()</span>
</span>
 This method is called as soon as the view controller has been created but before its view appears on the screen. This is a great place to do any initial setup of the view that you want to do only once.</p>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="hang"><span id="page_146"></span>
 <span class="code">
<span class="codestrong">viewWillAppear(_:)</span>
</span>
 This method is called after <span class="code">viewDidLoad()</span>
 and before each time the view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="hang">
<span class="code">
<span class="codestrong">viewDidAppear(_:)</span>
</span>
 This method is similar to <span class="code">viewWillAppear(_:)</span>
 except it is called after a view controller’s view appears on the screen.</p>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="hang">
<span class="code">
<span class="codestrong">viewWillDisappear(_:)</span>
</span>
 This method is called when the view controller’s view is about to leave the screen.</p>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indentt">You can override any of these methods in your subclass <span class="code">UIViewController</span>
 . The first of these, <span class="code">viewDidLoad()</span>
 , is very useful. Swift expects anyone who subclasses <span class="code">UIViewController</span>
 to use this method, so it automatically adds a placeholder to the template for <span class="code">viewDidLoad()</span>
 when you subclass <span class="code">UIViewController</span>
 .</p>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">Swift doesn’t give you placeholder code for the other three methods. If you decide to use one, you can start typing it and autocomplete will fill in the details.</p>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">It’s important to note that although <span class="code">viewDidLoad()</span>
 is called only one time—when the view controller is first created—<span class="code">viewWillAppear(_:)</span>
 is called every time the view controller’s view is about to appear onscreen. So, if another screen is put on top of a view controller’s screen and then removed so that the view controller’s screen reappears, <span class="code">viewWillAppear(_:)</span>
 will be called again but <span class="code">viewDidLoad()</span>
 will not, because the view controller was already sitting there loaded behind another screen. If you want the view to be refreshed with new information every time it appears, you can override <span class="code">viewWillAppear(_:)</span>
 .</p>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">In <a href="text00023.html#ch12">Chapter 12</a>
 , we’ll be using the <span class="code">viewWillAppear(_:)</span>
 method to refresh our birthday list. Also, in “<a href="text00021.html#ch10lev2sec6">Setting a Maximum Birthdate</a>
 ” on <a href="text00021.html#page_149">page 149</a>
 , we’ll override <span class="code">viewDidLoad()</span>
 in <span class="code">AddBirthdayViewController</span>
 . For right now, however, we can leave these methods alone and connect our code to the inputs we set up in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<h4 class="h4" id="ch10lev2sec4">
<strong>CONNECTING CODE TO THE INPUT CONTROLS</strong>
</h4>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="noindent">In the storyboard, our Add a Birthday view controller has a First Name text field, a Last Name text field, and a Birthdate date picker. To use these input controls, we need to refer to them in the code, which we do by assigning variables to the input controls that are connected to the screen elements with IBOutlets. Add the following three properties to the top of the <span class="code">AddBirthdayViewController</span>
 class before the <span class="code">viewDidLoad()</span>
 method (the gray lines indicate some of the existing code, for placement):</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<div class="box">
<pre>
<span class="ash">class AddBirthdayViewController: UIViewController {</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">@IBOutlet var</span>
 firstNameTextField: <span class="ent">➋</span>
 <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 lastNameTextField: <span class="violet">UITextField!</span>
<br />
    <span class="pink">@IBOutlet var</span>
 birthdatePicker: <span class="violet">UIDatePicker!</span>
<br />
<br />
    <span class="ash">override func viewDidLoad() {</span>
</pre>
</div>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent"><span id="page_147"></span>
 <span class="code">@IBOutlet</span>
 <span class="ent">➊</span>
 is a special keyword that is put in front of properties that can be hooked up in the storyboard. IB stands for <em>interface builder</em>
 , which is the part of Xcode where we work on our storyboard. When you put the keyword <span class="code">@IBOutlet</span>
 in front of a property, a little circle appears in the margin next to it, as shown in <a href="text00021.html#ch10fig5">Figure 10-5</a>
 . This indicates that you can connect the property to an element in the storyboard. When the circle isn’t filled in, it means the property hasn’t been connected yet.</p>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<div class="image"><img src="Image00227.jpg" />
</div>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="figcap"><a id="ch10fig5"></a>
 <em>Figure 10-5:</em>
 <span class="code">
<span class="italic">AddBirthdayViewController</span>
</span>
 <em>with IBOutlet properties for the input controls</em>
</p>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">The data type of the <span class="code">firstNameTextField</span>
 property, <span class="code">UITextField!</span>
 <span class="ent">➋</span>
 , is an implicitly unwrapped optional because when the view controller is first created, IBOutlets have <span class="code">nil</span>
 values. As soon as the view is loaded, however, IBOutlets are given the value of what they are connected to in the storyboard.</p>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<h4 class="h4" id="ch10lev2sec5">
<strong>CONNECTING YOUR CODE TO THE STORYBOARD</strong>
</h4>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="noindent">Now that you’ve created <span class="code">AddBirthdayViewController</span>
 and the properties for the input controls, it’s time to hook up the First Name and Last Name text fields and the Birthdate date picker.</p>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">First, change the class of the Add a Birthday view controller in the storyboard to <span class="code">AddBirthdayViewController</span>
 so you can use that class to manage the view controller. Select <em>Main.Storyboard</em>
 in the Project navigator. Next, select <strong>Add a Birthday Scene</strong>
 in the left outline view and open the Identity Inspector in the right pane. You should see a Custom Class section at the top. Change the class to <span class="code">
<span class="codestrong">AddBirthdayViewController</span>
</span>
 , as shown in <a href="text00021.html#ch10fig6">Figure 10-6</a>
 .</p>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<div class="image"><span id="page_148"></span>
 <img src="Image00228.jpg" />
</div>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="figcap"><a id="ch10fig6"></a>
 <em>Figure 10-6: Change the class of the view controller to</em>
 <span class="code">
<span class="italic">
<span class="codestrong">AddBirthdayViewController</span>
</span>
</span>
 <em>.</em>
</p>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">Now connect the <span class="code">AddBirthdayViewController</span>
 ’s IBOutlet properties to the text fields and date picker in Add a Birthday Scene. Click the triangle next to Add a Birthday Scene in the left outline view to expand the menu of items in that scene. Then, <span class="smallcaps">CONTROL</span>
 -click <strong>Add a Birthday</strong>
 next to the yellow view controller icon to open a connection dialog.</p>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">In the connection dialog, under Outlets, you can see the <span class="code">birthdatePicker</span>
 , <span class="code">firstNameTextField</span>
 , and <span class="code">lastNameTextField</span>
 . Connect the <span class="code">birthdatePicker</span>
 by clicking the empty circle next to it and dragging to the date picker in the storyboard. When the date picker object is highlighted in blue, you can let go (see <a href="text00021.html#ch10fig7">Figure 10-7</a>
 ).</p>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<div class="image"><img src="Image00229.jpg" />
</div>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="figcap"><a id="ch10fig7"></a>
 <em>Figure 10-7: Connecting the date picker to the</em>
 <span class="code">
<span class="italic">birthdatePicker outlet</span>
</span>
</p>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent"><span id="page_149"></span>
 You’ll know that the connection was successful if you see Birthdate Picker listed next to <span class="code">birthdatePicker</span>
 in the connection box with the connection circle filled (see <a href="text00021.html#ch10fig8">Figure 10-8</a>
 ). You can only connect the <span class="code">birthdatePicker</span>
 outlet to a date picker. If you try to connect it to a label or another type of view, nothing will happen. Xcode knows that the <span class="code">birthdatePicker</span>
 has to be connected to a <span class="code">UIDatePicker</span>
 class because that’s the data type we gave it in <span class="code">AddBirthdayViewController</span>
 when we created the property.</p>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<div class="image"><img src="Image00230.jpg" />
</div>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="figcap"><a id="ch10fig8"></a>
 <em>Figure 10-8: The</em>
 <span class="code">
<span class="italic">birthdatePicker</span>
</span>
 <em>outlet has been successfully connected.</em>
</p>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">Next, connect the <span class="code">firstNameTextField</span>
 by clicking and dragging from its circle to the text field underneath the First Name label. Finally, connect the <span class="code">lastNameTextField</span>
 to the text field underneath the Last Name label.</p>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">You’re done with the storyboard for the time being. Let’s go back to <em>AddBirthdayViewController.swift</em>
 to set a maximum birthdate in code.</p>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<h4 class="h4" id="ch10lev2sec6">
<strong>SETTING A MAXIMUM BIRTHDATE</strong>
</h4>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="noindent">It wouldn’t make sense for a person to have a birthdate in the future, so let’s write some code to prevent <span class="code">birthdatePicker</span>
 from selecting future dates. We can do this kind of setup by modifying the <span class="code">viewDidLoad()</span>
 method in the <span class="code">AddBirthdayViewController</span>
 . We talked about the <span class="code">viewDidLoad()</span>
 method in “<a href="text00021.html#ch10lev2sec3">Creating the Add Birthday View Controller</a>
 ” on <a href="text00021.html#page_145">page 145</a>
 . It’s automatically added to our view controllers, so find this method in the <span class="code">AddBirthdayViewController</span>
 and add the following line of code to it:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<div class="box">
<pre>
<span class="ash">override func viewDidLoad() {</span>
<br />
    <span class="ash">super.viewDidLoad()</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="green1">birthdatePicker</span>
 .<span class="violet">maximumDate</span>
 = <span class="violet">Date</span>
 ()<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">
<span class="code">viewDidLoad()</span>
 is already a method of the <span class="code">UIViewController</span>
 class, so we need to override it using the <span class="code">override</span>
 keyword, like so: <span class="code">override func viewDidLoad()</span>
 . Note that it’s important to leave the line <span class="code">super.viewDidLoad()</span>
 in the method. When you create a subclass, like <span class="code">AddBirthdayViewController</span>
 , and override a method from the original superclass, you want to make sure that you also call the method on the superclass. Apple could have some special code that runs in the <span class="code">UIViewController</span>
 <span class="code">viewDidLoad()</span>
 that we don’t know about, so not calling this superclass method could lead to unexpected errors.</p>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent"><span id="page_150"></span>
 To set the <span class="code">maximumDate</span>
 of the <span class="code">birthdatePicker</span>
 , all you have to do is enter <span class="code">birthdatePicker.maximumDate = Date()</span>
 at <span class="ent">➊</span>
 . The <span class="code">Date()</span>
 method creates a new date that is the current date and time. Try running the app now. It should be impossible to select any date in the future!</p>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">Next, you’ll write some code so that you can save a <span class="code">Birthday</span>
 and cancel adding a <span class="code">Birthday</span>
 from this view controller using the buttons you made in <a href="text00020.html#ch09">Chapter 9</a>
 .</p>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<h3 class="h3" id="ch10lev1sec3">
<strong>SAVING A BIRTHDAY</strong>
</h3>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="noindent">Now to implement the Save button! When the user taps Save, the app should create a <span class="code">Birthday</span>
 from the information that was entered and then save the user input.</p>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<h4 class="h4" id="ch10lev2sec7">
<strong>HOOKING UP THE SAVE BUTTON</strong>
</h4>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="noindent">Let’s start by making a <span class="code">saveTapped(_:)</span>
 method that is called every time the user taps the Save button. Add the following code to <span class="code">AddBirthdayViewController</span>
 right after the <span class="code">viewDidLoad()</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<div class="box">
<pre>  <span class="ash">override func viewDidLoad() {</span>
<br />
      <span class="ash">--<em>snip</em>
 --<br />
  }</span>
<br />
<br />
<span class="ent">➊</span>
 <span class="pink">@IBAction func</span>
 saveTapped(<span class="ent">➋</span>
 <span class="pink">_</span>
 sender: <span class="ent">➌</span>
 <span class="violet">UIBarButtonItem</span>
 ) {<br />
    <span class="ent">➍</span>
 <span class="blue">print</span>
 (<span class="red">"The save button was tapped."</span>
 )<br />
  }</pre>
</div>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">
<span class="code">@IBAction</span>
 at <span class="ent">➊</span>
 is a keyword that connects a function directly to an element in a view controller and allows us to specify code that should run when the user takes an action on that element. In this case, we’re going to add a function that will run when the user taps Save. When you write an IBAction method, you should always include a parameter for the UI element that triggered the method. Typically, an underscore is used to hide the argument label and the parameter name is <span class="code">sender</span>
 <span class="ent">➋</span>
 , but you can call this parameter whatever you want. In this case, we want the <span class="code">saveTapped(_:)</span>
 method to be called whenever the user taps Save, which is a <span class="code">UIBarButtonItem</span>
 . So we specify that the type of <span class="code">sender</span>
 is <span class="code">UIBarButtonItem</span>
 <span class="ent">➌</span>
 . The <span class="code">print(_:)</span>
 method at <span class="ent">➍</span>
 helps us see when the Save button has been tapped as we’re testing the code.</p>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">Hooking up <span class="code">saveTapped(_:)</span>
 to the Save button is like hooking up an IBOutlet to a storyboard element. Go back to your <em>Main.storyboard</em>
 file. <span class="smallcaps">CONTROL</span>
 -click the Add a Birthday line to open a connection dialog. At the bottom of the connection dialog is a section called Received Actions, as shown in <a href="text00021.html#ch10fig9">Figure 10-9</a>
 . In that section, click and drag from the circle next to <span class="code">saveTapped:</span>
 to the Save button in the Add a Birthday view controller to connect them.</p>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<div class="image"><img src="Image00231.jpg" />
</div>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<div class="image"><span id="page_151"></span>
 <img src="Image00232.jpg" />
</div>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="figcap"><a id="ch10fig9"></a>
 <em>Figure 10-9: IBActions are listed at the bottom of the connection dialog under Received Actions.</em>
</p>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">Try running your app again. When you tap the Save button, the message <span class="code">"The save button was tapped."</span>
 should be displayed in your debug console.</p>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<h4 class="h4" id="ch10lev2sec8">
<strong>READING TEXT FROM A TEXT FIELD</strong>
</h4>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="noindent">Let’s add code to the <span class="code">saveTapped(_:)</span>
 method that will get the first and last names out of <span class="code">firstNameTextField</span>
 and <span class="code">lastNameTextField</span>
 after the user enters them.</p>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">The <span class="code">UITextField</span>
 class has an optional <span class="code">String</span>
 property called <span class="code">text</span>
 . This <span class="code">text</span>
 property has a value of whatever has been typed into the text field, so you can use it to get the user’s input in <span class="code">saveTapped(_:)</span>
 with the following code:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">print("The save button was tapped.")</span>
<br />
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 firstName = <span class="green1">firstNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
  <span class="ent">➋</span>
 <span class="pink">let</span>
 lastName = <span class="green1">lastNameTextField</span>
 .<span class="violet">text</span>
 ?? <span class="red">""</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My name is</span>
 \<span class="red">(</span>
 firstName<span class="red">)</span>
 \<span class="red">(</span>
 lastName<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">At <span class="ent">➊</span>
 , you create a constant <span class="code">firstName</span>
 and set its value to <span class="code">firstNameTextField.text</span>
 if it exists (that is, if the user entered a value) or to the empty string <span class="code">""</span>
 . You can do this using the nil coalescing operator (<span class="code">??</span>
 ) that you learned about in <a href="text00015.html#ch05">Chapter 5</a>
 . We’re using constants and not variables here because we won’t change the value of the first and last names the user enters.</p>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent"><span id="page_152"></span>
 Then do the same thing with <span class="code">lastName</span>
 at <span class="ent">➋</span>
 . After you retrieve values for <span class="code">firstName</span>
 and <span class="code">lastName</span>
 , print them to the console so you can see them when you run your app.</p>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">Run your app to see what happens. Try tapping the Save button without entering anything in the text fields and then try again after entering a first and last name. You should see output similar to this:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<div class="box">
<pre>The save button was tapped.<br />
My name is .<br />
The save button was tapped.<br />
My name is Dagmar Hedlund.</pre>
</div>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">Cool! Now you can put a name into your app and see the computer output it in your debug console. Let’s focus on getting a date output next.</p>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<h4 class="h4" id="ch10lev2sec9">
<strong>GETTING A DATE FROM A DATE PICKER</strong>
</h4>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="noindent">Getting a date from the <span class="code">birthdatePicker</span>
 is just as easy as getting the text out of <span class="code">firstNameTextField</span>
 or <span class="code">lastNameTextField</span>
 . The <span class="code">UIDatePicker</span>
 class has a <span class="code">date</span>
 property, which is the date currently being displayed by the picker. For the <span class="code">birthdatePicker</span>
 , this is <span class="code">birthdatePicker.date</span>
 . When a user changes the <span class="code">UIDatePicker</span>
 , the <span class="code">date</span>
 property also changes, so you can use <span class="code">birthdayPicker.date</span>
 to access a birthday the user inputs.</p>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">Add the following lines to your <span class="code">saveTapped(_:)</span>
 method:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    print("My name is \(firstName) \(lastName).")</span>
<br />
    <span class="pink">let</span>
 birthdate = <span class="green1">birthdatePicker</span>
 .<span class="violet">date</span>
<br />
    <span class="blue">print</span>
 (<span class="red">"My birthday is</span>
 \<span class="red">(</span>
 birthdate<span class="red">)."</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">Run the app now and see what happens. You should see something similar to the following output:</p>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<div class="box">
<pre>The save button was tapped.<br />
My name is Dagmar Hedlund.<br />
My birthday is 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">At this point, we have a <span class="code">firstName</span>
 , a <span class="code">lastName</span>
 , and a <span class="code">birthdate</span>
 —the three pieces of data that we need to create a <span class="code">Birthday</span>
 ! You’ll notice that the date displayed in the debug console is in a strange format, which also includes a time and <span class="code">+0000</span>
 for a time zone offset. Don’t worry too much about this for now. We’ll discuss date formats and how to display a date without a time in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<h4 class="h4" id="ch10lev2sec10"><span id="page_153"></span>
 <strong>CREATING A BIRTHDAY</strong>
</h4>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="noindent">Now that your code can access the <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 input that the user provided, you can use this information to create a <span class="code">Birthday</span>
 using the <span class="code">Birthday</span>
 class initializer.</p>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">First, delete the <span class="code">print</span>
 statements from the <span class="code">saveTapped(_:)</span>
 method since we’ll replace them with <span class="code">print</span>
 statements that test out the <span class="code">newBirthday</span>
 instance instead. Then add the following lines to the <span class="code">saveTapped(_:)</span>
 method.</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
    let birthdate = birthdatePicker.date</span>
<br />
  <span class="ent">➊</span>
 <span class="pink">let</span>
 newBirthday = <span class="green1">Birthday</span>
 (firstName: firstName, lastName: <img class="inline" src="Image00093.jpg" />
<br />
        lastName, birthdate: birthdate)<br />
<br />
        <span class="blue">print</span>
 (<span class="red">"Created a Birthday!"</span>
 )<br />
      <span class="ent">➋</span>
 <span class="blue">print</span>
 (<span class="red">"First name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">firstName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Last name:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">lastName</span>
 <span class="red">)"</span>
 )<br />
        <span class="blue">print</span>
 (<span class="red">"Birthdate:</span>
 \<span class="red">(</span>
 newBirthday.<span class="green1">birthdate</span>
 <span class="red">)"</span>
 )<br />
<span class="ash">}</span>
</pre>
</div>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">At <span class="ent">➊</span>
 , you create a <span class="code">newBirthday</span>
 instance using the <span class="code">Birthday</span>
 class initializer and pass in constants for <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 . After you create <span class="code">newBirthday</span>
 , at <span class="ent">➋</span>
 , you output its properties into the debug console using dot notation. The printed output will be the same as with the earlier <span class="code">print</span>
 statements, but this time you’re getting the values from the <span class="code">newBirthday</span>
 instance. Run the app, enter a birthday, and tap Save to see what happens. You should see output in your debug console similar to the following:</p>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<div class="box">
<pre>Created a Birthday!<br />
First name: Dagmar<br />
Last name: Hedlund<br />
Birthdate: 2011-05-03 04:00:00 +0000</pre>
</div>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">For now, tapping the Save button only creates a <span class="code">Birthday</span>
 . You’ll learn how to display this <span class="code">Birthday</span>
 in the Birthdays view controller in <a href="text00022.html#ch11">Chapter 11</a>
 .</p>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<h3 class="h3" id="ch10lev1sec4">
<strong>ADDING THE CANCEL BUTTON</strong>
</h3>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="noindent">When the user taps Cancel, it means they no longer want to add a <span class="code">Birthday</span>
 , and the Add a Birthday screen should go away. Let’s implement this behavior by adding a <span class="code">cancelTapped(_:)</span>
 method to our class, which will call a built-in <span class="code">UIViewController</span>
 method called <span class="code">dismiss(animated:completion:)</span>
 . This method does just what it says it does—it dismisses the currently displayed view <span id="page_154"></span>
 controller. Add the following method right after the <span class="code">saveTapped(_:)</span>
 method in your <span class="code">AddBirthdayViewController</span>
 class:</p>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="noindent1">
<em>AddBirthdayViewController.swift</em>
</p>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<div class="box">
<pre>
<span class="ash">@IBAction func saveTapped(_ sender: UIBarButtonItem) {</span>
<br />
    <span class="ash">--<em>snip</em>
 --<br />
        print("Birthdate: \(newBirthday.birthdate)")<br />
}</span>
<br />
<br />
<span class="pink">@IBAction func</span>
 cancelTapped(<span class="pink">_</span>
 sender: <span class="violet">UIBarButtonItem</span>
 ) {<br />
  <span class="ent">➊</span>
 <span class="blue">dismiss</span>
 (animated: <span class="pink">true</span>
 , completion: <span class="pink">nil</span>
 )<br />
}</pre>
</div>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">The function <span class="code">dismiss(animated:completion:)</span>
 <span class="ent">➊</span>
 takes two parameters. The <span class="code">animated</span>
 parameter is used to animate the closing screen. Pass in <span class="code">true</span>
 so users can see the Add a Birthday screen slide down off the screen. It’ll look just like a professional app! The second parameter is an optional closure called <span class="code">completion</span>
 . A <em>closure</em>
 is a block of code that can be passed in to the function. The <span class="code">completion</span>
 closure can be used if there is any code that you want to run after the view controller is dismissed. Because you don’t need anything to happen here, you can just pass in <span class="code">nil</span>
 .</p>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<div class="image"><img src="Image00233.jpg" />
</div>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">The final step is to hook up <span class="code">cancelTapped(_:)</span>
 to the Cancel button. You do this exactly the same way that you hooked up the <span class="code">saveTapped(_:)</span>
 method to the Save button. Go to <em>Main.storyboard</em>
 and bring up the connections dialog for the Add Birthday view controller. Click and drag from the <span class="code">cancelTapped(_:)</span>
 method listing to the Cancel button.</p>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="indent">After you’ve done that, run the app, tap <strong>+</strong>
 to get to the Add a Birthday screen, and tap <strong>Cancel</strong>
 . You should see Add a Birthday slide down the screen and disappear.</p>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<h3 class="h3" id="ch10lev1sec5">
<strong>WHAT YOU LEARNED</strong>
</h3>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
<p class="noindent">In this chapter, you learned how to hook up written code to your app’s visual interface. You also learned how to use the input text fields and date picker to create a <span class="code">Birthday</span>
 object with <span class="code">firstName</span>
 , <span class="code">lastName</span>
 , and <span class="code">birthdate</span>
 properties. Right now you can save <span class="code">Birthday</span>
 s, but you can’t see them after you saved them. In <a href="text00022.html#ch11">Chapter 11</a>
 , we’ll show you how to display a list of your birthdays in a Birthdays table view controller.</p>
</body>
</html>
</body></html>