<html><head></head><body>
<p class="timage5"><img alt="Image" src="../images/pg045-01.jpg"/></p>&#13;
<h2 class="h2a" id="ch03"><span epub:type="pagebreak" id="page_45"/><span class="big">3</span><br/>Herding Cats: Using Level Design to Tell Stories</h2>&#13;
<p class="noindent">In this chapter, you’ll learn about <em>level design</em>, which is the blueprint of each level in a game. A level can be one scene in a game, one room, one area, or one part of the journey through the game. For example, each puzzle in <em>Herding Cats</em> is one level. You can imagine the whole game as a tower of levels: each one is stacked on top of the other, and the players work their way through the stack one level at a time.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_46"/>Level design tells stories. It shows a player what’s important and can teach the player the fundamental ideas of your game. For example, in <em>Herding Cats</em> you sometimes need to use a cat to reach another cat. You can use level design to develop those ideas; use it in trickier, harder ways; and mix it up to create something unexpected. Level design can surprise the player or make them feel different emotions, such as smart, excited, scared, frustrated, or curious.</p>&#13;
<p class="indent">Think of each level in a game as a kind of tiny game, each with its own challenges and solutions. The characters might be the same, but the situation changes with each new level; each new level teaches the player more about the characters and the game.</p>&#13;
<h3 class="h3" id="ch3.1">Using the Level Editor</h3>&#13;
<p class="noindent">In this section, we’ll create levels for <em>Herding Cats</em> using PuzzleScript’s built-in level editor. We’ll identify the important ideas in <em>Herding Cats</em> and figure out how to introduce them to the player. Then we’ll build on them. We’ll think about what goes into a good level and what levels go into a well-paced, complete game. And we’ll tell a little story while we’re at it.</p>&#13;
<p class="indent">Let’s start by building the smallest possible level using the built-in level editor. Enter the following in your PuzzleScript game’s <span class="literal">LEVELS</span> section to build a level. Or visit <em>bit.ly/catswithoutlevels</em> for a fully programmed copy of the game with the levels missing.</p>&#13;
<pre><span class="lightgray">=======</span>&#13;
<span class="purplebold"><span class="codestrong1">LEVELS</span></span>&#13;
<span class="lightgray">=======</span>&#13;
<span class="lightgray">###</span>&#13;
<span class="lightgray">#m#</span>&#13;
<span class="lightgray">#.#</span>&#13;
<span class="lightgray">#p#</span>&#13;
<span class="lightgray">###</span></pre>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_47"/>This creates your first level with one cat (<span class="literal">m</span>), a starting position for the player (<span class="literal">p</span>), an empty space in between them (<span class="literal">.</span>), and walls (<span class="literal">#</span>).</p>&#13;
<h4 class="h4" id="ch3.1.1">Playing a Level</h4>&#13;
<p class="noindent">To play the level you just entered, you can use a handy shortcut: hold down the <small>CTRL</small> key on your keyboard (<small>COMMAND</small> key on Mac) and click the level. It should pop up immediately in the game, ready to play, as shown here.</p>&#13;
<p class="imagel"><img alt="Image" src="../images/pg047-01.jpg"/></p>&#13;
<p class="caption"><em>Pretty much the smallest</em> Herding Cats <em>level you can make</em></p>&#13;
<p class="indent">Press the up arrow to wake up the kitty and win!</p>&#13;
<h4 class="h4" id="ch3.1.2">Editing a Level</h4>&#13;
<p class="noindent">Now let’s edit the level you entered to make it more interesting. To enter editing mode, <small>CTRL</small>-click the level again and, while pressing <small>CTRL</small>, press the <strong>E</strong> key. A row of objects should appear that includes the letter <em>S,</em> some grass, a wall, the player, and a cat, as shown in the following figure. (The cat should just be a pair of yellow eyes, because it’s a black cat on a black background.) We’ll call this the level editor <em>palette</em>.</p>&#13;
<p class="imagel"><span epub:type="pagebreak" id="page_48"/><img alt="Image" src="../images/pg048-01.jpg"/></p>&#13;
<p class="caption"><em>Editing mode</em></p>&#13;
<p class="indent">Click an object from the palette to select it, and then click in the level to place it. Try selecting the cat, and then click the player in your level to change the player into a cat. To erase the placed objects, right-click them.</p>&#13;
<h4 class="h4" id="ch3.1.3">Enlarging a Level</h4>&#13;
<p class="noindent">To enlarge the level, click an edge, and then move your cursor to the far left, far right, top, or bottom of the level. The cursor should change from a box to crosshairs (<span class="literal">+</span>). Click when the cursor looks like crosshairs to grow the level by one row or column in that direction. Right-click to shrink the level. Try making the level bigger and then redrawing the walls to fit the new level. Here’s what an enlarged level with two cats would look like.</p>&#13;
<div class="note">&#13;
<p class="note1"><strong><span class="snote">NOTE:</span></strong> To play your level while editing it, press the arrow keys. (You might have to add a new player to the game if you turned the player into a cat earlier.)</p>&#13;
</div>&#13;
<p class="imagel"><span epub:type="pagebreak" id="page_49"/><img alt="Image" src="../images/pg049-01.jpg"/></p>&#13;
<p class="caption"><em>Enlarged level</em></p>&#13;
<h4 class="h4" id="ch3.1.4">Saving and Printing Your Level</h4>&#13;
<p class="noindent">Once you finish editing a level in editing mode, save it by clicking the <strong>S</strong> from the palette. The box below the game should now display the text version of your new level.</p>&#13;
<p class="imagel"><img alt="Image" src="../images/pg049-02.jpg"/></p>&#13;
<p class="caption"><em>PuzzleScript levels can also be represented in text.</em></p>&#13;
<p class="indent">Note that the text version displays the code for the level as it exists at that very moment. So if you moved the player in editing mode, the code should now display the player in their new position. But if you woke up all the cats, there should be no cats shown in the code because the <span class="literal">LEGEND</span> section has no code for an awake cat.</p>&#13;
<p class="indent">Be sure to click <strong>S</strong> a lot when you’re working on levels to make sure you don’t accidentally lose your work!</p>&#13;
<h4 class="h4" id="ch3.1.5"><span epub:type="pagebreak" id="page_50"/>Adding Your New Level to Your Game</h4>&#13;
<p class="noindent">Once you’re done updating your level in editing mode, you’ll need to copy and paste the updated PuzzleScript code into your game’s <span class="literal">LEVELS</span> section.</p>&#13;
<p class="indent">To copy and paste the new level, highlight the text version of your level. Next, right-click and select <strong>Copy</strong> to copy the text of the level to your operating system’s clipboard. (You won’t see the clipboard; the text will just be saved invisibly.) Then right-click under <span class="literal">LEVELS</span> and select <strong>Paste</strong> to paste your new level into your game’s <span class="literal">LEVELS</span> section! You can also drag and drop the highlighted text into your <span class="literal">LEVELS</span> section.</p>&#13;
<p class="indent">The result should look like this.</p>&#13;
<pre><span class="lightgray">=======</span>&#13;
<span class="purplebold"><span class="codestrong1">LEVELS</span></span>&#13;
<span class="lightgray">=======</span>&#13;
<span class="lightgray">########</span>&#13;
<span class="lightgray">#...m..#</span>&#13;
<span class="lightgray">#......#</span>&#13;
<span class="lightgray">#...m..#</span>&#13;
<span class="lightgray">#......#</span>&#13;
<span class="lightgray">#......#</span>&#13;
<span class="lightgray">########</span></pre>&#13;
<h4 class="h4" id="ch3.1.6">Testing Your Levels</h4>&#13;
<p class="noindent">To test your levels without totally rearranging them, press <strong>R</strong> (Reset). But be careful! Pressing R will reset your level to the way it was before you first pressed E to enter editing mode. If you changed your level since you started editing, pressing R will undo all of your changes! Eek!</p>&#13;
<p class="indent">But there’s a solution to this problem: to test a level, press <strong>E</strong> twice (once to exit editing mode and once to reenter it), and then play your level. Now when you press <strong>R</strong>, the level should again reset to the way it was when you pressed E. Click the <strong>S</strong> button to print your level.</p>&#13;
<p class="indent">Be sure to play your levels a lot while you’re working on them, and save them even more frequently.</p>&#13;
<p class="image"><span epub:type="pagebreak" id="page_51"/><img alt="Image" src="../images/pg051-01.jpg"/></p>&#13;
<h3 class="h3" id="ch3.2">Levels Tell a Story</h3>&#13;
<p class="noindent">Let’s build some levels for our <em>Herding Cats</em> game. What would be a good starting level? Your game’s first level should introduce the game’s story (the player tries to make friends with cats) and show the player the goal of each level, which is to wake up cats.</p>&#13;
<p class="indent">This figure shows a starting level that I came up with. See if you can re-create it in the editor.</p>&#13;
<p class="imagel"><img alt="Image" src="../images/pg051-02.jpg"/></p>&#13;
<p class="caption"><em>Level 1: Cat friend #1</em></p>&#13;
<p class="image"><img alt="Image" src="../images/pg052-01.jpg"/></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_52"/>This first level is very simple: when the player touches the cat, the level ends. The player doesn’t know why they’re befriending cats yet. But you can help them figure this out by adding a message in PuzzleScript to give them some context about what’s going on. In your game’s <span class="literal">LEVELS</span> section, enter the word <span class="literal">Message</span> followed by what you want your message to be (for example, <span class="literal">Oh, a kitty!</span>). The words you enter in your message will display on the screen between levels (without the word <span class="literal">Message</span>).</p>&#13;
<pre><span class="lightgray">=======</span>&#13;
<span class="purplebold">LEVELS</span>&#13;
<span class="lightgray">=======</span>&#13;
<span class="purplebold">Message</span> <span class="orangeitalic">Oh, a kitty!</span>&#13;
<span class="lightgray">########</span>&#13;
<span class="lightgray">#...m..#</span>&#13;
<span class="lightgray">#......#</span>&#13;
<span class="lightgray">#...m..#</span>&#13;
<span class="lightgray">#......#</span>&#13;
<span class="lightgray">#......#</span>&#13;
<span class="lightgray">########</span>&#13;
<span class="purplebold">Message</span> <span class="orangeitalic">Hi, kitty.</span></pre>&#13;
<p class="indent">Let’s add the message <span class="literal">Oh, a kitty!</span> to make it appear before the level begins at the very start of the game to establish that the kitty is important. Then let’s show the message <span class="literal">Hi, kitty.</span> when the level ends, to tell <span epub:type="pagebreak" id="page_53"/>the player that meeting the kitty was what they were supposed to do. The player will also see some text reminding them to press X to continue the game, as shown here.</p>&#13;
<p class="imagel"><img alt="Image" src="../images/pg053-01.jpg"/></p>&#13;
<p class="caption"><em>This is what a message looks like in the game.</em></p>&#13;
<p class="indent">That completes our first level for <em>Herding Cats</em>! By the end of this level, the player should know the basic point of the game.</p>&#13;
<h3 class="h3" id="ch3.3">Levels Teach the Player the Rules</h3>&#13;
<p class="noindent">We’ve introduced the idea of meeting cats as a game goal. The next important rule we need the player to understand is that cats will follow the player around. How can we make a level to teach the player that rule?</p>&#13;
<p class="imagel"><img alt="Image" src="../images/pg053-02.jpg"/></p>&#13;
<p class="caption"><em>Level 2: Cats like to tag along.</em></p>&#13;
<p class="indent">To finish this second level, the player must pass by two cats to get to the third cat on the right. As they pass the cats, the cats perk up and follow. The level ends when the player has met every cat.</p>&#13;
<h4 class="h4" id="ch3.3.1"><span epub:type="pagebreak" id="page_54"/>Troubleshooting</h4>&#13;
<p class="noindent">But what about the cat from the first level? Could that cat still be following the player? Let’s modify our level to add a cat sidekick. Here’s what the level looks like now.</p>&#13;
<p class="imagel"><img alt="Image" src="../images/pg054-01.jpg"/></p>&#13;
<p class="caption"><em>Level 2B: The player starts level 2 with their cat friend from level 1.</em></p>&#13;
<p class="indent">Build this level and try it. Uh-oh, there’s a problem. Did you find it?</p>&#13;
<p class="indent">When you move the player, the cat from Level 1 doesn’t follow. You can go back and wake up the cat, but we want the cat to be following the player <em>already</em> because this is a friend we made on Level 1!</p>&#13;
<p class="indent">The problem occurs because of the PuzzleScript rules we set in <a href="ch02.xhtml">Chapter 2</a>. The rule that tells PuzzleScript to turn sleeping cats into awake cats is a late rule that triggers only when the player moves. But because the player hasn’t moved yet, no rules have triggered!</p>&#13;
<h4 class="h4" id="ch3.3.2">Running Rules at the Start of a Level</h4>&#13;
<p class="noindent">Fortunately, we can solve the problem of the first cat friend following the player by making sure all the rules run at the beginning of every level, before the player does anything. To make that happen, just add <span class="literal">run_rules_on_level_start</span> to the beginning of your PuzzleScript code, as shown here.</p>&#13;
<pre><span class="purplebold">title</span> <span class="orangeitalic">Herding Cats</span>&#13;
<span class="purplebold">author</span> <span class="orangeitalic">anna anthropy</span>&#13;
<span class="purplebold">homepage</span> <span class="orangeitalic">www.puzzlescript.net</span>&#13;
<span class="purplebold">run_rules_on_level_start</span></pre>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_55"/>Now click <strong>Rebuild</strong> and restart your level. The new cat should follow the player. The player should start level 2 by walking around with their cat friend from level 1. As they pass the two cats on the left, the cats wake up and start following them. Then, with an entourage of three cats accompanying the player, they meet a fourth and final cat, and the level is complete. Let’s end with another message, just to make the story complete.</p>&#13;
<pre><span class="purplebold">message</span> <span class="orangeitalic">Oh, hi to you too!</span></pre>&#13;
<p class="indent">That’s a whole little story right there!</p>&#13;
<h3 class="h3" id="ch3.4">Levels Challenge Players to Use What They Know</h3>&#13;
<p class="noindent">So far we’ve taught the player that cats they touch will follow them around and that the goal is to get every cat to follow them. Now that they know those rules, let’s create a puzzle that will challenge them to use what they know.</p>&#13;
<p class="indent">Can you make a level that forces the player to think carefully about the order in which they wake up the cats?</p>&#13;
<p class="imagel"><img alt="Image" src="../images/pg055-01.jpg"/></p>&#13;
<p class="caption"><em>Level 3: A close fit!</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_56"/>Level 3 has two rooms with two cats each and a super narrow passage between them. If the player isn’t careful about how they herd their cats, they won’t be able to make it through the gap, as shown in the figure. Try to solve the level. Do you see how this level tests what the player has learned?</p>&#13;
<p class="imagel"><img alt="Image" src="../images/pg056-01.jpg"/></p>&#13;
<p class="caption"><em>Level 3: Stuck!</em></p>&#13;
<p class="indent">If the player doesn’t think carefully about the shape of their group, they’ll get stuck!</p>&#13;
<p class="imagel"><img alt="Image" src="../images/pg056-02.jpg"/></p>&#13;
<p class="caption"><em>Level 3 solution</em></p>&#13;
<p class="indent">To get through this level, the player needs to arrange all the cats in the group to fit through the narrow hole.</p>&#13;
<h3 class="h3" id="ch3.5"><span epub:type="pagebreak" id="page_57"/>Learning from Mistakes</h3>&#13;
<p class="noindent">Let’s try to arrange the cats in Level 3 a little differently. We’ll put them across from each other horizontally instead of on a diagonal. How might that affect how the player thinks about shaping their group?</p>&#13;
<p class="imagel"><img alt="Image" src="../images/pg057-01.jpg"/></p>&#13;
<p class="caption"><em>Level 3B: What if the cats were arranged differently?</em></p>&#13;
<p class="indent">Every player thinks a little differently. But it’s likely that the player will have an easier time finding the solution with this setup. The cats are already lined up the way they need to be to fit through the narrow hole! So does this level change make the level better?</p>&#13;
<p class="indent">I would say no, because <em>making mistakes is an important part of play</em>. In <em>Herding Cats</em>, when the player makes a mistake and gets stuck, that’s when they realize they need to think more carefully about where their cat friends are. When they make mistakes, they learn about how the game works and how they need to think to solve puzzles. Messing up is important!</p>&#13;
<h3 class="h3" id="ch3.6">Design Your Own Levels!</h3>&#13;
<p class="noindent">Try designing some levels of your own for the game! Here are some ideas:</p>&#13;
<ul>&#13;
<li class="noindent"><strong>Make a level that’s harder than the previous level but only a little bit.</strong> Then try to make a level that’s a little bit harder than that! It’s much trickier to make a not-too-hard level than a <span epub:type="pagebreak" id="page_58"/>very hard level. Imagine if your favorite game skipped straight to the hardest level. You would have no idea what to do: the in-between levels help you learn how to handle harder challenges! If you make a level that’s too hard, think about what you could do to simplify it.</li>&#13;
<li class="noindent"><strong>Make the hardest level you can in the smallest amount of screen space.</strong> Think carefully about where you put your objects. How many do you <em>really</em> need to make an interesting level?</li>&#13;
<li class="noindent"><strong>Make levels that tell stories!</strong> When the first level ends with the player making friends with a cat and the second level starts with that cat friend still hanging out, that’s storytelling! It’s a simple story, but it makes the player care about the game. What other ways can you come up with to tell simple stories?</li>&#13;
<li class="noindent"><strong>Make some levels with multiple players.</strong> When you add multiple player objects, what kind of puzzles can you come up with?</li>&#13;
</ul>&#13;
<p class="image"><img alt="Image" src="../images/pg058-01.jpg"/></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_59"/>Remember to play your levels while you’re working on them! Pay attention to what you’re thinking and experiencing when you play each level. What is your first instinct in a level? Is it to go a particular way, and if so, why? If something about a level seems a little rough, make it better and then play it again! As you build levels, you’ll develop your intuition for level design.</p>&#13;
<p class="indent">When you’ve completed your game, have friends play your levels to get a sense of how others experience a level. Remember that as the game developer, you know all there is to know about the game. But what’s easy for you might be hard for someone else. It’s important to see how other people react to your creations.</p>&#13;
<p class="indent">While you’re watching someone else play your levels, pay attention to what they do. Try to resist the urge to explain to them what they’re supposed to be doing or why you made a particular part a certain way. Your goal should be to get an idea of what players will do when you’re not there.</p>&#13;
<p class="indent">It takes a lot of work to become a good level designer. Listen to your own instincts and to other people’s feedback. The more levels you make, the better you’ll get at it!</p>&#13;
<h3 class="h3" id="ch3.7">Sharing Your Game</h3>&#13;
<p class="noindent">When you’ve finished your PuzzleScript game, you can share it! Sharing a PuzzleScript game is super easy! Just click <strong>Share</strong> at the top of the screen. You’ll need to create a GitHub account.</p>&#13;
<p class="imagel"><img alt="Image" src="../images/pg059-01.jpg"/></p>&#13;
<p class="caption"><em>Click the Share button to create a link to your game.</em></p>&#13;
<p class="indent">When you click Share, PuzzleScript creates two links: one opens your game in the PuzzleScript editor, and the other leads to your playable game.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_60"/>Share that second link with friends so they can play your game! They can also open your game in the editor by clicking the <strong>hack</strong> link at the bottom of the page.</p>&#13;
<p class="imagel"><img alt="Image" src="../images/pg060-01.jpg"/></p>&#13;
<p class="caption"><em>PuzzleScript generates links to your game.</em></p>&#13;
<p class="indent">You can also save a copy of your game to your computer by clicking <strong>Export</strong> at the top of the screen. Exporting your game creates an HTML file on your computer that you can open to play your finished game. This version doesn’t have the hack link, so if you want to keep your game code a secret, export it and upload it to a free website, such as <em><a href="https://neocities.org">https://neocities.org</a></em>!</p>&#13;
<h3 class="h3" id="ch3.8">Bonus Challenges</h3>&#13;
<p class="noindent">Here are a couple of graphical tricks I added to <em>Herding Cats</em> to make the game look more interesting. Can you figure out how to do them? If you need some hints, open my finished version of the game at <em><a href="https://w.itch.io/herding-cats">https://w.itch.io/herding-cats</a></em> and check out how I did them.</p>&#13;
<h4 class="h4" id="ch3.8.1">Levels with Different Shapes</h4>&#13;
<p class="noindent">The first graphical trick is a simple one. Instead of being completely rectangular, the levels are all different shapes.</p>&#13;
<p class="imagel"><span epub:type="pagebreak" id="page_61"/><img alt="Image" src="../images/pg061-01.jpg"/></p>&#13;
<p class="caption"><em>Creating levels with funky shapes</em></p>&#13;
<p class="indent">This trick is easy! I just made a totally black object and used it to fill the space outside the walls. So instead of the stages looking like big rectangles, they have unique shapes.</p>&#13;
<h4 class="h4" id="ch3.8.2">Four Types of Cats</h4>&#13;
<p class="noindent">The other graphical change is more complicated: instead of just one type of cat, there are four different kinds, as you can see here.</p>&#13;
<p class="imagel"><img alt="Image" src="../images/pg061-02.jpg"/></p>&#13;
<p class="caption"><em>Sleeping and awake cats</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_62"/>This trick involves creating sleeping and waking versions of all four kinds of cats, plus a generic cat object to put in levels. At the start of a level, each generic cat will <em>randomly</em> become one of the four kinds of cats. (Read through the <span class="literal">RULES</span> section in my finished version of the game to see how this happens!)</p>&#13;
<p class="indent">One note about the editor: if you rebuild the game after adding new objects, the level editor might get confused about what order the objects are in. Whenever you add a new object, click the <strong>Run</strong> button to make sure PuzzleScript updates correctly. Clicking <strong>Rebuild</strong> is still fine when you’re making changes within levels or to objects’ appearances.</p>&#13;
<h3 class="h3" id="ch3.9">What You Learned</h3>&#13;
<p class="noindent">Well, that’s it for <em>Herding Cats</em>! In this chapter, you learned how to use PuzzleScript’s level editor to tell stories, teach the player the rules, and challenge the player’s understanding of those rules.</p>&#13;
<p class="indent">Next, you’ll make a game called <em>Robot Heist</em> and learn how to create obstacles like lasers. You’ll also explore some clever ways to use the level editor to make your game more interesting. Soon you’ll be a PuzzleScript master!</p>&#13;
</body></html>