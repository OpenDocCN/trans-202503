<html><head></head><body>
<h2 class="h2" id="ch14"><span epub:type="pagebreak" id="page_243"/>14<br/>COMPUTER GAMES WITH THE SENSE HAT</h2>&#13;
<p class="noindent"><span class="big1">IN THE FINAL PROJECT IN THIS BOOK, YOU’LL USE THE SENSE HAT HARDWARE AND PYTHON CODE TO BUILD A VERSION OF THE CLASSIC GAME OF ROCK, PAPER, SCISSORS — BUT WITH A TWIST. YOU’LL PROGRAM A COLORFUL LED MATRIX AND A JOYSTICK TO ADD A GAME DISPLAY AND CONTROL TO YOUR PROGRAM.</span></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_244"/>In late 2015, the European Space Agency (ESA) sent a supply rocket to replenish the International Space Station (ISS). Among the cargo were two Raspberry Pi computers, each fitted with a special add-on board known as the <em>Astro Pi</em>. These were sent in preparation for the inaugural visit of Major Tim Peake, a British astronaut. Each Astro Pi boasts an array of hardware and sensors and an 8 × 8 LED display—perfect for taking and displaying readings such as temperature, pressure, acceleration, and magnetic field strength.</p>&#13;
<p class="indent">Previously, in the summer of 2015, the Raspberry Pi Foundation held a competition for children to write a program or experiment for the Astro Pi that would run aboard the ISS. During Peake’s stay, the Astro Pi ran the preloaded experiments designed by the winners. The Astro Pi will stay onboard the ISS until 2021, and, provided you meet the qualifications to take part, you can still enter the competitions. Find more details at <em><a href="https://astro-pi.org/">https://astro-pi.org/</a></em>. Who knows—maybe you’ll be inspired to write your own program to run in space aboard the ISS, shown in <a href="ch14.xhtml#ch14fig01">Figure 14-1</a>.</p>&#13;
<p class="indent">In December of that year, the Astro Pi became available for sale to the public, rebranded as the Sense HAT. The Sense HAT you can buy today consists of exactly the same hardware and sensor set found on the Astro Pi.</p>&#13;
<div class="image"><img alt="Image" src="../images/14fig01.jpg"/></div>&#13;
<p class="figcap" id="ch14fig01"><strong>FIGURE 14-1</strong> The International Space Station</p>&#13;
<p class="indent">The Sense HAT’s LED display can serve as a screen, making it the perfect tool for creating games. In this chapter, you’ll use it to program a twist on the classic game of rock, paper, scissors. This <span epub:type="pagebreak" id="page_245"/>version—called rock, paper, scissors, lizard, Spock—introduces new possibilities to mix up the gameplay.</p>&#13;
<p class="indent">First, though, you’ll look at simple programs in order to explore the Sense HAT’s key features. You’ll scroll text, make an interactive temperature display, and use a tool called an array to draw a basic image. These skills also stand alone, and you can adapt them for your own projects.</p>&#13;
<h3 class="h3" id="ch14lev1sec1">WHAT YOU’LL NEED</h3>&#13;
<p class="noindent">Here’s what you’ll need to build this game project:</p>&#13;
<ul>&#13;
<li class="noindent">Raspberry Pi 3 or 4 (suggested)</li>&#13;
<li class="noindent">Sense HAT</li>&#13;
<li class="noindent">USB portable battery (optional)</li>&#13;
<li class="noindent">Small Phillips-head screwdriver</li>&#13;
</ul>&#13;
<h3 class="h3" id="ch14lev1sec2">WHAT IS THE SENSE HAT?</h3>&#13;
<p class="noindent">Let’s take a look at the Sense HAT’s sensors and hardware, shown in <a href="ch14.xhtml#ch14fig02">Figure 14-2</a>.</p>&#13;
<div class="image"><img alt="Image" src="../images/14fig02.jpg"/></div>&#13;
<p class="figcap" id="ch14fig02"><strong>FIGURE 14-2</strong> The Sense HAT and its parts</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_246"/>The Sense HAT parts are as follows:</p>&#13;
<p class="noindentt"><strong><span class="purple">Multicolor 8 × 8 LED matrix</span></strong> You can use these 64 programmable LED lights to scroll messages or to display data from the sensors, animations, or simple games.</p>&#13;
<p class="noindent"><strong><span class="purple">Temperature sensor</span></strong> This built-in sensor is accurate to about 2°C (approximately 4°F) in the 0-65°C (32-150°F) range. It’s useful for measuring the temperature of your surrounding environment.</p>&#13;
<p class="noindent"><strong><span class="purple">Magnetometer</span></strong> Works like a compass by detecting magnetic field strengths. You can use its readings to measure magnetic fields and find compass points relative to north.</p>&#13;
<p class="noindent"><strong><span class="purple">Accelerometer</span></strong> Measures acceleration in the directions of up, down, and across. You can use this to track movements, or modify it to create a controller for a game.</p>&#13;
<p class="noindent"><strong><span class="purple">Multidirectional joystick</span></strong> Can be used to move characters in a game or as a selection tool for options.</p>&#13;
<h3 class="h3" id="ch14lev1sec3">GETTING STARTED WITH THE SENSE HAT</h3>&#13;
<p class="noindent">Setting up the Sense HAT is extremely easy, because it was designed to work with the Raspberry Pi. Take the Sense HAT and slide it onto the GPIO pins. Firmly push it down to secure it into place. Then take the Raspberry Pi’s offset mounts (these should come with your Sense HAT) and screw them into the Sense HAT. Fitting these mounts will keep the board from moving around when you’re using the joystick. Next, plug in your power supply and boot up your Raspberry Pi.</p>&#13;
<p class="indent">You’ll now have a look at some basic programs that will show off the various features and capabilities of the Sense HAT.</p>&#13;
<h4 class="h4" id="ch14lev2sec1">Scrolling Text Across the Sense HAT</h4>&#13;
<p class="noindent">Let’s write your first program, which will scroll a message across the LED display.</p>&#13;
<h5 class="h5">Making the Text Scroll</h5>&#13;
<p class="noindent">Open your Python editor, start a new file, and enter the program in <a href="ch14.xhtml#ch14ex01">Listing 14-1</a>.</p>&#13;
<pre><span class="ent">❶</span> <span class="codeorg">from</span> sense_hat <span class="codeorg">import</span> SenseHat&#13;
   sense = SenseHat()&#13;
<span class="ent">❷</span> sense.show_message(<span class="codegreen1">"</span><span class="codegreen2">My name is Ada</span><span class="codegreen1">"</span>)&#13;
</pre>&#13;
<p class="caption"><a id="ch14ex01"/><strong>LISTING 14-1</strong> Scrolling a message across the LED display</p>&#13;
<p class="indent">Start by importing the <code>SenseHat</code> module <span class="ent">❶</span>. Then create a line of code <span class="ent">❷</span> that’s responsible for scrolling the message. Replace the <span epub:type="pagebreak" id="page_247"/>text between the quotation marks with your own, save the file as <em>scroll_text.py</em>, and press <strong>F5</strong> to run it. Your message will scroll across the LEDs.</p>&#13;
<h5 class="h5">Changing the Color of the Text</h5>&#13;
<p class="noindent">You can change the color of the text by altering its red, green, and blue (RGB) values. You can combine any amount of red, green, and blue using values between 0 and 255, where 0 is none and 255 is the maximum amount, to create an overall color.</p>&#13;
<p class="indent">Replace the last line of code from <a href="ch14.xhtml#ch14ex01">Listing 14-1</a> with the following:</p>&#13;
<pre>sense.show_message(<span class="codegreen1">"</span><span class="codegreen2">Hi, this is Ada!</span><span class="codegreen1">"</span>, text_colour=[255, 0, 0])</pre>&#13;
<p class="indent">This code sets the color to the maximum red value (255) and the minimum green and blue values (0) to change the text to red. Save and run the program code as before.</p>&#13;
<p class="indent">Play around with other color variations. Change the color values at the end of the line of code, and then run the program to see the colors change. The following table lists color values you could use.</p>&#13;
<table class="table1">&#13;
<colgroup>&#13;
<col style="width:50%"/>&#13;
<col style="width:50%"/>&#13;
</colgroup>&#13;
<thead>&#13;
<tr>&#13;
<td class="table-h" style="vertical-align: top;"><p class="tab_th"><strong>COLOR</strong></p></td>&#13;
<td class="table-h1" style="vertical-align: top;"><p class="tab_th"><strong>RGB VALUES</strong></p></td>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="table-b1" style="vertical-align: top;"><p class="tabc"><span class="purple">Pink</span></p></td>&#13;
<td class="table-b1a" style="vertical-align: top;"><p class="tabc"><span class="purple">255, 102, 255</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table-b1" style="vertical-align: top;"><p class="tabc"><span class="purple">Yellow</span></p></td>&#13;
<td class="table-b1a" style="vertical-align: top;"><p class="tabc"><span class="purple">255, 255, 0</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table-b1" style="vertical-align: top;"><p class="tabc"><span class="purple">Orange</span></p></td>&#13;
<td class="table-b1a" style="vertical-align: top;"><p class="tabc"><span class="purple">255, 128, 0</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table-b1" style="vertical-align: top;"><p class="tabc"><span class="purple">Purple</span></p></td>&#13;
<td class="table-b1a" style="vertical-align: top;"><p class="tabc"><span class="purple">102, 0, 102</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table-b1" style="vertical-align: top;"><p class="tabc"><span class="purple">Light blue</span></p></td>&#13;
<td class="table-b1a" style="vertical-align: top;"><p class="tabc"><span class="purple">0, 255, 255</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<h4 class="h4" id="ch14lev2sec2">Taking a Temperature Reading</h4>&#13;
<p class="noindent">Now you’ll combine the code that scrolls text with the Sense HAT’s temperature sensor to display the temperature of your surroundings. Open a new Python file and enter the code in <a href="ch14.xhtml#ch14ex02">Listing 14-2</a>.</p>&#13;
<pre>   <span class="codeorg">from</span> sense_hat <span class="codeorg">import</span> SenseHat&#13;
   sense = SenseHat()&#13;
<span class="ent">❶</span> temp = sense.get_temperature()&#13;
<span class="ent">❷</span> <span class="codepurple">print</span> (<span class="codegreen1">"Temperature: %s C"</span> % temp)&#13;
<span class="ent">❸</span> sense.show_message(<span class="codegreen1">"Temp: %s C"</span> % temp)</pre>&#13;
<p class="caption"><a id="ch14ex02"/><strong>LISTING 14-2</strong> Scrolling the temperature across the LED display</p>&#13;
<p class="indent">Again, begin by importing the <code>SenseHat</code> module. Then tell the temperature sensor to take a reading and store this value in a variable named <code>temp</code> <span class="ent">❶</span>. Next, print out the value <span class="ent">❷</span>. On the last line, use the same code as you did in <a href="ch14.xhtml#ch14ex01">Listing 14-1</a> to scroll text, but make the message the value from the <code>temp</code> variable <span class="ent">❸</span>.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_248"/>Now the temperature (in degrees Celsius) will scroll across the LED display. If the number seems high, that’s because the sensor is located near the Raspberry Pi’s CPU, which gets hot. So the reading is probably 5 or 6 degrees Celsius above your environment. If you want a more accurate temperature reading, you can subtract 6 from the reading by replacing line <span class="ent">❶</span> with <strong><code>temp = sense.get_temperature() - 6</code></strong>.</p>&#13;
<h4 class="h4" id="ch14lev2sec3">Making a Real-Time Temperature Display</h4>&#13;
<p class="noindent">Our program so far takes a single temperature reading at the moment when you execute the program. This isn’t useful if you want to monitor a change in temperature, so you’ll edit the code to update the temperature readings continuously. You’ll also use the LEDs to make a virtual thermometer, rather than representing the temperature as a number. You’ll do this by assigning the value of the temperature reading to a number of pixels, creating an LED thermometer. Open a new Python file and copy out <a href="ch14.xhtml#ch14ex03">Listing 14-3</a>, which that shows this program.</p>&#13;
<pre>   <span class="codeorg">from</span> sense_hat <span class="codeorg">import</span> SenseHat&#13;
   sense = SenseHat()&#13;
<span class="ent">❶</span> red = (255, 0, 0)&#13;
<span class="ent">❷</span> blue = (0, 0, 255) &#13;
<span class="ent">❸</span> <span class="codeorg">while True</span>:&#13;
    <span class="ent">❹</span> temp = sense.temp&#13;
    <span class="ent">❺</span> <span class="codepurple">print</span> (temp)&#13;
    <span class="ent">❻</span> pixels = [red <span class="codeorg">if</span> i &lt; temp <span class="codeorg">else</span> blue <span class="codeorg">for</span> i <span class="codeorg">in</span> <span class="codepurple">range</span>(64)]&#13;
    <span class="ent">❼</span> sense.set_pixels(pixels)</pre>&#13;
<p class="caption"><a id="ch14ex03"/><strong>LISTING 14-3</strong> Making an updating virtual thermometer</p>&#13;
<p class="indent">Start the program by importing the <code>SenseHat</code> modules. Then assign two colors for the temperature display. In this example, use <code>red</code> <span class="ent">❶</span> to represent the current temperature and <code>blue</code> <span class="ent">❷</span> to represent the rest of the scale.</p>&#13;
<p class="indent">Next, create a <code>while</code> loop to ensure that the program repeats, updating the temperature <span class="ent">❸</span>. As before, take the temperature reading and store the value in <code>temp</code> <span class="ent">❹</span> and then print the value <span class="ent">❺</span>.</p>&#13;
<p class="indent">Calculate how many LEDs should be red and how many should be blue <span class="ent">❻</span>. Each LED represents a degree, so if the temperature were 26°C, you would want the first 26 LEDs to be red and the rest to be blue (the blue LEDs, would mark temperature values 27°C and above). The code indicates that the LEDs should be blue if their number is greater than the temperature and red if they are equal to or lower than the temperature. These color values are then written to the LED display <span class="ent">❼</span>.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_249"/>As the temperature changes, the looping program will recalculate the combination of red and blue LEDs. You’ll have more red LEDs as it gets hotter and more blue LEDs as it gets colder. <a href="ch14.xhtml#ch14fig03">Figure 14-3</a> shows the LED thermometer.</p>&#13;
<div class="image"><img alt="Image" src="../images/14fig03.jpg"/></div>&#13;
<p class="figcap" id="ch14fig03"><strong>FIGURE 14-3</strong> The Sense HAT real-time temperature sensor</p>&#13;
<p class="indent">Save the program as <em>temp.py</em> and run it. Try adjusting the temperature by safely placing your Sense HAT near a heat source or maybe putting the Sense HAT in the fridge for a few minutes!</p>&#13;
<h4 class="h4" id="ch14lev2sec4">Building a Compass</h4>&#13;
<p class="noindent">The Sense HAT has an onboard magnetometer that you can use as a compass to calculate the Sense HAT’s position in relation to magnetic north. Open a new Python file and try this out now, using the code in <a href="ch14.xhtml#ch14ex04">Listing 14-4</a>.</p>&#13;
<pre>   <span class="codeorg">from</span> sense_hat <span class="codeorg">import</span> SenseHat&#13;
   sense = SenseHat()&#13;
   <span class="codeorg">import</span> time&#13;
   <span class="codeorg">while True</span>:&#13;
<span class="ent">❶</span> north = sense.get_compass()&#13;
<span class="ent">❷</span> <span class="codepurple">print</span> (<span class="codegreen1">"North: %s"</span> % north)&#13;
<span class="ent">❸</span> time.sleep(1)</pre>&#13;
<p class="caption"><a id="ch14ex04"/><strong>LISTING 14-4</strong> Finding the magnetic north</p>&#13;
<p class="indent">Add the first three lines of code, which are the standard imports and assignments. Then create a <code>while</code> loop to keep the program repeating; this way, as in the thermometer project, the Sense HAT will continuously update its location. Next, take a reading from the magnetometer <span class="ent">❶</span>, and store it in a variable named <code>north</code>. Print out the value <span class="ent">❷</span> and then add a 1-second pause <span class="ent">❸</span> in order to allow you to settle in a position before the next reading is taken.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_250"/>Save and run the program. Move the Sense HAT around and watch the readings change.</p>&#13;
<h4 class="h4" id="ch14lev2sec5">Making a Magical Sparkle Screen</h4>&#13;
<p class="noindent">This nice little program from the Raspberry Pi Foundation turns the Sense HAT LED display into a wall of sparkling colors, as shown in <a href="ch14.xhtml#ch14fig04">Figure 14-4</a>. It selects a random LED and assigns it a random color, turns that LED on, and then pauses for one-tenth of a second before selecting and turning on another random LED with a random color. This pattern continuously loops, creating a sparkling show. Stick a transparent object on top, and you’ll have your own mood light.</p>&#13;
<div class="image"><img alt="Image" src="../images/14fig04.jpg"/></div>&#13;
<p class="figcap" id="ch14fig04"><strong>FIGURE 14-4</strong> The Sense HAT sparkles.</p>&#13;
<p class="indent">Open Python and save a new file as <em>sparkles.py</em>. Enter the code from <a href="ch14.xhtml#ch14ex05">Listing 14-5</a>.</p>&#13;
<pre>   <span class="codeorg">from</span> sense_hat <span class="codeorg">import</span> SenseHat&#13;
<span class="ent">❶</span> <span class="codeorg">from</span> random <span class="codeorg">import</span> randint&#13;
<span class="ent">❷</span> <span class="codeorg">from</span> time <span class="codeorg">import</span> sleep  &#13;
   sense = SenseHat() &#13;
<span class="ent">❸</span> <span class="codeorg">while True</span>:&#13;
   <span class="ent">❹</span> x = randint(0, 7)&#13;
   <span class="ent">❺</span> y = randint(0, 7)&#13;
   <span class="ent">❻</span> r = randint(0, 255)&#13;
   <span class="ent">❼</span> g = randint(0, 255)&#13;
   <span class="ent">❽</span> b = randint(0, 255)&#13;
   <span class="ent">❾</span> sense.set_pixel(x, y, r, g, b)&#13;
   <span class="ent">❿</span> sleep(0.01)&#13;
</pre>&#13;
<p class="caption"><a id="ch14ex05"/><strong>LISTING 14-5</strong> Choosing random LEDs and colors</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_251"/>Begin the program by importing the <code>SenseHat</code> module. Then import the <code>randint()</code> function from the <code>random</code> module <span class="ent">❶</span>. The <code>randit()</code> function, short for <em>random integer</em>, selects a random integer (a nondecimal number) to use in the program, which will give you the random color selection. Next, import the <code>sleep()</code> function to add a short delay to the program <span class="ent">❷</span>.</p>&#13;
<p class="indent">Create a <code>while True</code> loop so the program continuously selects new random LEDs and gives them new random colors, creating the sparkling effect <span class="ent">❸</span>. In this <code>while True</code> loop, build up the details of the random LED. First, the LED’s position is selected using random integers for the x- and y-coordinates on the display. The x position is a random value between 0 and 7 <span class="ent">❹</span> that’s stored in a variable named <code>x</code>. The y value is also a random value between 0 and 7, and it’s stored in a variable named <code>y</code> <span class="ent">❺</span>. Although you have eight LEDs across and down, in programming we start numbering from zero, so the first LED is in position 0, and the second is in position 1. This means that the eighth LED is number 7.</p>&#13;
<p class="indent">Second, create variables for red, green, and blue, which the program will then combine at random to create the LED’s random color. Store the RGB values in the variables <code>r</code>, <code>g</code>, and <code>b</code> <span class="ent">❻</span> <span class="ent">❼</span> <span class="ent">❽</span>.</p>&#13;
<p class="indent">Finally, combine all these values and write them to the LEDs with <code>sense.set_pixel()</code> <span class="ent">❾</span> followed by the <code>x</code>, <code>y</code>, <code>r</code>, <code>g</code>, and <code>b</code> variables. When the program runs, it will choose a random value for each of those five variables. Finish by adding a small pause <span class="ent">❿</span> before the program loops. Save and run the program, and enjoy the light show!</p>&#13;
<h4 class="h4" id="ch14lev2sec6">Creating an Image with the LED Display</h4>&#13;
<p class="noindent">Images are made up of pixels, which you can think of as tiny dots of color. If you treat each individual LED on the Sense HAT display as a pixel, you can create an 8 × 8 pixel image, as shown in <a href="ch14.xhtml#ch14fig05">Figure 14-5</a>.</p>&#13;
<div class="image"><img alt="Image" src="../images/14fig05.jpg"/></div>&#13;
<p class="figcap" id="ch14fig05"><strong>FIGURE 14-5</strong> An 8 × 8 pixel drawing</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_252"/>In this program, you’ll use an array to hold the position and color of each LED. An <em>array</em> is a list that uses more than one line. Like a list, an array is used for holding data, which can be numbers, strings, or symbols. For example, <code>shopping = ['eggs', 'chocolate', 'bread']</code> is a list. You enclose the lists in square brackets, <code>[ ]</code>, and can select any item in the list by referring to its index number. As you know, the item in the first position (eggs) is 0, the next item (chocolate) is 1, then 2, and so on.</p>&#13;
<p class="indent">Your array will contain 64 entries, one for each LED. This way, you can control each LED individually, turning it on or off and setting the color. For simplicity, the array is divided into eight lines consisting of eight entries each, mimicking the layout of the LED display. Start a new Python file and save it as <em>face.py</em>. Enter the program code in <a href="ch14.xhtml#ch14ex06">Listing 14-6</a> to create a smiley face emoji.</p>&#13;
<pre>   <span class="codeorg">from</span> sense_hat <span class="codeorg">import</span> SenseHat&#13;
   sense = SenseHat()&#13;
<span class="ent">❶</span> R = [255, 0, 0] <span class="codered"># Red</span>&#13;
<span class="ent">❷</span> O = [0, 0, 0] <span class="codered"># Black or off</span>&#13;
<span class="ent">❸</span> B = [0, 0, 255] <span class="codered"># Blue</span>&#13;
<span class="ent">❹</span> Y = [255, 255, 0] <span class="codered"># Yellow</span> &#13;
<span class="ent">❺</span> face = [&#13;
<span class="ent">❻</span> O, O, O, Y, Y, O, O, O,&#13;
   O, Y, Y, Y, Y, Y, Y, O,&#13;
   O, Y, B, Y, Y, B, Y, O,&#13;
   O, Y, Y, Y, Y, Y, Y, O,&#13;
   O, Y, Y, Y, Y, Y, Y, O,&#13;
   O, Y, Y, R, R, Y, Y, O,&#13;
   O, O, Y, Y, Y, Y, O, O,&#13;
   O, O, O, Y, Y, O, O, O&#13;
   ] &#13;
<span class="ent">❼</span> sense.set_pixels(face)</pre>&#13;
<p class="caption"><a id="ch14ex06"/><strong>LISTING 14-6</strong> Drawing a smiley face emoji</p>&#13;
<p class="indent">Start the program by importing the <code>SenseHat</code> module. Then assign RGB values to four color variables: <code>R</code> for red <span class="ent">❶</span>, <code>O</code> for black <span class="ent">❷</span>, <code>B</code> for blue <span class="ent">❸</span>, and <code>Y</code> for yellow <span class="ent">❹</span>. To create black as we see it, you have to turn off all the color by setting the RGB to 0, 0, 0 <span class="ent">❷</span>. Of course, you can also adjust the RGB values to create your own customized colors for the face.</p>&#13;
<p class="indent">Next, create an array called <code>face</code> <span class="ent">❺</span> to hold the color and position of each LED. Populate the array with the proper color variables <span class="ent">❻</span>. Each of the list’s eight lines contains eight individual entries. Typing <code>B, B, B, B, B, B, B, B</code>, for example, would set the top line of LEDs to blue, because the variable <code>B</code> represents the RGB value for blue.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_253"/>Note that the final line of the array doesn’t end with a comma. This indicates that it’s the end of the array, and Python should expect no more values. Close the array with a closing square bracket.</p>&#13;
<p class="indent">Finally, tell Python to write the elements in the array to the LED display <span class="ent">❼</span>. This turns on each LED with the relevant color, building up the image.</p>&#13;
<p class="indent">Save and run the program. You’ll see a smiley face appear on the Sense HAT display, as shown in <a href="ch14.xhtml#ch14fig06">Figure 14-6</a>.</p>&#13;
<div class="image"><img alt="Image" src="../images/14fig06.jpg"/></div>&#13;
<p class="figcap" id="ch14fig06"><strong>FIGURE 14-6</strong> Smiley face displayed on the Sense HAT</p>&#13;
<p class="indent">Have a go at creating another face—or maybe an animal, car, plane, or tree. You may find it helpful to draw your image ahead of time by shading in squares in a similar 8 × 8 square grid.</p>&#13;
<p class="indent"><a href="ch14.xhtml#ch14fig07">Figure 14-7</a> shows some examples. Can you guess what they are?</p>&#13;
<div class="image"><img alt="Image" src="../images/14fig07.jpg"/></div>&#13;
<p class="figcap" id="ch14fig07"><strong>FIGURE 14-7</strong> Try displaying one of these icons on your Sense HAT.</p>&#13;
<h4 class="h4" id="ch14lev2sec7">Creating Images with the Grid Draw Program</h4>&#13;
<p class="noindent">Creating images by using an array is fun but can be time-consuming. Using an array can also become frustrating if you’re trying to draw something precisely. Another way to create images is to use 8x8GridDraw, an interactive program designed to make creating images on Sense HAT a lot easier.</p>&#13;
<p class="indent">Once installed, the 8x8GridDraw program allows you to do the following:</p>&#13;
<ul>&#13;
<li class="noindent">Create an image on an 8 × 8 grid and write it directly to the LED display.</li>&#13;
<li class="noindent">Choose from nine colors.</li>&#13;
<li class="noindent">Export the image as a set of code, which you can add to your Python program.</li>&#13;
<li class="noindent">Export and save the image as a PNG file.</li>&#13;
<li class="noindent"><span epub:type="pagebreak" id="page_254"/>Rotate the image on the LED display.</li>&#13;
<li class="noindent">Add new frames to create a simple animation.</li>&#13;
</ul>&#13;
<p class="indent">This project will be slightly more involved than those you’ve done so far in this chapter, so I’ll walk you through it step-by-step:</p>&#13;
<ol>&#13;
<li class="noindent"><strong>Install the software:</strong> To install the software, open the terminal window and enter the following:&#13;
<pre><span class="codegreen">pi@raspberrypi</span>:- <span class="codeblue">$</span> <span class="codestrong1">sudo pip3 install pypng</span></pre>&#13;
<p class="indent">This installs the software library, which enables you to export and save your image as a small 8 × 8 pixel PNG file.</p>&#13;
<p class="indent">Next, install the main program by entering this command:</p>&#13;
<pre><span class="codegreen">pi@raspberrypi</span>:- <span class="codeblue">$</span> <span class="codestrong1">git clone https://github.com/topshed/RPi_8x8GridDraw</span></pre>&#13;
<p class="indent">This downloads the required files to a new folder. Once completed, you’ll have a new folder that contains several programs related to 8x8GridDraw.</p></li>&#13;
<li class="noindent"><strong>Create an image:</strong> Let’s have a go at creating an image. First, you need to start the program. Return to the terminal and enter the following: &#13;
<pre><span class="codegreen">pi@raspberrypi</span>:- <span class="codeblue">$</span> <span class="codestrong1">cd RPi_8x8GridDraw</span></pre>&#13;
<p class="indent">This command navigates to the program folder for 8x8Grid-Draw. To run the program, enter this:</p>&#13;
<pre><span class="codegreen">pi@raspberrypi</span>:- <span class="codeblue">$</span> <span class="codestrong1">python3 8x8grid-sense.py</span></pre>&#13;
<p class="indent">This loads the main window, shown in <a href="ch14.xhtml#ch14fig08">Figure 14-8</a>.</p>&#13;
<div class="image"><img alt="Image" src="../images/14fig08.jpg"/></div>&#13;
<p class="figcap" id="ch14fig08"><strong>FIGURE 14-8</strong> The Sense HAT Grid Editor</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_255"/>Clicking a circle on the grid will fill the square surrounding it with color. To change the color, select a new color from the right side. To turn off an LED, double-click the square, and it will return to the original transparent outline. You draw images by filling particular squares with chosen colors. Go ahead and create a simple image.</p></li>&#13;
<li class="noindent"><strong>Display the image:</strong> Once you have created your image (like the tree in <a href="ch14.xhtml#ch14fig09">Figure 14-9</a>), you can write the image into your Sense HAT. Locate and then click the <strong>Play on LEDs</strong> button. Your image will show up on the Sense HAT’s LEDs. Check it out!&#13;
<div class="image"><img alt="Image" src="../images/14fig09.jpg"/></div>&#13;
<p class="figcap" id="ch14fig09"><strong>FIGURE 14-9</strong> Click the <strong>Play on LEDs</strong> button to make your drawing appear on the Sense HAT.</p></li>&#13;
<li class="noindent"><strong>Export the image:</strong> Once you have completed your image, you can export it. You could export it as code and then add it to your other programs, but it’s much easier to export it as a PNG, so that’s what you’ll do now.&#13;
<p class="indent">Click the <strong>Export to PNG</strong> button on the GUI and save the file in the <em>RPi_8 x 8 GridDraw</em> folder (<a href="ch14.xhtml#ch14fig10">Figure 14-10</a>). To load the image, it needs to be located in the same folder as your program code, so you may need to copy your image from this folder into the same folder where your Python program code is saved.</p>&#13;
<div class="image"><img alt="Image" src="../images/14fig10.jpg"/></div>&#13;
<p class="figcap" id="ch14fig10"><strong>FIGURE 14-10</strong> Exporting your file as a PNG will save it in the <em>RPi_8x8 GridDraw</em> folder.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_256"/>This will produce a small 8 × 8 PNG file, which you can load onto the Sense HAT with the following line of code written into your Python program:</p>&#13;
<pre>sense.load_image(<span class="codegreen1">"</span><span class="codegreen2">name_of_your_file.png</span><span class="codegreen1">"</span>)</pre></li>&#13;
</ol>&#13;
<p class="indent">Now that you can create drawings, you have everything you need to program a game of rock, paper, scissors, lizard, Spock.</p>&#13;
<h3 class="h3" id="ch14lev1sec4">BUILDING THE ROCK, PAPER, SCISSORS, LIZARD, SPOCK GAME</h3>&#13;
<div class="note">&#13;
<p class="notet"><strong>NOTE</strong></p>&#13;
<p class="notep"><em>This variation on the game was originally created by Sam Kass and Karen Bryla (</em><a href="http://www.samkass.com/theories/rpssl.html">http://www.samkass.com/theories/rpssl.html</a><em>)</em>.</p>&#13;
</div>&#13;
<p class="noindent">You’re probably already familiar with rock, paper, scissors. You and an opponent play by forming a rock, a piece of paper, or a pair of scissors with your hands; each object beats—and gets beaten by—a different one. The issue with the original game is that it’s too easy to predict the outcome (because only three possible results exist, other than a tie). During season two of the popular TV show <em>The Big Bang Theory</em>, the character Sheldon makes the classic game more exciting and challenging by using an alternative version that adds Spock and lizard to the three original choices.</p>&#13;
<p class="indent">To play Spock, you use the Vulcan hand sign from the TV series <em>Star Trek</em>. To play a lizard, you make your hand into a sock-puppet-like mouth.</p>&#13;
<p class="indent">Wondering how they work? Well, Spock smashes scissors and vaporizes the rock. However, he is poisoned by the lizard and disproved by the paper. The lizard poisons Spock and eats the paper, but it is crushed by the rock and decapitated by the scissors. Gruesome! Adding these options creates more possible combinations and makes the overall game much more exciting and less predictable. <a href="ch14.xhtml#ch14fig11">Figure 14-11</a> shows all of the hand signs (arrows are pointing at the move that is defeated by the move at a given arrow’s origin).</p>&#13;
<p class="indent">In our version of the game, RPSLS, the player will select one of the five options by scrolling through the five images with the Sense HAT’s joystick. The player presses the joystick in, like a button, to select an option. Then the Raspberry Pi will randomly select its option. The game will compare both options and choose a winner. The player will then be able to choose to play another game or quit.</p>&#13;
<div class="image"><img alt="Image" src="../images/14fig11.jpg"/></div>&#13;
<p class="figcap" id="ch14fig11"><span epub:type="pagebreak" id="page_257"/><strong>FIGURE 14-11</strong> How to play rock, paper, scissors, lizard, Spock</p>&#13;
<p class="indent">First you need an 8 × 8 PNG image for each option. You can either make these yourself or download the example ones used in this chapter from <em><a href="https://www.nostarch.com/raspiforkids/">https://www.nostarch.com/raspiforkids/</a></em> and save them in the folder you’re using for this project. Note that if you create your own images, you’ll need to save them as <em>0.png</em>, <em>1.png</em>, <em>2.png</em>, <em>3.png</em>, and <em>4.png</em>. These are the image filenames the program will look for.</p>&#13;
<h4 class="h4" id="ch14lev2sec8">Importing Modules and Creating the Variables</h4>&#13;
<p class="noindent">Open your Python editor and add the code in <a href="ch14.xhtml#ch14ex07">Listing 14-7</a>. Save the program as <em>RPSLS.py</em>, and make sure the program file is saved into the same folder as the images are saved in, or the program won’t know where to find them.</p>&#13;
<pre><span class="ent">❶</span> <span class="codeorg">from</span> sense_hat <span class="codeorg">import</span> SenseHat&#13;
   <span class="codeorg">import</span> random&#13;
   <span class="codeorg">import</span> time&#13;
<span class="ent">❷</span> <span class="codeorg">global</span> playersChoice&#13;
<span class="ent">❸</span> <span class="codeorg">global</span> count&#13;
<span class="ent">❹</span> <span class="codeorg">global</span> computer_choice&#13;
<span class="ent">❺</span> gameRunning = <span class="codeorg">True</span></pre>&#13;
<p class="caption"><a id="ch14ex07"/><strong>LISTING 14-7</strong> Adding the modules and global variables</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_258"/>Begin the program by importing the <code>SenseHat</code> module <span class="ent">❶</span> that enables the player to control the joystick, scroll text, and display images on the LED matrix. Then import the <code>random</code> module to enable the Raspberry Pi to select a random number and the <code>time</code> module to add small pauses.</p>&#13;
<p class="indent">Next, set up three global variables, which you’ll be able to access from anywhere in the program (unlike local variables defined inside a particular function, which can be accessed only within that function).</p>&#13;
<p class="indent">The first variable <span class="ent">❷</span> stores the player’s choice of rock, paper, scissors, lizard, or Spock. You use the second variable <span class="ent">❸</span> to store the amount of time the Raspberry Pi has to make its move. The number will be random, creating the illusion that the Raspberry Pi is taking its time to select its choice. You use the next variable <span class="ent">❹</span> to store the Raspberry Pi’s choice for later use. Finally, create a variable named <code>gameRunning</code> <span class="ent">❺</span> to hold the status of the game. The value <code>True</code> means the game is currently running.</p>&#13;
<h4 class="h4" id="ch14lev2sec9">Preparing the Game</h4>&#13;
<p class="noindent">The code in <a href="ch14.xhtml#ch14ex08">Listing 14-8</a> prepares the Sense HAT for the RPSLS game.</p>&#13;
<pre>   <span class="codered"># Prepare Sense Hat</span>&#13;
<span class="ent">❶</span> sense = SenseHat()&#13;
<span class="ent">❷</span> sense.load_image(<span class="codegreen1">"0.png"</span>)&#13;
<span class="ent">❸</span> sense.low_light = <span class="codeorg">True</span> <span class="codered"># Save your eyes!</span>&#13;
<span class="ent">❹</span> playersChoice = 0&#13;
</pre>&#13;
<p class="caption"><a id="ch14ex08"/><strong>LISTING 14-8</strong> Creating the initial game settings</p>&#13;
<p class="indent">First, initialize the Sense HAT <span class="ent">❶</span> and load the first image for the game <span class="ent">❷</span>. Then reduce the brightness of the LEDs <span class="ent">❸</span>. This is useful if the LEDs are too bright; dimmer lights are better for your eyes. You can adjust this later to suit your tastes.</p>&#13;
<p class="indent">For the start of the game, set <code>playersChoice</code> to <code>0</code> <span class="ent">❹</span>. This is the first option in the list that the player can select. Remember that in programming, the first option in a list is in position <code>0</code>. The <code>PlayersChoice</code> variable will hold a number between <code>0</code> and <code>4</code> that represents the player’s option: <code>0</code> is rock, <code>1</code> is Spock, <code>2</code> is paper, <code>3</code> is lizard, and <code>4</code> is scissors. The player will get to select an option when the game begins by scrolling through the options with the joystick.</p>&#13;
<h4 class="h4" id="ch14lev2sec10">Setting Up the Player’s Choice</h4>&#13;
<p class="noindent">Now, you’ll create the function that will convert the player’s choice from a number into its corresponding rock, paper, scissors, lizard, or Spock image. Enter the code in <a href="ch14.xhtml#ch14ex09">Listing 14-9</a>.</p>&#13;
<pre>   <span epub:type="pagebreak" id="page_259"/><span class="codered"># Converts the Number into the choice i.e. lizard, spock, etc.</span>&#13;
<span class="ent">❶</span> <span class="codeorg">def</span> <span class="codeblue1">number_to_name</span>(number):&#13;
       <span class="codeorg">if</span> number == 0:&#13;
           <span class="codeorg">return</span> <span class="codegreen1">"Rock"</span>&#13;
    <span class="ent">❷</span> <span class="codeorg">elif</span> number == 1:&#13;
           <span class="codeorg">return</span> <span class="codegreen1">"Spock"</span>&#13;
       <span class="codeorg">elif</span> number == 2:&#13;
           <span class="codeorg">return</span> <span class="codegreen1">"Paper"</span>&#13;
       <span class="codeorg">elif</span> number == 3:&#13;
           <span class="codeorg">return</span> <span class="codegreen1">"Lizard"</span>&#13;
       <span class="codeorg">elif</span> number == 4:&#13;
           <span class="codeorg">return</span> <span class="codegreen1">"Scissors"</span> &#13;
</pre>&#13;
<p class="caption"><a id="ch14ex09"/><strong>LISTING 14-9</strong> Setting up the player’s choice</p>&#13;
<p class="indent">Create and name the function <span class="ent">❶</span> that checks which option the player has selected with the joystick (the option is stored as a number, and then that number is converted into the name of the option).</p>&#13;
<p class="indent">This function uses conditionals <span class="ent">❷</span> to check each number and then assigns the name of the option for each number that’s selected. The first conditional checks whether the value <code>0</code> is selected and returns <code>Rock</code> if it is. If <code>0</code> isn’t selected, the program checks for the number <code>1</code>. If <code>1</code> is selected, the program returns <code>Spock</code>, and if it isn’t, the program checks for the number <code>2</code>. The program continues until it has checked for every possible selection.</p>&#13;
<h4 class="h4" id="ch14lev2sec11">Selecting an Object</h4>&#13;
<p class="noindent">The next section of the program creates a function that holds the main gameplay mechanics. The player will use the Sense HAT’s joystick to scroll through the five options. The LED display will show each option as the player scrolls through. To select one, the player must click using the joystick. Add the code in <a href="ch14.xhtml#ch14ex10">Listing 14-10</a> to your program.</p>&#13;
<pre><span class="codeorg">def</span> <span class="codeblue1">mainGame</span>():&#13;
    <span class="codered">### PLAYER SELECTION ###</span>&#13;
    <span class="codered"># Loops while running variable is True</span>&#13;
    running = <span class="codeorg">True</span>&#13;
 <span class="ent">❶</span> <span class="codeorg">global</span> playersChoice&#13;
    <span class="codeorg">global</span> computer_choice&#13;
    <span class="codeorg">while</span> running == <span class="codeorg">True</span>:&#13;
     <span class="ent">❷</span> sense.set_rotation(90)&#13;
     <span class="ent">❸</span> <span class="codeorg">for</span> event <span class="codeorg">in</span> sense.stick.get_events():     &#13;
        <span class="ent">❹</span> <span class="codeorg">if</span> event.action == <span class="codegreen">"pressed"</span> <span class="codeorg">and</span> playersChoice &lt; 5:&#13;
           <span class="ent">❺</span> <span class="codeorg">if</span> event.direction == <span class="codegreen1">"up"</span>:&#13;
                 <span class="codepurple">print</span> (playersChoice) &#13;
              <span class="ent">❻</span> sense.load_image(<span class="codepurple">str</span>(playersChoice) + <span class="codegreen1">".png"</span>)&#13;
                 playersChoice = playersChoice + 1&#13;
        <span class="ent">❼</span> <span class="codeorg">if</span> playersChoice == 5:&#13;
                playersChoice = 0    &#13;
   <span epub:type="pagebreak" id="page_260"/><span class="codered"># Checks for a 'select / Enter' Choice</span>&#13;
         <span class="codeorg">if</span> event.action == <span class="codegreen1">"pressed"</span>:&#13;
          <span class="ent">❽</span> <span class="codeorg">if</span> event.direction == <span class="codegreen1">"middle"</span>:&#13;
                running = <span class="codeorg">False</span>&#13;
             <span class="ent">❾</span> <span class="codeorg">break</span> <span class="codered"># Ends loop and moves onto main game</span>&#13;
</pre>&#13;
<p class="caption"><a id="ch14ex10"/><strong>LISTING 14-10</strong> Coding the player’s object selection</p>&#13;
<p class="indent">Begin this function by importing the global variables you created earlier <span class="ent">❶</span>. Add your <code>while running = True</code> statement, which indicates that the game is in play.</p>&#13;
<p class="indent">Rotate the image displayed on the LEDs so it’s oriented correctly with respect to the joystick <span class="ent">❷</span>. Now start checking for joystick movements <span class="ent">❸</span>, called <em>events</em> in the Sense HAT stick events.</p>&#13;
<p class="indent">First the program checks whether the joystick has been <code>pressed</code> (moved) and whether <code>playersChoice</code> is set to a value of less than 5. If the value is less than 5, the player hasn’t reached the end of the images. At the start of the program, you assigned <code>playersChoice</code> a value of 0, which means that the conditional on line <span class="ent">❹</span> is <code>True</code> when you first run the program, because 0 is less than 5, so the next lines of code run.</p>&#13;
<p class="indent">Now check whether the joystick has been moved up, using <code>event.direction == 'up'</code> <span class="ent">❺</span>. The line below prints out the name of the option that the player selected. You won’t normally see this when playing the game, as RPSLS is designed to be stand-alone. However, this line is useful for testing that the selection part of the program is working correctly.</p>&#13;
<p class="indent">The program then loads the first image file, <em>0.png</em>, which is the image of the rock <span class="ent">❻</span>. The next line increases the <code>playersChoice</code> variable by 1, which loads <em>1.png</em> the next time the joystick is moved up. Eventually, the <code>playersChoice</code> value will reach the top value of 5, the last option in the list, Spock <span class="ent">❼</span>. At this point, there are no other options to select in the list, so <code>playersChoice</code> returns to 0, loading the rock image again. This loop continues until the player selects an object by pressing the middle button with the joystick <span class="ent">❽</span>; this acts like pressing <span class="small">ENTER</span> and therefore selects the player’s choice of option. This sets the <code>running</code> variable to <code>False</code>, which stops the loop. The break at line <span class="ent">❾</span> moves the program into the next section.</p>&#13;
<h4 class="h4" id="ch14lev2sec12">Notifying the Player of Their Option Choice</h4>&#13;
<p class="noindent">Once the player has selected an object, the code in <a href="ch14.xhtml#ch14ex11">Listing 14-11</a> will notify them of their option choice.</p>&#13;
<pre>   <span epub:type="pagebreak" id="page_261"/><span class="codered"># Message for player about their choice</span>&#13;
<span class="ent">❶</span> <span class="codepurple">print</span> (<span class="codegreen1">"Your Choice is"</span>, playersChoice)&#13;
   number = playersChoice - 1&#13;
<span class="ent">❷</span> playerMessage = number_to_name(number)&#13;
   sense.set_rotation(0)&#13;
</pre>&#13;
<p class="caption"><a id="ch14ex11"/><strong>LISTING 14-11</strong> Notifying the player of their choice</p>&#13;
<p class="indent">The line at <span class="ent">❶</span> is an optional test to see whether the program has selected the correct image file; remove it once you are happy that the program is running correctly by commenting out that line with a hash mark. The line at <span class="ent">❷</span> runs your object number through the <code>number_to</code><code>_name(number)</code> function, which you wrote in <a href="ch14.xhtml#ch14ex09">Listing 14-9</a>. This converts your number into the name of the option and returns that name so it can be scrolled as text across the LEDs. This name of the option is stored in the <code>playerMessage</code> variable.</p>&#13;
<h4 class="h4" id="ch14lev2sec13">Coding the Raspberry Pi’s Selection</h4>&#13;
<p class="noindent">Now it’s the Raspberry Pi’s turn to select its object. Copy the code from <a href="ch14.xhtml#ch14ex12">Listing 14-12</a> into your program.</p>&#13;
<pre>   <span class="codered">### RASPBERRY PI SELECTION ###</span>&#13;
   <span class="codered"># Raspberry Pi selects a random choice from the options</span>&#13;
<span class="ent">❶</span> count = random.randrange(5,50)&#13;
   sense.set_rotation(90)&#13;
   <span class="codeorg">while</span> count &gt; 1:&#13;
    <span class="ent">❷</span> computer_choice = random.randrange(0,5)&#13;
       <span class="codered"># print (computer_choice)</span>&#13;
       time.sleep(0.1)&#13;
    <span class="ent">❸</span> sense.load_image(<span class="codepurple">str</span>(computer_choice) + <span class="codegreen1">".png"</span>)&#13;
    <span class="ent">❹</span> count = count - 1&#13;
</pre>&#13;
<p class="caption"><a id="ch14ex12"/><strong>LISTING 14-12</strong> Coding the Raspberry Pi’s object selection</p>&#13;
<p class="indent">Use the <code>random.randrange()</code> function <span class="ent">❶</span> to get the program to generate a number between 5 and 50. Then store this number in a variable named <code>count</code>. This <code>count</code> value creates a delay of 0.10 to 5 seconds between the player selecting their option and the Raspberry Pi’s selection. During this delay, the five images are repeatedly displayed and changed, creating the illusion that the Raspberry Pi is scrolling through the options and thinking about which option to choose.</p>&#13;
<p class="indent">The images are selected on line <span class="ent">❷</span>, where the program picks a random number between 0 and 5. Each number is associated with an image file. On line <span class="ent">❸</span>, make the <code>computer_choice</code> value into a string and add the <code>.png</code> extension so that the name you pass to <code>sense.load_image()</code> matches the name of one of the image files. That image file is loaded.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_262"/>Use a small pause to allow the player to view the image before the loop runs again and displays another image. Subtract a value of 1 from <code>count</code> <span class="ent">❹</span> to keep the count decreasing; this ensures that the delay will eventually reach 0 and run out.</p>&#13;
<p class="indent">If the <code>count</code> value is greater than 1, the loop continues, an image is displayed, and 1 is subtracted from <code>count</code>. This continues until the count reaches 0. Then the current image displayed is selected as the Raspberry Pi’s choice; it has made its selection.</p>&#13;
<h4 class="h4" id="ch14lev2sec14">Displaying the Raspberry Pi’s Choice</h4>&#13;
<p class="noindent">In the next section of the program, shown in <a href="ch14.xhtml#ch14ex13">Listing 14-13</a>, you tell the player which option the Raspberry Pi selected by showing it on the Sense HAT.</p>&#13;
<pre>   <span class="codered"># Message for player about the Raspberry Pi's choice</span>&#13;
<span class="ent">❶</span> number = computer_choice&#13;
<span class="ent">❷</span> sense.set_rotation(0)&#13;
<span class="ent">❸</span> sense.show_message(<span class="codegreen1">"Raspberry Pi = "</span>, text_colour=[0, 150, 255],&#13;
   scroll_speed = 0.06)&#13;
   sense.set_rotation(90)&#13;
<span class="ent">❹</span> sense.load_image(<span class="codepurple">str</span>(computer_choice) + <span class="codegreen1">".png"</span>)&#13;
<span class="ent">❺</span> time.sleep(1)&#13;
   sense.set_rotation(0)&#13;
</pre>&#13;
<p class="caption"><a id="ch14ex13"/><strong>LISTING 14-13</strong> Displaying the Raspberry Pi’s selection</p>&#13;
<p class="indent">Store the program’s choice in the <code>number</code> variable <span class="ent">❶</span> so you can use <code>number</code> to represent the Pi’s choice in the rest of the program.</p>&#13;
<p class="indent">Set the image rotation to the correct angle <span class="ent">❷</span>. Then scroll a message across the LED display, announcing the Raspberry Pi’s choice <span class="ent">❸</span>. The code <code>text_colour=[0, 150, 255]</code>, where the three values represent the RGB value, sets the color of the text. You can also adjust the speed of the scroll to any value between 0 and 1.</p>&#13;
<p class="indent">Next, load the image corresponding to the number that the Raspberry Pi selected <span class="ent">❹</span>. If, for example, the Raspberry Pi selected option number 3, the program would load and display the image of the lizard. Add a short pause <span class="ent">❺</span> before the program calculates the winner of the game.</p>&#13;
<h4 class="h4" id="ch14lev2sec15">Choosing a Winner</h4>&#13;
<p class="noindent">The final part of the <code>mainGame()</code> function, shown in <a href="ch14.xhtml#ch14ex14">Listing 14-14</a>, compares the player’s option with the Raspberry Pi’s option and calculates the winner of that round. This uses a branch of math called <em>modulus</em>.</p>&#13;
<pre>   <span epub:type="pagebreak" id="page_263"/><span class="codered">### WINNER CALCULATED ###</span>&#13;
<span class="ent">❶</span> result = (<span class="codepurple">int</span>(computer_choice - (playersChoice-1))) % 5&#13;
  &#13;
<span class="ent">❷</span> <span class="codeorg">if</span> result == 0:&#13;
   <span class="ent">❸</span> sense.show_message(<span class="codegreen1">"Player and Pi Tie!"</span>, text_colour=&#13;
      [0, 0, 255], scroll_speed = 0.08)&#13;
   &#13;
<span class="ent">❹</span> <span class="codeorg">elif</span> result &gt;=3:&#13;
   <span class="ent">❺</span> sense.show_message(<span class="codegreen1">"Player Wins!"</span>, text_colour=&#13;
      [0, 255, 0], scroll_speed = 0.08)&#13;
    &#13;
<span class="ent">❻</span> <span class="codeorg">else</span>:&#13;
   <span class="ent">❼</span> sense.show_message(<span class="codegreen1">"Raspberry Pi Wins!"</span>, text_colour=&#13;
      [255, 0, 0], scroll_speed = 0.08)##??&#13;
</pre>&#13;
<p class="caption"><a id="ch14ex14"/><strong>LISTING 14-14</strong> Calculating the winner</p>&#13;
<p class="indent">First, create a variable called <code>result</code> <span class="ent">❶</span> to store a particular value, which you’ll use to determine who won. The math behind the calculation is interesting. In general, this line subtracts the value that corresponds to the Pi’s option choice away from the player’s choice value (which already has 1 subtracted from it). For example, if the Pi’s value is 5 and the player’s value is 3, you’d calculate 5 - (3 - 1) to 5 - 2, which equals 3. The modulo of this number by 5 is then found; the <em>modulo</em> is the remainder from the division. In this example, the answer would be 2, because 3 goes into 5 once with a remainder of 2. The number 2 is then used to determine whether the player or the Pi has won the game.</p>&#13;
<p class="indent">If the <code>result</code> value is equal to 0, both players picked the same option, and the game ends in a tie <span class="ent">❷</span>. Make the message <code>Player and Pi Tie!</code> scroll across the LED display <span class="ent">❸</span>. Again, you can adjust the color and speed of the text scroll.</p>&#13;
<p class="indent">If the value of <code>result</code> is greater than or equal to 3, your option beats the Raspberry Pi’s option, and you win the game <span class="ent">❹</span>. Make the message <code>Player Wins!</code> scroll across the LED display <span class="ent">❺</span>.</p>&#13;
<p class="indent">The final possible outcome of the game is that the Raspberry Pi’s choice beats yours <span class="ent">❻</span>. This is the case if anything other than the first two possibilities occurs. If this happens, scroll a message telling the player that the Raspberry Pi wins. You can customize the color and the speed of the message <span class="ent">❼</span>.</p>&#13;
<p class="indent">This completes all of the code for the <code>mainGame()</code> function that controls the essential gameplay mechanics of rock, paper, scissors, lizard, Spock. To recap: the function enables the player to select an option and then makes the Raspberry Pi select an option (after a delay, to make it seem like the Pi is thinking). It then compares the <span epub:type="pagebreak" id="page_264"/>two options to calculate the winner of the game and scrolls a message updating the player on the outcome.</p>&#13;
<h4 class="h4" id="ch14lev2sec16">Starting a New Game</h4>&#13;
<p class="noindent">You’re almost done! <a href="ch14.xhtml#ch14ex15">Listing 14-15</a> is the initial welcome section of the game. It introduces the game and then runs the <code>mainGame()</code> function (whereas before you were simply defining the <code>mainGame()</code> function). After a round has finished, it also gives the player the option to play again by moving the joystick up or to end the game by moving the joystick down.</p>&#13;
<pre><span class="codered">### START THE GAME ##</span><span class="codered">#</span>&#13;
sense.show_message(<span class="codegreen1">"Welcome to R.P.S.L.S!"</span>, text_colour=[155, 100,&#13;
30], scroll_speed = 0.08)&#13;
sense.show_message(<span class="codegreen1">"Please use 'Up' to select"</span>, text_colour=[155,&#13;
255, 255], scroll_speed = 0.05)&#13;
sense.load_image(<span class="codegreen1">"0.png"</span>)&#13;
</pre>&#13;
<p class="caption"><a id="ch14ex15"/><strong>LISTING 14-15</strong> Starting the game</p>&#13;
<p class="indent">Begin by adding the welcome message. You can customize this, but in my experience, I’ve found that simple messages work best, since most players just want the game to begin. Then add a second message that tells the player how to select an option. Again, feel free to adjust the color and scroll speed for each message. If at first you want a slower scroll speed, try setting it to 0.60 instead. Once you are familiar with the game, you’ll want to just get on with it and not wait for slow scrolling text.</p>&#13;
<p class="indent">Then add <code>sense.load_image("0.png")</code>, the code that loads the first image, and shows it on the LED display. This is your rock image.</p>&#13;
<p class="indent">These three lines will run only the first time the program is executed, because you don’t need to have the welcome message and instructions show every time you play the game, just the first time it loads. Therefore, keep these lines of code outside the <code>mainGame()</code> function.</p>&#13;
<h4 class="h4" id="ch14lev2sec17">Play Again?</h4>&#13;
<p class="noindent">End your program with code that checks whether the player wants to play again. Add the code in <a href="ch14.xhtml#ch14ex16">Listing 14-16</a>.</p>&#13;
<pre><span class="ent">❶</span> <span class="codeorg">while</span> gameRunning == <span class="codeorg">True</span>:&#13;
    <span class="ent">❷</span> play_again = 1 &#13;
    <span class="ent">❸</span> mainGame()&#13;
       sense.show_message(<span class="codegreen1">"Play Again?"</span>, text_colour=[255, 255, 255],&#13;
       scroll_speed = 0.08)&#13;
<span epub:type="pagebreak" id="page_265"/><span class="ent">❹</span> <span class="codeorg">while</span> play_again == 1:&#13;
    <span class="ent">❺</span> <span class="codeorg">for</span> event <span class="codeorg">in</span> sense.stick.get_events():&#13;
           <span class="codeorg">if</span> event.action == <span class="codegreen1">"pressed"</span>:&#13;
               <span class="codeorg">if</span> event.direction == <span class="codegreen1">"up"</span>:&#13;
                <span class="ent">❻</span> play_again = 0&#13;
             &#13;
       <span class="ent">❼</span> <span class="codeorg">if</span> event.action == <span class="codegreen1">"pressed"</span>:&#13;
              <span class="codeorg">if</span> event.direction == <span class="codegreen1">"down"</span>:             &#13;
               <span class="ent">❽</span> sense.show_message(<span class="codegreen1">"Bye Bye"</span>, text_colour=&#13;
                  [255, 255, 255], scroll_speed = 0.08)&#13;
               <span class="ent">❾</span> play_again = 0&#13;
               <span class="ent">❿</span> gameRunning = <span class="codeorg">False</span>&#13;
</pre>&#13;
<p class="caption"><a id="ch14ex16"/><strong>LISTING 14-16</strong> Starting a new game</p>&#13;
<p class="indent">For this, use a <code>while</code> loop named <code>gameRunning</code>, which you set to <code>True</code>; as long as the variable is set to <code>True</code>, the game will keep running <span class="ent">❶</span>.</p>&#13;
<p class="indent">Now create another variable to hold a value that indicates whether the player wants to play again <span class="ent">❷</span>. Use a value of 1 to signify the player wants to start a new game. A value of 0 would mean that the player doesn’t want to play again.</p>&#13;
<p class="indent">The next line of code calls the <code>mainGame()</code> function, which holds the main gameplay elements and starts the game. After the first game is completed, a message scrolls across the LED display asking the player whether they wish to play again <span class="ent">❸</span>. Now, because the <code>play_again</code> variable is set to 1 <span class="ent">❹</span>, the program waits for the player to move the joystick <span class="ent">❺</span>. If the player moves the joystick up, the variable <code>play_again</code> is set to a value of 0 <span class="ent">❻</span>. This breaks the <code>play_again</code> loop <span class="ent">❹</span> and returns to the main loop, which loads the <code>mainGame()</code> function <span class="ent">❸</span> and begins the game again.</p>&#13;
<p class="indent">If the player moves the joystick down <span class="ent">❼</span>, a message appears, informing the player that the game is ending <span class="ent">❽</span>. The <code>play_again</code> variable is reset to 0 <span class="ent">❾</span> and, most important, the <code>gameRunning</code> variable is set to <code>False</code> <span class="ent">❿</span>. So when the program loops back to the beginning, <code>gameRunning</code> no longer has a value of <code>True</code>, which means the <code>mainGame()</code> function doesn’t load, and the program ends. To play the game again, you’d have to start up the entire program by pressing F5.</p>&#13;
<p class="indent">This completes the program code for rock, paper, scissors, lizard, Spock. Double-check that your five images are saved into the same folder as the program code, and then give it a test run. A lot of indentation levels need to be exact, so ensure that you double-check them if your program doesn’t run the way you expect it to. Have fun!</p>&#13;
<h3 class="h3" id="ch14lev1sec5"><span epub:type="pagebreak" id="page_266"/>WRAPPING UP</h3>&#13;
<p class="noindent">Once you have RPSLS working, you can customize your version of the game. Why not try creating your own images for rock, paper, scissors, lizard, Spock? Add sound effects or a scoring system. Adapt the code so that you can play another human being rather than your Raspberry Pi. Also, if you want to see Sheldon in full effect, check out <a href="https://www.youtube.com/watch?v=hoV-SNpdyW8"><em>https://www.youtube.com/watch?v=hoV-SNpdyW8</em></a>.<span epub:type="pagebreak" id="page_267"/></p>&#13;


<h2 class="h2d" id="bm01"><span epub:type="pagebreak" id="page_268"/><span class="dgreen">AGES 11+</span></h2>&#13;
<h2 class="h2d1">12 Fun Projects</h2>&#13;
<p class="image1"><img alt="Image" src="../images/f0168-01.jpg"/></p>&#13;
<div class="borange">&#13;
<p class="noindentt">The Raspberry Pi<sup>®</sup> is an inexpensive, pocketsized computer that will help you build and code your own hardware projects.</p>&#13;
<p class="indent"><em>Raspberry Pi Projects for Kids</em> will show you how to harness the power of the Raspberry Pi to create 12 cool projects using simple code and common materials like a webcam, a microphone, and LED lights. Step-by-step instructions and detailed diagrams guide you through each project.</p>&#13;
<p class="indent">After a brief introduction to the Python programming language, you’ll learn how to:</p>&#13;
<p class="bulld"><img alt="Image" class="inline" src="../images/bull.jpg"/> Create an LED night-light that turns itself on and off</p>&#13;
<p class="bulld"><img alt="Image" class="inline" src="../images/bull.jpg"/> Set up a Raspberry Pi camera to take selfies and videos</p>&#13;
<p class="bulld"><img alt="Image" class="inline" src="../images/bull.jpg"/> Set up a webcam to stream video to your cell phone</p>&#13;
<p class="bulld"><img alt="Image" class="inline" src="../images/bull.jpg"/> Manipulate environments in Minecraft<sup>®</sup></p>&#13;
<p class="bulld"><img alt="Image" class="inline" src="../images/bull.jpg"/> Hijack local radio waves to play your own songs and recordings</p>&#13;
<p class="bulld"><img alt="Image" class="inline" src="../images/bull.jpg"/> Configure the Raspberry Pi to send texts to a cell phone</p>&#13;
<p class="bulld"><img alt="Image" class="inline" src="../images/bull.jpg"/> Track your family members’ locations via Wi-Fi and Bluetooth</p>&#13;
<p class="bulld"><img alt="Image" class="inline" src="../images/bull.jpg"/> Create an MP3 player</p>&#13;
<p class="bulld"><img alt="Image" class="inline" src="../images/bull.jpg"/> Set up a camera to take motion-triggered photos of wildlife</p>&#13;
<p class="bulld"><img alt="Image" class="inline" src="../images/bull.jpg"/> Control the electronics in your home with your cell phone</p>&#13;
<p class="bulld"><img alt="Image" class="inline" src="../images/bull.jpg"/> Teach the Raspberry Pi to read aloud posts from your Twitter feed</p>&#13;
<p class="bulld"><img alt="Image" class="inline" src="../images/bull.jpg"/> Play rock, paper, scissors against the Raspberry Pi</p>&#13;
<p class="indentt"><em>Raspberry Pi Projects for Kids</em> will deliver hours of fun and endless inspiration!</p>&#13;
<p class="centerd">ABOUT THE AUTHOR</p>&#13;
<p class="noindent">Dan Aldred is a computer science teacher, freelance writer, and hacker. He has championed the use of the Raspberry Pi as a tool for learning and creativity, and is a Raspberry Pi Certified Educator. Aldred led the winning team of students for the first Astro Pi competition; their code is now orbiting Earth aboard the International Space Station. He currently lives in the United Kingdom.</p>&#13;
</div>&#13;
<p class="image"><img alt="Image" src="../images/f0168-02.jpg"/></p>&#13;
<p class="noindentt"><span class="small"><strong><em>THE FINEST IN GEEK ENTERTAINMENT™</em></strong></span></p>&#13;
<p class="noindent"><a href="http://www.nostarch.com">www.nostarch.com</a></p>&#13;


<h2 class="h2">Footnote</h2>
<h3 class="h3">Chapter 9</h3>
<p class="footnote"><sup><a href="ch09.xhtml#rch09fn01" id="ch09fn01">1</a></sup> <a href="https://www.ripe.net/about-us/press-centre/understanding-ip-addressing">https://www.ripe.net/about-us/press-centre/understanding-ip-addressing</a></p>
</body></html>