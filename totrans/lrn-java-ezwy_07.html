<html><head></head><body>
<h2 class="h2" id="ch7"><span epub:type="pagebreak" id="page_147"/><span class="big"><strong>7</strong></span></h2>&#13;
<h2 class="h2a">CREATING ADVANCED GUIs AND SHARING YOUR APP</h2>&#13;
<div class="image21"><img src="../images/circle.jpg" alt="Image"/></div>&#13;
<p class="noindent">For the GUI desktop version of the Secret Messages app, we’re going to provide two large text areas that allow the user to copy and paste long messages in the GUI interface. By the end of the chapter, we’ll add a slider for key selection like the one shown in <a href="ch7.xhtml#ch7fig1">Figure 7-1</a>, which will make cracking Caesar ciphers very easy, even when the key is unknown!</p>&#13;
<div class="imagef"><span epub:type="pagebreak" id="page_148"/><img src="../images/f0148-01.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch7fig1"/>Figure 7-1: The Secret Messages encoder/decoder app we’ll build in this chapter</em></p>&#13;
<p class="indent">This version of the app is more user-friendly than the console-based app, and we’ll be able to reuse some code from <a href="ch6.xhtml#ch6">Chapter 6</a> because the algorithm for encoding and decoding messages is the same.</p>&#13;
<h3 class="h3"><a id="toc_lev118"/>Setting Up the Secret Messages GUI App Project</h3>&#13;
<p class="noindent">Open Eclipse and create a new Java project by going to <strong>File</strong> <span class="ent">▸</span> <strong>New</strong> <span class="ent">▸</span> <strong>Java Project</strong>. Name the project <span class="codestrong"><code>SecretMessagesGUI</code></span> and then click <strong>Finish</strong>. Close any open files and expand the <em>SecretMessagesGUI</em> project folder in the Package Explorer pane to find the <em>src</em> folder. Right-click the <em>src</em> folder and select <strong>New</strong> <span class="ent">▸</span> <strong>Class</strong> to create a new Java source code file. Name this <span class="codestrong"><code>SecretMessagesGUI</code></span> as well.</p>&#13;
<p class="indent">We’re going to use the Swing toolkit again, so in the New Java Class dialog, change the superclass to <code>javax.swing.JFrame</code> and select the checkbox to create a <code>main()</code> method.</p>&#13;
<p class="indent">Click <strong>Finish</strong>, and you’ll see some familiar skeleton code for the <em>SecretMessagesGUI.java</em> file. Right-click the <em>SecretMessagesGUI.java</em> file in the Package Explorer and select <strong>Open With</strong> <span class="ent">▸</span> <strong>WindowBuilder Editor</strong> to begin creating the GUI interface for the Secret Messages app.</p>&#13;
<h3 class="h3"><a id="toc_lev119"/>Designing the GUI and Naming Components</h3>&#13;
<p class="noindent">Open the WindowBuilder Editor’s Design tab. Expand the <code>javax.swing.JFrame</code> component in the Components pane and select <strong>getContentPane()</strong>. Now go to the Properties pane and change the <code>Layout</code> property to <strong>Absolute layout</strong>, as shown in <a href="ch7.xhtml#ch7fig2">Figure 7-2</a>. This will allow us to position components with pixel-perfect accuracy.</p>&#13;
<div class="imagef"><span epub:type="pagebreak" id="page_149"/><img src="../images/f0149-01.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch7fig2"/>Figure 7-2: Change the Layout property to</em> <strong><em>Absolute layout</em></strong> <em>before placing any GUI components.</em></p>&#13;
<p class="indent">Next, in the Components pane, click <strong>javax.swing.JFrame</strong>. Then, in the Properties pane, set the <code>defaultCloseOperation</code> to <strong>EXIT_ON_CLOSE</strong>. Also, change the <code>title</code> property to <span class="codeitalic"><span class="codestrong"><code>Your Name</code></span></span><span class="codestrong"><code>'s Secret Message App</code></span>, as shown in <a href="ch7.xhtml#ch7fig3">Figure 7-3</a>.</p>&#13;
<div class="imagef"><img src="../images/f0149-02.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch7fig3"/>Figure 7-3: Change the defaultCloseOperation and title properties to customize the app.</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_150"/>Next, let’s give ourselves some room to build a slightly larger GUI interface so we can encode and decode longer messages. With <code>javax.swing.JFrame</code> still selected in the Components pane, click the outside border of the window in the design preview. Click the small black resize box at the lower-right corner of the window, and drag down and to the right to resize the frame to 600 by 400 pixels, as shown in <a href="ch7.xhtml#ch7fig4">Figure 7-4</a>.</p>&#13;
<div class="imagef"><img src="../images/f0150-01.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch7fig4"/>Figure 7-4: Resize the JFrame to hold bigger messages.</em></p>&#13;
<p class="indent">Now we’re ready to begin placing the GUI interface components. For the GUI version of the app, we want to be able to encode and decode long messages, so the first component we’ll place is a <code>JTextArea</code>. Like a <code>JTextField</code>, text areas allow you to enter text, but a <code>JTextArea</code> can hold, display, and even wrap several lines of text.</p>&#13;
<p class="indent">To insert the first <code>JTextArea</code> for the user to input a message, under Components in the Palette, click <strong>JTextArea</strong>. Then place it near the top of the <code>JFrame</code> in the design preview. Click and drag to draw a <code>JTextArea</code> approximately one-third of the height of the content pane, with a small margin between the <code>JTextArea</code> and the edge of the frame. The <code>JTextArea</code> should be approximately 564 pixels wide by 140 pixels tall. Then, in the Properties pane, change the <code>Variable</code> property to <span class="codestrong"><code>txtIn</code></span>.</p>&#13;
<p class="indent">To create the second <code>JTextArea</code> for the outputted message, right-click <strong>txtIn</strong> in the Preview pane, select <strong>Copy</strong>, right-click the content pane, and select <strong>Paste</strong>. Place the new <code>JTextArea</code> near the bottom edge of the frame. To name the new <code>JTextArea</code>, change the <code>Variable</code> property to <span class="codestrong"><code>txtOut</code></span>. You should end up with two <code>JTextArea</code> components, as shown in <a href="ch7.xhtml#ch7fig5">Figure 7-5</a>.</p>&#13;
<div class="imagef"><span epub:type="pagebreak" id="page_151"/><img src="../images/f0151-01.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch7fig5"/>Figure 7-5: Copy and paste txtIn to create a second JTextArea and name it txtOut</em>.</p>&#13;
<p class="indent">Next, let’s add a text field for the encryption key value. Click <strong>JTextField</strong> in the Palette pane under Components and then click near the center of the content pane to place the <code>JTextField</code>. Change the <code>JTextField</code>’s <code>Variable</code> property to <span class="codestrong"><code>txtKey</code></span> and resize it to about half its original size.</p>&#13;
<p class="indent">Add a <code>JLabel</code> to the left of <code>txtKey</code>, entering <span class="codestrong"><code>Key:</code></span> as the label’s <code>text</code> property. Set the <code>horizontalAlignment</code> to <strong>RIGHT</strong>. Finally, add a <code>JButton</code> to the right of <code>txtKey</code>, entering the words <span class="codestrong"><code>Encode/Decode</code></span> as the button’s <code>text</code> property. Expand the width of the button until it shows all the text. The interface should look like <a href="ch7.xhtml#ch7fig6">Figure 7-6</a>. To preview the interface without running the app, press the small Test GUI button above the Palette, circled in <a href="ch7.xhtml#ch7fig6">Figure 7-6</a>.</p>&#13;
<div class="imagef"><img src="../images/f0151-02.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch7fig6"/>Figure 7-6: Test the GUI interface by pressing the Test GUI button above the Palette.</em></p>&#13;
<p class="indent">Now that you have the user interface set up, it’s time to code the program.</p>&#13;
<h3 class="h3"><span epub:type="pagebreak" id="page_152"/><a id="toc_lev120"/>Coding the Secret Messages GUI App</h3>&#13;
<p class="noindent">Switch back to the source view by clicking the Source tab on the bottom left of the design view window. You’ll see that Eclipse has added all the GUI code in the <em>SecretMessagesGUI.java</em> file. To connect the GUI to our app, we first need to add the declarations for the two <code>JTextArea</code> variables at the top of the <code>SecretMessagesGUI</code> class. Eclipse knows that <code>JTextField</code> components usually need event handlers for user input, so it places <code>txtKey</code> at the top of the class, but we need to do the same with the two <code>JTextArea</code> components, <code>txtIn</code> and <code>txtOut</code>. Add the two bottom lines shown here:</p>&#13;
<p class="pre"><span class="ash">public class SecretMessagesGUI extends JFrame {</span><br/>&#13;
    <span class="ash">private JTextField txtKey;</span><br/>&#13;
    private JTextArea txtIn;<br/>&#13;
    private JTextArea txtOut;<br/>&#13;
</p>&#13;
<p class="indent">After declaring the <code>JTextArea</code> variables at the top of the file, we need to modify the code inside the <code>SecretMessagesGUI()</code> constructor. Delete the variable type <code>JTextArea</code> at the beginning of each of these two lines:</p>&#13;
<p class="pre">  <span class="ash">public SecretMessagesGUI() {</span><br/>&#13;
      <span class="ash">setTitle("Dr. Payne's Secret Message App");</span><br/>&#13;
      <span class="ash">setDefaultCloseOperation(JFrame.<em>EXIT_ON_CLOSE</em>);</span><br/>&#13;
      <span class="ash">getContentPane().setLayout(null);</span><br/>&#13;
      txtIn = new JTextArea(); // Delete "JTextArea" from start of line<br/>&#13;
      <span class="ash">txtIn.setBounds(10, 11, 564, 140);</span><br/>&#13;
      <span class="ash">getContentPane().add(txtIn);</span><br/>&#13;
      txtOut = new JTextArea(); // Delete "JTextArea" from start of line<br/>&#13;
      <span class="ash">txtOut.setBounds(10, 210, 564, 140);</span><br/>&#13;
      <span class="ash">getContentPane().add(txtOut);</span><br/>&#13;
</p>&#13;
<p class="indent">With these changes, we’re ready to begin writing the method to encode messages whenever the user clicks the Encode/Decode button.</p>&#13;
<h4 class="h4"><em><a id="toc_lev121"/>Creating the encode() Method</em></h4>&#13;
<p class="noindent">The <code>encode()</code> method we’ll write is similar to <code>checkGuess()</code> from the Hi-Lo guessing game app in <a href="ch3.xhtml#ch3">Chapter 3</a>. The <code>checkGuess()</code> method took a string that was the user’s guess, but the method didn’t need to return a value, so it returned <code>void</code>. Unlike <code>checkGuess()</code>, <code>encode()</code> will take a message and an encryption key as values, and instead of returning <code>void</code>, it will return an encoded message.</p>&#13;
<p class="indent">Methods return values so that the program can use them. We want <code>encode()</code> to take a message and key from the user and then run some code on those values to produce the encoded message, which our program will use as the output for the user. When declaring a method that returns information, we state the return value’s data type before the name of the method. The type of information we want returned from <code>encode()</code> is a <code>String</code> variable. So, <code>encode()</code> will be declared as <code>public String encode()</code>.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_153"/>We need to tell Java what kind of information we want to pass to <code>encode()</code>; this information is known as a method’s <em>parameters</em>. To declare parameters for a method, we place them inside the parentheses following the method name, with the data type first and the name of the parameter second. Multiple parameters are separated by commas. The declaration for the <code>encode()</code> method looks like this:</p>&#13;
<p class="pre">    public String encode( String message, int keyVal )</p>&#13;
<p class="indent">Let’s add braces for the body and place the <code>encode()</code> method right below the declarations for the two <code>JTextArea</code> variables, above the <code>SecretMessagesGUI()</code> constructor method:</p>&#13;
<p class="pre"><span class="ash">public class SecretMessagesGUI extends JFrame {</span><br/>&#13;
    <span class="ash">private JTextField txtKey;</span><br/>&#13;
    <span class="ash">private JTextArea txtIn;</span><br/>&#13;
    <span class="ash">private JTextArea txtOut;</span><br/>&#13;
    public String encode( String message, int keyVal ) {<br/>&#13;
    }<br/>&#13;
    <span class="ash">public SecretMessagesGUI() {</span><br/>&#13;
</p>&#13;
<p class="indent">Eclipse will underline the <code>encode()</code> method in red to let you know you haven’t returned a value, but that’s because we haven’t written the code inside the method body yet. Here we’ll be reusing some of our code from <a href="ch6.xhtml#ch6">Chapter 6</a>.</p>&#13;
<p class="indent">Declare a <code>String</code> called <code>output</code>, set it equal to an empty string for now, and add a line to return <code>output</code> as the result of the <code>encode()</code> method using a <code>return</code> statement:</p>&#13;
<p class="pre">  <span class="ash">public String encode( String message, int keyVal ) {</span><br/>&#13;
      String output = "";<br/>&#13;
      return output;<br/>&#13;
  }<br/>&#13;
</p>&#13;
<p class="indent">Since <code>encode()</code> was declared to return a <code>String</code> value and we’re returning <code>output</code>, which <em>is</em> a <code>String</code>, Eclipse will remove the red underline to let us know we’ve fixed the problem of the missing return value.</p>&#13;
<p class="indent">Next, we’ll reuse a selection of code from the text-based version of the app for encoding messages. Open the <em>SecretMessages</em> project from <a href="ch6.xhtml#ch6">Chapter 6</a> in the Project Explorer pane.</p>&#13;
<p class="indent">We can copy the code starting at <code>char key</code> and ending at the closing brace of the <code>for</code> loop, right before <code>System.out.println(output);</code> near the end of the program. This is the part of the app that encodes a message using the Caesar cipher algorithm.</p>&#13;
<p class="indent">Paste the copied code from <em>SecretMessages.java</em> into <em>SecretMessagesGUI.java</em>, inside <code>encode()</code>, between the two lines we just added. The finished <code>encode()</code> method looks like this:</p>&#13;
<p class="pre"><br/>&#13;
<span class="ash">public String encode( String message, int keyVal ) {</span><br/>&#13;
    <span class="ash">String output = "";</span><br/>&#13;
    char key = (char) keyVal;<br/>&#13;
    for ( int x = 0; x &lt; message.length(); x++ ) {<br/>&#13;
        char input = message.charAt(x);<br/>&#13;
        if (input &gt;= 'A' &amp;&amp; input &lt;= 'Z')<br/>&#13;
        {<br/>&#13;
            input += key;<br/>&#13;
            if (input &gt; 'Z')<br/>&#13;
                input -= 26;<br/>&#13;
            if (input &lt; 'A')<br/>&#13;
                input += 26;<br/>&#13;
        }<br/>&#13;
        else if (input &gt;= 'a' &amp;&amp; input &lt;= 'z')<br/>&#13;
        {<br/>&#13;
            input += key;<br/>&#13;
            if (input &gt; 'z')<br/>&#13;
                input -= 26;<br/>&#13;
            if (input &lt; 'a')<br/>&#13;
                input += 26;<br/>&#13;
        }<br/>&#13;
        else if (input &gt;= '0' &amp;&amp; input &lt;= '9')<br/>&#13;
        {<br/>&#13;
            input += (keyVal % 10);<br/>&#13;
            if (input &gt; '9')<br/>&#13;
                input -= 10;<br/>&#13;
            if (input &lt; '0')<br/>&#13;
                input += 10;<br/>&#13;
        }<br/>&#13;
        output += input;<br/>&#13;
    }<br/>&#13;
    <span class="ash">return output;</span><br/>&#13;
<span class="ash">}</span><br/>&#13;
</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_154"/>Because we named our variables consistently, we can reuse the Caesar cipher encryption code. Consistent naming is a good habit, and well-written code in Java can be reused across multiple platforms.</p>&#13;
<h4 class="h4"><em><a id="toc_lev122"/>Writing the Event Handler for the Encode/Decode Button</em></h4>&#13;
<p class="noindent">We want the user to provide both the input message and the key value that we’ll pass along to <code>encode()</code> in the GUI interface, and we want the output message to be returned when the user presses the Encode/Decode button, so let’s write the code to handle the button click event.</p>&#13;
<p class="indent">Switch to the design view in <em>SecretMessagesGUI.java</em> and double-click the <strong>Encode/Decode</strong> button. Eclipse will switch back to the source view and insert the code for the <code>actionPerformed()</code> event handler for the Encode/Decode button, like the code snippet shown here:</p>&#13;
<p class="pre">    JButton btnEncodedecode = new JButton("Encode/Decode");<br/>&#13;
    btnEncodedecode.addActionListener(new ActionListener() {<br/>&#13;
        public void actionPerformed(ActionEvent arg0) {<br/>&#13;
        }<br/>&#13;
    });</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_155"/>This is an anonymous inner class, like the one we first encountered in <a href="ch3.xhtml#ch3">Chapter 3</a>. All we have to add is the code inside <code>actionPerformed()</code> to tell Java how the button should behave when it’s clicked.</p>&#13;
<p class="indent">We want the Encode/Decode button to perform the following steps:</p>&#13;
<p class="order">1. Get the input message from <code>txtIn</code>.</p>&#13;
<p class="order">2. Get the key from <code>txtKey</code>.</p>&#13;
<p class="order">3. Encode the message using the key.</p>&#13;
<p class="order">4. Show the output message in <code>txtOut</code>.</p>&#13;
<p class="indent">Think about how we might accomplish each of those steps. Try it yourself before reading further and then read below to see how my solution compares.</p>&#13;
<p class="indent">For the first step, we can set up a <code>String</code> called <code>message</code> that gets the text from the <code>txtIn</code> field. Just like a <code>JTextField</code>, a <code>JTextArea</code> has a <code>getText()</code> method:</p>&#13;
<p class="pre">        <span class="ash">public void actionPerformed(ActionEvent arg0) {</span><br/>&#13;
            String message = txtIn.getText();</p>&#13;
<p class="indent">For the second step, we can get the user’s key from <code>txtKey</code> using the <code>Integer.parseInt()</code> method, which pulls an integer value out of a text string. Then we’ll store the integer we get in a variable we’ll call <code>key</code>:</p>&#13;
<p class="pre">          <span class="ash">String message = txtIn.getText();</span><br/>&#13;
          int key = Integer.<span class="codeitalic">parseInt</span>( txtKey.getText() );</p>&#13;
<p class="indent">To encode the message in the third step, we just need to call the <code>encode()</code> method and pass it two arguments. <em>Arguments</em> are the values we give a method to serve as its parameters. Remember we defined <code>encode()</code> to require two parameters, so we’ll need to pass <code>encode()</code> two arguments, which will be the variables <code>message</code> and <code>key</code>.</p>&#13;
<p class="indent">We can call <code>encode()</code> with the statement <code>encode(message, key)</code>. When it has finished executing, it will return the encoded message, which is <code>output</code>. Note that a method returns the value itself, not the variable the value is stored in. That means that the encoded message is stored in <code>output</code>, but when <code>encode()</code> returns <code>output</code>, we’re actually getting only the encoded string. In addition to that, all the code and variables created inside <code>encode()</code> aren’t carried over to the rest of the program, so the <code>output</code> variable doesn’t exist anymore once <code>encode()</code> returns. We’ll need to store the value returned by the method in a new variable if we want to save it. In order to keep our naming consistent, let’s call the new variable <code>output</code> too:</p>&#13;
<p class="pre">        <span class="ash">String message = txtIn.getText();</span><br/>&#13;
        <span class="ash">int key = Integer.<span class="codeitalic">parseInt</span>( txtKey.getText() );</span><br/>&#13;
        String output = encode( message, key );<br/>&#13;
</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_156"/>Finally, we’ll use the <code>setText()</code> method to show the <code>output</code> message in <code>txtOut</code>:</p>&#13;
<p class="pre">        <span class="ash">String message = txtIn.getText();</span><br/>&#13;
        <span class="ash">int key = Integer.<span class="codeitalic">parseInt</span>( txtKey.getText() );</span><br/>&#13;
        <span class="ash">String output = encode( message, key );</span><br/>&#13;
        txtOut.setText( output );<br/>&#13;
</p>&#13;
<p class="indent">The <code>actionPerformed()</code> method is almost complete, except for some error handling. We’ve used the <code>Integer.parseInt()</code> method, which can throw exceptions if the user enters bad input, so we’ll need to add <code>try-catch</code> statements.</p>&#13;
<h4 class="h4"><em><a id="toc_lev123"/>Handling Bad Input and User Errors</em></h4>&#13;
<p class="noindent">The code to process button clicks includes a call to <code>Integer.parseInt()</code>, and we learned back in <a href="ch3.xhtml#ch3">Chapter 3</a> that this method can throw exceptions when the user enters erroneous input. In particular, if the user were to leave the <code>txtKey</code> field blank or type anything other than an integer into that <code>JTextField</code>, the <code>Integer.parseInt()</code> method would fail.</p>&#13;
<p class="indent">We need to protect the program from bad input by using <code>try-catch</code> blocks to handle exceptions. Since we want to encode or decode a message only when the user has correctly entered an encryption key, we can wrap all four lines of <code>actionPerformed()</code> inside a <code>try</code> block by adding the keyword <code>try</code> and an opening brace before the first line, as well as a closing brace after the fourth line, as shown here:</p>&#13;
<p class="pre">        <span class="ash">public void actionPerformed(ActionEvent arg0) {</span><br/>&#13;
            try {<br/>&#13;
                <span class="ash">String message = txtIn.getText();</span><br/>&#13;
                <span class="ash">int key = Integer.<em>parseInt</em>( txtKey.getText() );</span><br/>&#13;
                <span class="ash">String output = encode( message, key );</span><br/>&#13;
                <span class="ash">txtOut.setText( output );</span><br/>&#13;
            } catch (Exception ex) {<br/>&#13;
            }<br/>&#13;
        <span class="ash">}</span><br/>&#13;
</p>&#13;
<p class="indent">Eclipse will highlight the closing brace in red, so let’s go ahead and add the <code>catch</code> block as shown. We’ll need to tell Java what to do when bad input is received, and we’ll add those steps inside the braces for the <code>catch</code> statement a little later. But first, let’s finish the <code>main()</code> method so that we can test the app.</p>&#13;
<h4 class="h4"><em><a id="toc_lev124"/>Building the main() Method and Running the App</em></h4>&#13;
<p class="noindent">Just like when we created our game app in <a href="ch3.xhtml#ch3">Chapter 3</a>, we need to add some setup code to the <code>main()</code> method to create an instance of the Secret Messages app, correctly size the GUI window, and make the GUI visible to the user. Near the bottom of the <em>SecretMessagesGUI.java</em> file, find the <code>main()</code> method stub Eclipse provided and add the following three lines.</p>&#13;
<p class="pre">        <span class="ash"><span epub:type="pagebreak" id="page_157"/>public static void main(String[] args) {</span><br/>&#13;
          <span class="ent">➊</span> SecretMessagesGUI theApp = new SecretMessagesGUI();<br/>&#13;
          <span class="ent">➋</span> theApp.setSize(new java.awt.Dimension(600,400));<br/>&#13;
          <span class="ent">➌</span> theApp.setVisible(true);<br/>&#13;
        <span class="ash">}</span><br/>&#13;
</p>&#13;
<p class="indent">The line at <span class="ent">➊</span> creates a <code>SecretMessagesGUI</code> object called <code>theApp</code>. The <code>new</code> keyword followed by the class name runs the constructor method <code>SecretMessagesGUI()</code>, which sets up all the components of the GUI interface.</p>&#13;
<p class="indent">Next, we set the size of the <code>JFrame</code> to match the width and height that we used in designing the layout, 600 by 400 pixels <span class="ent">➋</span>. Finally, we set the <code>JFrame</code>’s <code>visible</code> property to <code>true</code> <span class="ent">➌</span>, allowing the user to see the GUI. Save these changes and then run the app to test it, as shown in <a href="ch7.xhtml#ch7fig7">Figure 7-7</a>.</p>&#13;
<div class="imagef"><img src="../images/f0157-01.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch7fig7"/>Figure 7-7: The Secret Messages app is still a bit plain, but it can encode and decode messages!</em></p>&#13;
<p class="indent">The following is the full source code for <em>SecretMessagesGUI.java</em> to this point:</p>&#13;
<p class="pre">import javax.swing.JFrame;<br/>&#13;
import javax.swing.JTextArea;<br/>&#13;
import javax.swing.JTextField;<br/>&#13;
import javax.swing.JLabel;<br/>&#13;
import javax.swing.JButton;<br/>&#13;
import java.awt.event.ActionListener;<br/>&#13;
import java.awt.Dimension;<br/>&#13;
import java.awt.event.ActionEvent;<br/>&#13;
public class SecretMessagesGUI extends JFrame {<br/>&#13;
    private JTextField txtKey;<br/>&#13;
    private JTextArea txtIn;<br/>&#13;
    private JTextArea txtOut;<br/>&#13;
    public String encode( String message, int keyVal ) {<br/>&#13;
        String output = "";<br/>&#13;
        char key = (char) keyVal;<br/>&#13;
        for ( int x = 0; x &lt; message.length(); x++ ) {<br/>&#13;
            char input = message.charAt(x);<br/>&#13;
            if (input &gt;= 'A' &amp;&amp; input &lt;= 'Z')<br/>&#13;
            {<br/>&#13;
                input += key;<br/>&#13;
                if (input &gt; 'Z')<br/>&#13;
                    input -= 26;<br/>&#13;
                if (input &lt; 'A')<br/>&#13;
                    input += 26;<br/>&#13;
            }<br/>&#13;
            else if (input &gt;= 'a' &amp;&amp; input &lt;= 'z')<br/>&#13;
            {<br/>&#13;
                input += key;<br/>&#13;
                if (input &gt; 'z')<br/>&#13;
                    input -= 26;<br/>&#13;
                if (input &lt; 'a')<br/>&#13;
                    input += 26;<br/>&#13;
            }<br/>&#13;
            else if (input &gt;= '0' &amp;&amp; input &lt;= '9')<br/>&#13;
            {<br/>&#13;
                input += (keyVal % 10);<br/>&#13;
                if (input &gt; '9')<br/>&#13;
                    input -= 10;<br/>&#13;
                if (input &lt; '0')<br/>&#13;
                    input += 10;<br/>&#13;
            }<br/>&#13;
            output += input;<br/>&#13;
        }<br/>&#13;
        return output;<br/>&#13;
    }<br/>&#13;
    public SecretMessagesGUI() {<br/>&#13;
        setTitle("Dr. Payne's Secret Message App");<br/>&#13;
        setDefaultCloseOperation(JFrame.<em>EXIT_ON_CLOSE</em>);<br/>&#13;
        getContentPane().setLayout(null);<br/>&#13;
        txtIn = new JTextArea();<br/>&#13;
        txtIn.setBounds(10, 11, 564, 140);<br/>&#13;
        getContentPane().add(txtIn);<br/>&#13;
        txtOut = new JTextArea();<br/>&#13;
        txtOut.setBounds(10, 210, 564, 140);<br/>&#13;
        getContentPane().add(txtOut);<br/>&#13;
        txtKey = new JTextField();<br/>&#13;
        txtKey.setBounds(258, 173, 44, 20);<br/>&#13;
        getContentPane().add(txtKey);<br/>&#13;
        JLabel lblKey = new JLabel("Key:");<br/>&#13;
        lblKey.setBounds(202, 176, 46, 14);<br/>&#13;
        getContentPane().add(lblKey);<br/>&#13;
        JButton btnEncodedecode = new JButton("Encode/Decode");<br/>&#13;
        btnEncodedecode.addActionListener(new ActionListener() {<br/>&#13;
            public void actionPerformed(ActionEvent arg0) {<br/>&#13;
                try {<br/>&#13;
                    String message = txtIn.getText();<br/>&#13;
                    int key = Integer.<em>parseInt</em>( txtKey.getText() );<br/>&#13;
                    String output = encode( message, key );<br/>&#13;
                    txtOut.setText( output );<br/>&#13;
                  } catch (Exception ex) {<br/>&#13;
                  }<br/>&#13;
           }<br/>&#13;
         });<br/>&#13;
         btnEncodedecode.setBounds(312, 172, 144, 23);<br/>&#13;
         getContentPane().add(btnEncodedecode);<br/>&#13;
     }<br/>&#13;
     public static void main(String[] args) {<br/>&#13;
         SecretMessagesGUI theApp = new SecretMessagesGUI();<br/>&#13;
         theApp.setSize(new java.awt.Dimension(600,400));<br/>&#13;
         theApp.setVisible(true);<br/>&#13;
     }<br/>&#13;
}<br/></p>&#13;
<span epub:type="pagebreak" id="page_158"/>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_159"/>This first version of the app is a success, but it leaves a bit to be desired visually. We can make the GUI interface look more professional with just a few tweaks.</p>&#13;
<h3 class="h3"><a id="toc_lev125"/>Improving the GUI</h3>&#13;
<p class="noindent">Let’s switch back to the design view to correct the issues we noted in the last section. First, click the <strong>Encode/Decode</strong> button and make it a bit wider. Different computers can have other default fonts and sizes, so give the button a little extra room to be safe.</p>&#13;
<p class="indent">Now, let’s make the font sizes in the two <code>JTextArea</code> fields larger and easier to read. We want to change the font properties of both text areas, so we can select both <code>txtIn</code> and <code>txtOut</code> at the same time by clicking <code>txtIn</code> and then using <small>CTRL</small>-click (or <img src="../images/symbol.jpg" alt="Images"/>-click) to also select <code>txtOut</code>.</p>&#13;
<p class="indent">With both text areas selected, go to the <code>font</code> property in the Properties pane and click the three dots next to the font size. The Font Chooser dialog will appear, as shown in <a href="ch7.xhtml#ch7fig8">Figure 7-8</a>.</p>&#13;
<div class="imagef"><img src="../images/f0159-01.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch7fig8"/>Figure 7-8: We can change the font properties for both JTextArea fields at the same time.</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_160"/>Choose a font size of 18 or greater and select a font that you like. Stick with a familiar font so that when you share the app with friends on different computers, the look and feel won’t change too dramatically. I’ve selected Lucida Console, 18 point. Click <strong>OK</strong> to save the font selection.</p>&#13;
<p class="indent">Finally, let’s change the background color of the content pane to personalize it. Select the content pane by clicking <strong>getContentPane()</strong> in the Components pane in the upper left. Then, click the three dots beside the <code>background</code> property in the Properties pane. In the Color Chooser dialog that pops up, select the <strong>Named colors</strong> tab, as shown in <a href="ch7.xhtml#ch7fig9">Figure 7-9</a>. You’ll see a broad selection of colors. Choose a color that you like and click <strong>OK</strong>.</p>&#13;
<div class="imagef"><img src="../images/f0160-01.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch7fig9"/>Figure 7-9: Change the background color of the content pane and button to make the app more stylish.</em></p>&#13;
<p class="indent">You can also change the background color of the Encode/Decode button. You may not see all your changes in the design preview, but if you run the app, you should see your new selections, as shown in <a href="ch7.xhtml#ch7fig10">Figure 7-10</a>, along with any new background color you chose.</p>&#13;
<div class="imagef"><span epub:type="pagebreak" id="page_161"/><img src="../images/f0161-01.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch7fig10"/>Figure 7-10: The GUI after you change the button size and font size.</em></p>&#13;
<p class="indent">There are a lot of other properties you can customize based on your preference. Explore the Properties pane for each component and adjust things until the app looks how you want it. Remember to stop and save your app so your changes don’t get erased!</p>&#13;
<h4 class="h4"><em><a id="toc_lev126"/>Setting Line Wrap and Word Wrap</em></h4>&#13;
<p class="noindent">So far, the messages I’ve used in my examples have been shorter than one line. But what happens if we type several lines of text?</p>&#13;
<p class="indent">Let’s try typing or pasting a long sentence into the input text area. I’ll use the first sentence of the Gettysburg Address, by US president Abraham Lincoln:</p>&#13;
<p class="bq">Four score and seven years ago our fathers brought forth on this continent, a new nation, conceived in Liberty, and dedicated to the proposition that all men are created equal.</p>&#13;
<p class="indent">You can use this sentence or make up your own long sentence. Either way, as soon as you type it in, you’ll notice a problem, as shown in <a href="ch7.xhtml#ch7fig11">Figure 7-11</a>.</p>&#13;
<div class="imagef"><img src="../images/f0161-02.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch7fig11"/>Figure 7-11: Longer messages in the app don’t yet automatically wrap at the end of a line.</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_162"/>To correctly wrap longer lines of text by full words, you’ll need to change <em>two</em> properties for each text area in the Properties pane. Select both <code>JTextArea</code> objects again in the design preview and then, under Properties, select the checkboxes next to <code>lineWrap</code> and <code>wrapStyleWord</code>. The first property, <code>lineWrap</code>, tells Java to wrap text longer than one line down to the next line. Setting the wrap style to <code>wrapStyleWord</code> tells Java to break the line at the end of a whole word, as we do in a word processor or as you see in this book.</p>&#13;
<p class="indent">Now save and run the app again. Paste your long sentence into the first text box, and you should notice an improvement. Now the text is correctly wrapped across multiple lines, with line breaks after the last full word that fits on each line. Enter a key and press the <strong>Encode/Decode</strong> button, and you’ll see the same text wrapping in the output text area, as shown in <a href="ch7.xhtml#ch7fig12">Figure 7-12</a>.</p>&#13;
<div class="imagef"><img src="../images/f0162-01.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch7fig12"/>Figure 7-12: Changing both the lineWrap and wrapStyleWord properties to true results in a nice multiline interface, complete with word wrapping.</em></p>&#13;
<p class="indent">This version of the program is becoming more professional looking, but what happens if we enter bad input in the text field for the encryption key? Well, nothing yet. We added a <code>try</code> statement earlier, but we didn’t complete the <code>catch</code> statement. Let’s do that now. We’ll also learn how to create pop-up message dialogs to alert the user to errors.</p>&#13;
<h4 class="h4"><em><a id="toc_lev127"/>Handling Bad Input and User Errors: Part 2</em></h4>&#13;
<p class="noindent">Earlier in the chapter, we added a <code>try</code> block around the button event handler, but we left the body of the <code>catch</code> statement empty. It’s time to fill that in with code.</p>&#13;
<p class="indent">Our <code>catch</code> statement will handle bad or missing user input in the <code>txtKey</code> text field. If the user forgets to enter a value for the encryption key or if the value they entered is not a number, one way of handling that is to pop up a message describing the problem, like the one shown in <a href="ch7.xhtml#ch7fig13">Figure 7-13</a>.</p>&#13;
<div class="imagef"><span epub:type="pagebreak" id="page_163"/><img src="../images/f0163-01.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch7fig13"/>Figure 7-13: A dialog pops up to alert the user to an error.</em></p>&#13;
<p class="indent">After the user closes the pop-up window, another helpful touch is to move the cursor to the <code>txtKey</code> text field and highlight or select any text there so the user can type a new value easily, without needing to click and select the value manually.</p>&#13;
<p class="indent">The <code>javax.swing</code> toolkit that we’ve been using for GUI components such as <code>JFrame</code> and <code>JTextField</code> also has classes that handle various kinds of pop-up windows. Some examples are <em>input dialogs</em>, which allow the user to provide text input; <em>confirm dialogs</em>, which allow the user to select Yes/No/OK or Cancel; and <em>message dialogs</em>, which provide information to the user in a pop-up window.</p>&#13;
<p class="indent">The error message we’d like to provide to the user is best displayed in a message dialog. The <code>javax.swing.JOptionPane</code> class has a method called <code>showMessageDialog()</code> that takes two parameters, which are the parent window and the message to display. If we were writing a larger application, we would use the parent window parameter to center the dialog over the main word processing window, for example. But for this app, we can use the keyword <code>null</code> to center the dialog over the desktop instead, as shown here:</p>&#13;
<p class="pre">JOptionPane.<span class="codeitalic">showMessageDialog</span>(null,<br/>&#13;
      "Please enter a whole number value for the encryption key.");</p>&#13;
<p class="indent">When this line of code is called, it will pop up a message dialog reading “Please enter a whole number value for the encryption key.”</p>&#13;
<p class="indent">To add this pop-up error message to the <code>catch</code> statement we created earlier, go to the design view and double-click the <strong>Encode/Decode</strong> button. This is a quick way to have Eclipse take you directly to the source code for the button-click event handler that contains the <code>catch</code> statement.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_164"/>After the error message is displayed, we’ll also want to place the cursor in the <code>txtKey</code> field and select any text currently in the <code>txtKey</code> field, as we did for the Hi-Lo guessing game GUI app. We’ll add the message dialog and the same <code>requestFocus()</code> and <code>selectAll()</code> statements we used in the Hi-Lo guessing game app inside the braces for the <code>catch</code> statement. The finished event handler code for the Encode/Decode button looks like the following:</p>&#13;
<p class="pre"><br/>&#13;
          <span class="ash">btnEncodedecode.addActionListener(new ActionListener() {</span><br/>&#13;
              <span class="ash">public void actionPerformed(ActionEvent arg0) {</span><br/>&#13;
                  <span class="ash">try {</span><br/>&#13;
                      <span class="ash">String message = txtIn.getText();</span><br/>&#13;
                      <span class="ash">int key = Integer.<span class="codeitalic">parseInt</span>( txtKey.getText() );</span><br/>&#13;
                      <span class="ash">String output = encode( message, key );</span><br/>&#13;
                      <span class="ash">txtOut.setText( output );</span><br/>&#13;
                  <span class="ash">} catch (Exception ex) {</span><br/>&#13;
                      JOptionPane.<em>showMessageDialog</em>(null,<br/>&#13;
      "Please enter a whole number value for the encryption key.");<br/>&#13;
                      txtKey.requestFocus();<br/>&#13;
                      txtKey.selectAll();<br/>&#13;
                  <span class="ash">}</span><br/>&#13;
              <span class="ash">}</span><br/>&#13;
          <span class="ash">});</span><br/>&#13;
</p>&#13;
<div class="note">&#13;
<p class="notet"><span class="noteg"><strong>NOTE</strong></span></p>&#13;
<p class="notep"><em>When you add JOptionPane, if you don’t use the content assist or if you see an error at JOptionPane, you may need to press ctrl-shift-O to import the javax.swing .JOptionPane class correctly at the top of your code.</em></p>&#13;
</div>&#13;
<p class="indent">Run the app now, either leaving the key field blank or entering nonnumeric text as the key. The message dialog will pop up, asking you to enter a valid key. It will also highlight the text in the key field so that it’s easy to type a whole number when the dialog closes.</p>&#13;
<p class="indent">A first-time user might not know what to type into the key field, so adding a default value might also be a helpful UI tweak. Click the Design tab, select the <code>txtKey</code> text field, and enter a default key value into the <code>text</code> property in the Properties pane. I’ll choose <code>3</code> as my default encryption key, but you can choose any number. Let’s also change the <code>horizontalAlignment</code> property of the <code>txtKey</code> field to <strong>CENTER</strong>. Feel free to change other properties to make <code>txtKey</code> look exactly like you want, including the font color and style.</p>&#13;
<h4 class="h4"><em><a id="toc_lev128"/>Adding a Slider to the Secret Messages GUI</em></h4>&#13;
<p class="noindent">We’ll add one more user interface improvement to the Secret Messages app—a numeric slider that will allow the user to quickly slide through key values and see how the message changes with each new key.</p>&#13;
<p class="indent">In design view, under Components in the Palette, select the <strong>JSlider</strong> component. Hover over the middle left of the design preview, beside the key prompt, and click to drop the <code>JSlider</code> into place as shown in <a href="ch7.xhtml#ch7fig14">Figure 7-14</a>—you can adjust the position later if needed.</p>&#13;
<div class="imagef"><span epub:type="pagebreak" id="page_165"/><img src="../images/f0165-01.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch7fig14"/>Figure 7-14: Add a JSlider to the graphical user interface for a quick, easy way to try different key values.</em></p>&#13;
<p class="indent">Now let’s customize some properties of the <code>JSlider</code>. First, let’s change its background color to match the rest of the app. With the new <code>JSlider</code> selected in the design preview, click the three dots next to the <code>background</code> property in the Properties pane, go to <strong>Named colors</strong> in the Color Chooser dialog, and pick the same color you used for the rest of the GUI. Click <strong>OK</strong> to save the new background color for the slider.</p>&#13;
<p class="indent">Next, we’ll add custom labels, tick marks, and a default value for the slider. First, turn on the <code>paintLabels</code> property by selecting the <strong>true</strong> checkbox beside it. Second, enter a <code>maximum</code> value of <span class="codestrong"><code>26</code></span> and a <code>minimum</code> value of <span class="codestrong"><code>–26</code></span> to make it easy to choose a key value in the correct range.</p>&#13;
<p class="indent">Next, for the <code>minorTickSpacing</code> property, enter a value of <span class="codestrong"><code>1</code></span>—this will add small tick marks on the slider track to help the user see the range of possible values. Then, for the <code>majorTickSpacing</code> property, enter <span class="codestrong"><code>13</code></span>—this will show a label every 13 values between <code>-26</code> and <code>26</code> on the slider. Now, turn on the <code>paintTicks</code> property by selecting the <strong>true</strong> checkbox next to it. The complete Properties pane with all the changes we’ve made is shown in <a href="ch7.xhtml#ch7fig15">Figure 7-15</a>.</p>&#13;
<div class="imagef"><img src="../images/f0165-02.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch7fig15"/>Figure 7-15: Customizing the properties of the slider</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_166"/>We’re almost done! Change the default value of the slider to match your default key value in the key text field by modifying the <code>value</code> property. I selected <code>3</code> as my default key value, so I’ll enter <span class="codestrong"><code>3</code></span> in the <code>value</code> property for the slider. Finally, you’ll need to make the slider a bit taller to show the labels, as shown in the finished slider in <a href="ch7.xhtml#ch7fig16">Figure 7-16</a>.</p>&#13;
<div class="imagef"><img src="../images/f0166-01.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch7fig16"/>Figure 7-16: The Secret Messages app with the GUI slider in place</em></p>&#13;
<p class="indent">Now, we need to add the code to make the slider work, allowing the user to slide easily among various key values to encode and decode messages quickly.</p>&#13;
<h3 class="h3"><a id="toc_lev129"/>Code Cracking with the Slider</h3>&#13;
<p class="noindent">We want the user to be able to change the encryption key value by clicking and dragging the slider we added in the previous section, so next we’re going to add an event handler to listen for changes to the slider.</p>&#13;
<p class="indent">Right-click or <small>CONTROL</small>-click the slider in the design preview and go to <strong>Add event handler</strong> <span class="ent">▸</span> <strong>change</strong> <span class="ent">▸</span> <strong>stateChanged</strong>, as shown in <a href="ch7.xhtml#ch7fig17">Figure 7-17</a>. The <code>stateChanged</code> event handler will work similarly to the <code>actionPerformed</code> event handler for the Encode/Decode button, but it will run anytime the user changes the slider’s position to update the encryption key value.</p>&#13;
<div class="imagef"><img src="../images/f0166-02.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch7fig17"/>Figure 7-17: Adding an event handler to the slider that will detect when the user changes the slider’s value</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_167"/>When you click to add the <code>stateChanged</code> event handler to the slider, Eclipse will automatically generate another anonymous inner class, much like the one it created for the Encode/Decode button. But before we check out the anonymous inner class, we’ll need to add the <code>JSlider</code> to the top of the class with the <code>JTextArea</code> declarations. To do that, we have to declare the <code>JSlider</code> as an instance variable. Add the last line shown here to the declarations at the top of the <code>SecretMessagesGUI</code> class:</p>&#13;
<p class="pre">&#13;
<span class="ash">public class SecretMessagesGUI extends JFrame {</span><br/>&#13;
    <span class="ash">private JTextField txtKey;</span><br/>&#13;
    <span class="ash">private JTextArea txtIn;</span><br/>&#13;
    <span class="ash">private JTextArea txtOut;</span><br/>&#13;
    private JSlider slider;<br/>&#13;
</p>&#13;
<p class="indent">Then, scroll back down to the slider code. Remember, you can switch back to design view and right-click to add the event handler again to go directly to the code anytime you get lost. Now, change the first line, removing the <code>JSlider</code> type declaration, as shown here:</p>&#13;
<p class="pre">        slider = new JSlider();<br/>&#13;
        <span class="ash">slider.addChangeListener(new ChangeListener() {</span><br/>&#13;
            <span class="ash">public void stateChanged(ChangeEvent arg0) {</span><br/>&#13;
</p>&#13;
<p class="indent">The first action we’d like the slider to do is update the <code>txtKey</code> text field to show the slider’s current position. We can get the slider’s current position with the <code>getValue()</code> method, and we can set the text of the <code>txtKey</code> field with its <code>setText()</code> method. Adding those together, we can write the first line of the <code>stateChanged()</code> method:</p>&#13;
<p class="pre"><span class="ash">        public void stateChanged(ChangeEvent arg0) {</span><br/>&#13;
            txtKey.setText( "" + slider.getValue() );</p>&#13;
<p class="indent">The <code>slider.getValue()</code> method returns an integer—the current position value of the slider—so we added an empty string to the number to turn it into a string or text value. This will change the <code>txtKey</code> text field to show the slider’s value. But it doesn’t automatically re-encode the message using the new value yet. If you run the app now, you still need to click the Encode/Decode button to change the message.</p>&#13;
<p class="indent">Let’s modify the code in the <code>stateChanged()</code> method so that the slider updates the message like the Encode/Decode button would. We can copy the code from inside the <code>try</code> statement for the Encode/Decode button and paste it after the first line of the <code>stateChanged()</code> method for the slider, making only one change:</p>&#13;
<p class="pre">        <span class="ash">slider = new JSlider();</span><br/>&#13;
        <span class="ash">slider.addChangeListener(new ChangeListener() {</span><br/>&#13;
            <span class="ash">public void stateChanged(ChangeEvent arg0) {</span><br/>&#13;
                <span class="ash">txtKey.setText( "" + slider.getValue() );</span><br/>&#13;
                <span class="ent">➊</span>  String message = txtIn.getText();<br/>&#13;
                <span class="ent">➋</span>  int key = slider.getValue();<br/>&#13;
                <span class="ent">➌</span>  String output = encode( message, key );<br/>&#13;
                <span class="ent">➍</span>  txtOut.setText( output );<br/>&#13;
            <span class="ash">}</span><br/>&#13;
        <span class="ash">});</span><br/>&#13;
</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_168"/>The lines at <span class="ent">➊</span>, <span class="ent">➌</span>, and <span class="ent">➍</span> are copied directly from the Encode/Decode button’s event handler, but we’ve made a small change at <span class="ent">➋</span>. Instead of parsing the value out of the text field, we can access the slider’s value directly as an integer using the <code>getValue()</code> method. This means we don’t need a <code>try-catch</code> statement, because we’re no longer relying on the user to supply a hand-typed value. This is more convenient for the user and more secure for the programmer, as using the GUI slider removes one potential error while also making the interface easier to use.</p>&#13;
<p class="indent">Save the changes and run the application, and you’ll see that you can type in a message and then change the position of the slider to try different encryption key values. To test the ability to decode, copy an encoded message from the bottom text area using <small>CTRL</small>-C (or <img src="../images/symbol.jpg" alt="Image"/>-C) and paste it into the top text area using <small>CTRL</small>-V (or <img src="../images/symbol.jpg" alt="Image"/>-V). Then slide the slider to the left or right until you see the original message again.</p>&#13;
<p class="indent">You’ll even be able to “crack” the Caesar cipher encryption for messages that you don’t have the key to by sliding the slider slowly until you can read the decoded message in the bottom text area. Give it a try! Type the following message into the top text area of your app:</p>&#13;
<p class="pre"><span class="codestrong">Epdetyr esp lmtwtej ez mcplv esp Nlpdlc ntaspc htes xj Dpncpe Xpddlrp laa...</span></p>&#13;
<p class="indent">Then, slide the slider to the far left and slowly slide it to the right until it reveals the secret message. Can you tell what secret key was used to encode the message? See <a href="ch7.xhtml#ch7fig18">Figure 7-18</a> for a hint.</p>&#13;
<div class="imagef"><img src="../images/f0168-01.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch7fig18"/>Figure 7-18: You can use the Secret Messages app to break Caesar cipher messages by sliding the slider left and right until a plaintext message appears!</em></p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_169"/>Moving the slider to <code>-11</code> results in a plaintext English message, so the secret key must have been <code>11</code>. You may also notice that <code>15</code> will break the message (because 15 = 26 – 11). You can always find a couple of values that work to break messages in the basic Latin alphabet. Of course, you can send messages in other languages as well, as shown in <a href="ch7.xhtml#ch7fig19">Figure 7-19</a>.</p>&#13;
<div class="imagef"><img src="../images/f0169-01.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch7fig19"/>Figure 7-19: Any languages that use characters in the basic Latin alphabet can be used with this version of the Secret Messages app to send and receive encoded messages; Spanish (left) and French (right) are shown here.</em></p>&#13;
<p class="indent">You can copy and paste encoded messages back and forth with your friends using email, Twitter, and Facebook—you can even send encoded text messages, although that would be easier to do from your mobile device. We’ll see how to turn this Secret Messages desktop app into a mobile app in <a href="ch8.xhtml#ch8">Chapter 8</a>.</p>&#13;
<p class="indent">For now, in order to share secret messages back and forth, it would be nice to be able to share your Secret Messages app with your friends easily. We’ll learn to do that in the following section.</p>&#13;
<h3 class="h3"><a id="toc_lev130"/>Bonus: Sharing Your App as a Runnable JAR File</h3>&#13;
<p class="noindent">For it to be really useful, you need to be able to share the Secret Messages app with your friends—possibly even with friends who don’t know how to code in Java and don’t have Eclipse installed on their computer.</p>&#13;
<p class="indent">The great news is that Eclipse and Java make it easy to export an application as a runnable file and share it with any of the millions of computers worldwide that run Java. Your friends don’t even have to download the Java JDK developer’s edition; all they need is the JRE, which comes installed on most computers. Eclipse can export an application in a runnable Java archive (JAR) file that you can share by email, USB flash drive, or some other means. All your friends have to do is double-click the JAR file, and they’ll be able to run your app!</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_170"/>To export a runnable JAR file from Eclipse, go to <strong>File</strong> <span class="ent">▸</span> <strong>Export</strong>. Then expand the <em>Java</em> folder and click <strong>Runnable JAR file</strong>, as shown in <a href="ch7.xhtml#ch7fig20">Figure 7-20</a>.</p>&#13;
<div class="imagef"><img src="../images/f0170-01.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch7fig20"/>Figure 7-20: Share your application with others by exporting a runnable JAR file.</em></p>&#13;
<p class="indent">Click <strong>Next</strong>, and Eclipse will ask you for a launch configuration and an export destination. The launch configuration means which class or app you’d like to run and from which project. Under <strong>Launch configuration</strong>, click the drop-down list and choose <strong>SecretMessagesGUI – SecretMessagesGUI</strong>. This means you want to run the <em>SecretMessagesGUI.class</em> file in the <em>SecretMessagesGUI</em> project.</p>&#13;
<div class="note">&#13;
<p class="notet"><span class="noteg"><strong>NOTE</strong></span></p>&#13;
<p class="notep"><em>You have to compile and run your application at least once to have a launch configuration for that app.</em></p>&#13;
</div>&#13;
<p class="indent">The export destination is just the location and filename you want to use for your executable app. Under <strong>Export destination</strong>, click <strong>Browse</strong> and then select the destination folder you’d like to save your finished app in, such as your <em>Desktop</em> folder, for example. Give your program file a name, like <em>Secret Messages.jar</em>. You can use spaces (or other special characters) to name your file exactly how you’d like people to see it when they open it. When you’ve made your selections, as shown in <a href="ch7.xhtml#ch7fig21">Figure 7-21</a>, click <strong>Save</strong> and then <strong>Finish</strong>.</p>&#13;
<div class="imagef"><span epub:type="pagebreak" id="page_171"/><img src="../images/f0171-01.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch7fig21"/>Figure 7-21: Choose a location and name for your runnable JAR file.</em></p>&#13;
<p class="indent">You may see a warning after clicking Finish, but you can ignore it and click <strong>OK</strong>. Go to wherever you saved your JAR file, and you should see a Java icon with your filename, as shown in <a href="ch7.xhtml#ch7fig22">Figure 7-22</a>. Now you should be able to run the program and send and receive coded messages.</p>&#13;
<div class="imagef"><img src="../images/f0171-02.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch7fig22"/>Figure 7-22: The desktop icon for the executable JAR file, on Windows (left) and on macOS (right)</em></p>&#13;
<div class="note">&#13;
<p class="notet"><span class="noteg"><strong>NOTE</strong></span></p>&#13;
<p class="notep"><em>On newer versions of macOS, you’ll need to hold down CONTROL when you click the app the first time, then select <strong>Open</strong>, and finally click <strong>Open</strong> on the dialog that pops up to allow the app to run.</em></p>&#13;
</div>&#13;
<p class="indent">Some email programs may block files ending in <em>.jar</em> as a safety precaution, but you can upload the file to your favorite file-sharing program (Dropbox, Google Drive, or SkyDrive, for example) and share the file from there. Once your friend has the file, all they have to do is run it, and you can share scrambled messages with each other.</p>&#13;
<div class="note">&#13;
<p class="notet"><span class="noteg"><strong>NOTE</strong></span></p>&#13;
<p class="notep"><em>You can also export a runnable JAR file for the GUI guessing game app from <a id="ch3"/>Chapter 3. Just follow these same steps for the</em> GuessingGame.java <em>file in the</em> GuessingGame <em>project.</em></p>&#13;
</div>&#13;
<h3 class="h3"><span epub:type="pagebreak" id="page_172"/><a id="toc_lev131"/>What You Learned</h3>&#13;
<p class="noindent">You reused code from the text-based Secret Messages app in this app, and you substantially expanded your understanding of GUI interface design and programming. Here are some of the skills covered in this chapter:</p>&#13;
<p class="bull">• Naming GUI components and variables consistently for code readability and reusability</p>&#13;
<p class="bull">• Reusing algorithms, such as the <code>encode()</code> method that we copied from the text-based version of this app</p>&#13;
<p class="bull">• Declaring methods that accept parameters and return information</p>&#13;
<p class="bull">• Writing more advanced event handlers for a wider variety of GUI components, including buttons, sliders, and text fields</p>&#13;
<p class="bull">• Working with properties of GUI components in design view to customize the UI further</p>&#13;
<p class="bull">• Setting line wrap and word wrap for <code>JTextArea</code> objects</p>&#13;
<p class="bull">• Popping up <code>javax.swing.JOptionPane</code> dialogs, including message dialogs</p>&#13;
<p class="bull">• Adding and working with a <code>JSlider</code> GUI slider</p>&#13;
<p class="bull">• Changing a text field’s text using a <code>stateChanged()</code> event handler on a slider</p>&#13;
<p class="bull">• Exporting a runnable JAR file to share your app with friends</p>&#13;
<h3 class="h3"><a id="toc_lev132"/>Programming Challenges</h3>&#13;
<p class="noindent">Try these programming challenges to review and practice what you’ve learned and to expand your programming skills by trying something new. Visit the book’s website at <em><a href="https://www.nostarch.com/learnjava/">https://www.nostarch.com/learnjava/</a></em> to download sample solutions.</p>&#13;
<h4 class="h4"><em><a id="toc_lev133"/>#1: Movin’ On Up!</em></h4>&#13;
<p class="noindent">The Secret Messages app is great for sending simple, encoded messages to your friends, but it’s also fun to use all by yourself. One task that gets repetitive from time to time is copying encoded messages from the output text area and pasting them into the input text area. Your first programming challenge is to create a Move Up ^ button, which moves the encoded message up and automatically decodes it!</p>&#13;
<p class="indent">Place the Move Up ^ button next to the Encode/Decode button. Then, add an event handler that will get the text from the <code>txtOut</code> text area and set it as the text of the <code>txtIn</code> text area. As a bonus, have the event handler for the Move Up ^ button change the slider to the opposite of its value. You can also change the background of the button to match the rest of your app. A sample solution to this challenge is shown in <a href="ch7.xhtml#ch7fig23">Figure 7-23</a>.</p>&#13;
<div class="imagef"><span epub:type="pagebreak" id="page_173"/><img src="../images/f0173-01.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch7fig23"/>Figure 7-23: Adding a Move Up ^ button to swap the message and slider value to automatically decode your message</em></p>&#13;
<h4 class="h4"><em><a id="toc_lev134"/>#2: Scrolling Away!</em></h4>&#13;
<p class="noindent">Another improvement we could make to the app would be to handle even longer messages. In this case, we should add a scroll bar along the side and scroll down automatically whenever the user enters a message too long for the input text area. The <code>JTextArea</code> won’t add a scroll bar by itself, but Eclipse makes adding a scroll bar to any text area quick and easy!</p>&#13;
<p class="indent">In the design view, right-click either of the <code>JTextArea</code> boxes and select <strong>Surround with</strong> <span class="ent">▸</span> <strong>javax.swing.JScrollPane</strong>, as shown in <a href="ch7.xhtml#ch7fig24">Figure 7-24</a>.</p>&#13;
<div class="imagef"><img src="../images/f0173-02.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch7fig24"/>Figure 7-24: Adding an automatic scroll bar to a JTextArea</em></p>&#13;
<p class="indent">You’ll need to do this for the other <code>JTextArea</code> as well. Run the app when you’re finished, typing a long selection of text into the input text box to see the scroll bar appear automatically. In <a href="ch7.xhtml#ch7fig25">Figure 7-25</a>, I’ve pasted the entire US Constitution into the input text area and encoded it.</p>&#13;
<div class="imagef"><span epub:type="pagebreak" id="page_174"/><img src="../images/f0174-01.jpg" alt="Images"/></div>&#13;
<p class="fig-cap"><em><a id="ch7fig25"/>Figure 7-25: By adding a JScrollPane around each JTextArea, you can encode text as long as the US Constitution or even longer!</em></p>&#13;
<p class="indent">Only part of the text is visible in <a href="ch7.xhtml#ch7fig25">Figure 7-25</a>, but now there is a scroll bar along the right side of both text areas. The scroll bar lets us know that there’s more text than will fit into the text area, and all we have to do is scroll down to see it.</p>&#13;
<p class="indent">To customize the app even more, explore the Properties pane for each of the GUI components we’ve added and change various property values such as background colors, fonts, and so on. Make the app your own and share it with friends to show off what you’ve created!</p>&#13;
<h4 class="h4"><em><a id="toc_lev135"/>#3: Changing the Text to Change the Slider</em></h4>&#13;
<p class="noindent">For this challenge, let’s make one last tweak to the user interface. When the user slides the slider, the key value shown in the text field changes. But what if we want the slider to move whenever the value in the text field changes?</p>&#13;
<div class="note">&#13;
<p class="notet"><span class="noteg"><strong>HINT</strong></span></p>&#13;
<p class="notep"><em>You’ll want to add an event handler to the txtKey text field. Right-click the txtKey JTextField and then go to <strong>Add event handler</strong></em> <span class="ent">▸</span> <em><strong>key</strong></em> <span class="ent">▸</span> <em><strong>keyReleased</strong></em>. <em>This will create an event handler that listens for keystrokes in the txtKey text field.</em></p>&#13;
</div>&#13;
<p class="indent">To accomplish this, you’ll need to write code for the event handler that will get the integer value from the text field and set the slider to that value. Remember to use a <code>try-catch</code> block when dealing with user-supplied text. Good luck!</p>&#13;
</body></html>