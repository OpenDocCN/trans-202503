<html><head></head><body><section class="chapter" title="Chapter&#xA0;3.&#xA0;Understanding Objects" epub:type="chapter" id="understanding_objects"><div class="titlepage"><div><div><h2 class="title">Chapter 3. Understanding Objects</h2></div></div></div><p><a id="iddle1235" class="indexterm"/>Even though there are a number of builtin reference types in JavaScript, you will most likely create your own objects fairly frequently. As you do so, keep in mind that objects in JavaScript are dynamic, meaning that they can change at any point during code execution. Whereas class-based languages lock down objects based on a class definition, JavaScript objects have no such restrictions.</p><p>A large part of JavaScript programming is managing those objects, which is why understanding how objects work is key to understanding JavaScript as a whole. This is discussed in more detail later in this chapter.</p><div class="sect1" title="Defining Properties"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="defining_properties">Defining Properties</h2></div></div></div><p><a id="iddle1210" class="indexterm"/><a id="iddle1242" class="indexterm"/><a id="iddle1252" class="indexterm"/><a id="iddle1273" class="indexterm"/><a id="iddle1310" class="indexterm"/><a id="iddle1331" class="indexterm"/>Recall from <a class="xref" href="ch01.html" title="Chapter 1. Primitive and Reference Types">Chapter 1</a> that there are two basic ways to create your own objects: using the <code class="literal">Object</code> constructor and using an object literal. For example:</p><a id="pro_id00055"/><pre class="programlisting">  <span class="pd_green"><code class="kd">var</code></span> <code class="nx">person1</code> <span class="pd_ash"><code class="o">=</code></span> <code class="p">{</code>
      <code class="nx">name</code><code class="o">:</code> <span class="pd_red"><code class="s2">"Nicholas"</code></span>
  <code class="p">};</code>

  <span class="pd_green"><code class="kd">var</code></span> <code class="nx">person2</code> <span class="pd_ash"><code class="o">=</code></span> <span class="pd_green"><code class="k">new</code> <code class="nb">Object</code></span><code class="p">();</code>
  <code class="nx">person2</code><code class="p">.</code><code class="nx">name</code> <span class="pd_ash"><code class="o">=</code></span> <span class="pd_red"><code class="s2">"Nicholas"</code></span><code class="p">;</code>

<code class="err">❶</code> <code class="nx">person1</code><code class="p">.</code><code class="nx">age</code> <span class="pd_ash"><code class="o">=</code></span> <span class="pd_red"><code class="s2">"Redacted"</code></span><code class="p">;</code>
  <code class="nx">person2</code><code class="p">.</code><code class="nx">age</code> <span class="pd_ash"><code class="o">=</code></span> <span class="pd_red"><code class="s2">"Redacted"</code></span><code class="p">;</code>

<code class="err">❷</code> <code class="nx">person1</code><code class="p">.</code><code class="nx">name</code> <span class="pd_ash"><code class="o">=</code></span> <span class="pd_red"><code class="s2">"Greg"</code></span><code class="p">;</code>
  <code class="nx">person2</code><code class="p">.</code><code class="nx">name</code> <code class="o">=</code> <span class="pd_red"><code class="s2">"Michael"</code></span><code class="p">;</code></pre><p>Both <code class="literal">person1</code> and <code class="literal">person2</code> are objects with a <code class="literal">name</code> property. Later in the example, both objects are assigned an <code class="literal">age</code> property ❶. You could do this immediately after the definition of the object or much later. Objects you create are always wide open for modification unless you specify otherwise (more on that in <a class="xref" href="ch03.html#preventing_object_modification" title="Preventing Object Modification">Preventing Object Modification</a>). The last part of this example changes the value of <code class="literal">name</code> on each object ❷; property values can be changed at any time as well.</p><p>When a property is first added to an object, JavaScript uses an internal method called <code class="literal">[[Put]]</code> on the object. The <code class="literal">[[Put]]</code> method creates a spot in the object to store the property. You can compare this to adding a key to a hash table for the first time. This operation specifies not just the initial value, but also some attributes of the property. So, in the previous example, when the <code class="literal">name</code> and <code class="literal">age</code> properties are first defined on each object, the <code class="literal">[[Put]]</code> method is invoked for each.</p><p>The result of calling <code class="literal">[[Put]]</code> is the creation of an <span class="emphasis"><em>own property</em></span> on the object. An own property simply indicates that the specific instance of the object owns that property. The property is stored directly on the instance, and all operations on the property must be performed through that object.</p><div class="note" title="Note"><h3 class="title"><a id="ch03note01"/>Note</h3><p><span class="emphasis"><em>Own properties are distinct from</em></span> prototype properties, <span class="emphasis"><em>which are discussed in <a class="xref" href="ch04.html" title="Chapter 4. Constructors and Prototypes">Chapter 4</a>.</em></span></p></div><p>When a new value is assigned to an existing property, a separate operation called <code class="literal">[[Set]]</code> takes place. This operation replaces the current value of the property with the new one. In the previous example, setting <code class="literal">name</code> <a id="iddle1091" class="indexterm"/><a id="iddle1108" class="indexterm"/><a id="iddle1143" class="indexterm"/><a id="iddle1153" class="indexterm"/><a id="iddle1275" class="indexterm"/><a id="iddle1369" class="indexterm"/>to a second value results in a call to <code class="literal">[[Set]]</code>. See <a class="xref" href="ch03.html#adding_and_changing_properties_of_an_obj" title="Figure 3-1. Adding and changing properties of an object">Figure 3-1</a> for a step-by-step view of what happened to <code class="literal">person1</code> behind the scenes as its <code class="literal">name</code> and <code class="literal">age</code> properties were changed.</p><div class="figure"><a id="adding_and_changing_properties_of_an_obj"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00004"/><img src="figs/web/oojs03_01.png.jpg" alt="Adding and changing properties of an object"/></div></div><div class="figure-title">Figure 3-1. Adding and changing properties of an object</div></div><p>In the first part of the diagram, an object literal is used to create the <code class="literal">person1</code> object. This performs an implicit <code class="literal">[[Put]]</code> for the <code class="literal">name</code> property. Assigning a value to <code class="literal">person1.age</code> performs a <code class="literal">[[Put]]</code> for the <code class="literal">age</code> property. However, setting <code class="literal">person1.name</code> to a new value (<code class="literal">"Greg"</code>) performs a <code class="literal">[[Set]]</code> operation on the <code class="literal">name</code> property, overwriting the existing property value.</p></div><div class="sect1" title="Detecting Properties"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="detecting_properties">Detecting Properties</h2></div></div></div><p>Because properties can be added at any time, it’s sometimes necessary to check whether a property exists in the object. New JavaScript developers often incorrectly use patterns like the following to detect whether a property exists:</p><a id="pro_id00056"/><pre class="programlisting"><span class="pd_green1"><code class="c1">// unreliable</code></span>
<span class="pd_green"><code class="k">if</code></span> <code class="p">(</code><code class="nx">person1</code><code class="p">.</code><code class="nx">age</code><code class="p">)</code> <code class="p">{</code>
    <span class="pd_green1"><code class="c1">// do something with age</code></span>
<code class="p">}</code></pre><p>The problem with this pattern is how JavaScript’s type coercion affects the outcome. The <code class="literal">if</code> condition evaluates to <code class="literal">true</code> if the value is <span class="emphasis"><em>truthy</em></span> (an object, a nonempty string, a nonzero number, or <code class="literal">true</code>) and evaluates to <code class="literal">false</code> if the value is <span class="emphasis"><em>falsy</em></span> (<code class="literal">null</code>, <code class="literal">undefined</code>, <code class="literal">0</code>, <code class="literal">false</code>, <code class="literal">NaN</code>, or an empty string). Because an object property can contain one of these falsy values, the example code can yield false negatives. For instance, if <code class="literal">person1.age</code> is <code class="literal">0</code>, then the <code class="literal">if</code> condition will not be met even though the property exists. A more reliable way to test for the existence of a property is with the <code class="literal">in</code> operator.</p><p><a id="iddle1138" class="indexterm"/><a id="iddle1251" class="indexterm"/>The <code class="literal">in</code> operator looks for a property with a given name in a specific object and returns <code class="literal">true</code> if it finds it. In effect, the <code class="literal">in</code> operator checks to see if the given key exists in the hash table. For example, here’s what happens when <code class="literal">in</code> is used to check for some properties in the <code class="literal">person1</code> object:</p><a id="pro_id00057"/><pre class="programlisting"><code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"name"</code></span> <span class="pd_green"><code class="k">in</code></span> <code class="nx">person1</code><code class="p">);</code>     <span class="pd_green1"><code class="c1">// true</code></span>
<code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"age"</code></span> <span class="pd_green"><code class="k">in</code></span> <code class="nx">person1</code><code class="p">);</code>      <span class="pd_green1"><code class="c1">// true</code></span>
<code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"title"</code></span> <span class="pd_green"><code class="k">in</code></span> <code class="nx">person1</code><code class="p">);</code>    <span class="pd_green1"><code class="c1">// false</code></span></pre><p>Keep in mind that methods are just properties that reference functions, so you can check for the existence of a method in the same way. The following adds a new function, <code class="literal">sayName()</code>, to <code class="literal">person1</code> and uses <code class="literal">in</code> to confirm the function’s presence.</p><a id="pro_id00058"/><pre class="programlisting"><span class="pd_green"><code class="kd">var</code></span> <code class="nx">person1</code> <span class="pd_ash"><code class="o">=</code></span> <code class="p">{</code>
    <code class="nx">name</code><code class="o">:</code> <span class="pd_red"><code class="s2">"Nicholas"</code></span><code class="p">,</code>
    <code class="nx">sayName</code><code class="o">:</code> <span class="pd_green"><code class="kd">function</code></span><code class="p">()</code> <code class="p">{</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_green"><code class="k">this</code></span><code class="p">.</code><code class="nx">name</code><code class="p">);</code>
    <code class="p">}</code>
<code class="p">};</code>

<code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"sayName"</code></span> <span class="pd_green"><code class="k">in</code></span> <code class="nx">person1</code><code class="p">);</code>   <span class="pd_green1"><code class="c1">// true</code></span></pre><p>In most cases, the <code class="literal">in</code> operator is the best way to determine whether the property exists in an object. It has the added benefit of not evaluating the value of the property, which can be important if such an evaluation is likely to cause a performance issue or an error.</p><p>In some cases, however, you might want to check for the existence of a property only if it is an own property. The <code class="literal">in</code> operator checks for both own properties and prototype properties, so you’ll need to take a different approach. Enter the <code class="literal">hasOwnProperty()</code> method, which is present on all objects and returns <code class="literal">true</code> only if the given property exists and is an own property. For example, the following code compares the results of using <code class="literal">in</code> versus <code class="literal">hasOwnProperty()</code> on different properties in <code class="literal">person1</code>:</p><a id="pro_id00059"/><pre class="programlisting">  <span class="pd_green"><code class="kd">var</code></span> <code class="nx">person1</code> <span class="pd_ash"><code class="o">=</code></span> <code class="p">{</code>
      <code class="nx">name</code><code class="o">:</code> <span class="pd_red"><code class="s2">"Nicholas"</code></span><code class="p">,</code>
      <code class="nx">sayName</code><code class="o">:</code> <span class="pd_green"><code class="kd">function</code></span><code class="p">()</code> <code class="p">{</code>
          <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_green"><code class="k">this</code></span><code class="p">.</code><code class="nx">name</code><code class="p">);</code>
      <code class="p">}</code>
  <code class="p">};</code>

  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"name"</code></span> <span class="pd_green"><code class="k">in</code></span> <code class="nx">person1</code><code class="p">);</code>                     <span class="pd_green1"><code class="c1">// true</code></span>
  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">person1</code><code class="p">.</code><code class="nx">hasOwnProperty</code><code class="p">(</code><span class="pd_red"><code class="s2">"name"</code></span><code class="p">));</code>        <span class="pd_green1"><code class="c1">// true</code></span>

  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"toString"</code></span> <span class="pd_green"><code class="k">in</code></span> <code class="nx">person1</code><code class="p">);</code>                 <span class="pd_green1"><code class="c1">// true</code></span>
<code class="err">❶</code> <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">person1</code><code class="p">.</code><code class="nx">hasOwnProperty</code><code class="p">(</code><span class="pd_red"><code class="s2">"toString"</code></span><code class="p">));</code>    <span class="pd_green1"><code class="c1">// false</code></span></pre><p><a id="iddle1087" class="indexterm"/><a id="iddle1088" class="indexterm"/><a id="iddle1205" class="indexterm"/><a id="iddle1279" class="indexterm"/><a id="iddle1323" class="indexterm"/><a id="iddle1365" class="indexterm"/>In this example, <code class="literal">name</code> is an own property of <code class="literal">person1</code>, so both the <code class="literal">in</code> operator and <code class="literal">hasOwnProperty()</code> return <code class="literal">true</code>. The <code class="literal">toString()</code> method, however, is a prototype property that is present on all objects. The <code class="literal">in</code> operator returns <code class="literal">true</code> for <code class="literal">toString()</code>, but <code class="literal">hasOwnProperty()</code> returns <code class="literal">false</code> ❶. This is an important distinction that is discussed further in <a class="xref" href="ch04.html" title="Chapter 4. Constructors and Prototypes">Chapter 4</a>.</p></div><div class="sect1" title="Removing Properties"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="removing_properties">Removing Properties</h2></div></div></div><p>Just as properties can be added to objects at any time, they can also be removed. Simply setting a property to <code class="literal">null</code> doesn’t actually remove the property completely from the object, though. Such an operation calls <code class="literal">[[Set]]</code> with a value of <code class="literal">null</code>, which, as you saw earlier in the chapter, only replaces the value of the property. You need to use the <code class="literal">delete</code> operator to completely remove a property from an object.</p><p>The <code class="literal">delete</code> operator works on a single object property and calls an internal operation named <code class="literal">[[Delete]]</code>. You can think of this operation as removing a key/value pair from a hash table. When the <code class="literal">delete</code> operator is successful, it returns <code class="literal">true</code>. (Some properties can’t be removed, and this is discussed in more detail later in the chapter.) For example, the following listing shows the <code class="literal">delete</code> operator at work:</p><a id="pro_id00060"/><pre class="programlisting">  <span class="pd_green"><code class="kd">var</code></span> <code class="nx">person1</code> <span class="pd_ash"><code class="o">=</code></span> <code class="p">{</code>
      <code class="nx">name</code><code class="o">:</code> <span class="pd_red"><code class="s2">"Nicholas"</code></span>
  <code class="p">};</code>

  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"name"</code></span> <span class="pd_green"><code class="k">in</code></span> <code class="nx">person1</code><code class="p">);</code>    <span class="pd_green1"><code class="c1">// true</code></span>

  <span class="pd_green"><code class="k">delete</code></span> <code class="nx">person1</code><code class="p">.</code><code class="nx">name</code><code class="p">;</code>               <span class="pd_green1"><code class="c1">// true - not output</code></span>
  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"name"</code></span> <span class="pd_green"><code class="k">in</code></span> <code class="nx">person1</code><code class="p">);</code>    <span class="pd_green1"><code class="c1">// false</code></span>
<code class="err">❶</code> <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">person1</code><code class="p">.</code><code class="nx">name</code><code class="p">);</code>         <span class="pd_green1"><code class="c1">// undefined</code></span></pre><p>In this example, the <code class="literal">name</code> property is deleted from <code class="literal">person1</code>. The <code class="literal">in</code> operator returns <code class="literal">false</code> after the operation is complete. Also, note that attempting to access a property that doesn’t exist will just return <code class="literal">undefined</code> ❶. <a class="xref" href="ch03.html#when_you_delete_the_name_propertycomma_i" title="Figure 3-2. When you delete the name property, it completely disappears from person1.">Figure 3-2</a> shows how <code class="literal">delete</code> affects an object.</p><div class="figure"><a id="when_you_delete_the_name_propertycomma_i"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00005"/><img src="figs/web/oojs03_02.png.jpg" alt="When you delete the name property, it completely disappears from person1."/></div></div><div class="figure-title">Figure 3-2. When you <code class="literal">delete</code> the name property, it completely disappears from <code class="literal">person1</code>.</div></div></div><div class="sect1" title="Enumeration"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="enumeration">Enumeration</h2></div></div></div><p><a id="iddle1099" class="indexterm"/><a id="iddle1111" class="indexterm"/><a id="iddle1171" class="indexterm"/><a id="iddle1223" class="indexterm"/><a id="iddle1277" class="indexterm"/>By default, all properties that you add to an object are <span class="emphasis"><em>enumerable</em></span>, which means that you can iterate over them using a <code class="literal">for-in</code> loop. Enumerable properties have their internal <code class="literal">[[Enumerable]]</code> attributes set to <code class="literal">true</code>. The <code class="literal">for-in</code> loop enumerates all enumerable properties on an object, assigning the property name to a variable. For example, the following loop outputs the property names and values of an object:</p><a id="pro_id00061"/><pre class="programlisting"><span class="pd_green"><code class="kd">var</code></span> <code class="nx">property</code><code class="p">;</code>

<span class="pd_green"><code class="k">for</code></span> <code class="p">(</code><code class="nx">property</code> <code class="k">in</code> <code class="nx">object</code><code class="p">)</code> <code class="p">{</code>
    <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"Name: "</code></span> <span class="pd_ash"><code class="o">+</code></span> <code class="nx">property</code><code class="p">);</code>
    <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"Value: "</code></span> <span class="pd_ash"><code class="o">+</code></span> <code class="nx">object</code><code class="p">[</code><code class="nx">property</code><code class="p">]);</code>
<code class="p">}</code></pre><p>Each time through the <code class="literal">for-in</code> loop, the <code class="literal">property</code> variable is filled with the next enumerable property on the object until all such properties have been used. At that point, the loop is finished and code execution continues. This example uses bracket notation to retrieve the value of the object property and output it to the console, which is one of the primary use cases for bracket notation in JavaScript.</p><p>If you just need a list of an object’s properties to use later in your program, ECMAScript 5 introduced the <code class="literal">Object.keys()</code> method to retrieve an array of enumerable property names, as shown here:</p><a id="pro_id00062"/><pre class="programlisting"><code class="err">❶</code> <span class="pd_green"><code class="kd">var</code></span> <code class="nx">properties</code> <span class="pd_ash"><code class="o">=</code></span> <span class="pd_green"><code class="nb">Object</code></span><code class="p">.</code><code class="nx">keys</code><code class="p">(</code><code class="nx">object</code><code class="p">);</code>

  <span class="pd_green1"><code class="c1">// if you want to mimic for-in behavior</code></span>
  <span class="pd_green"><code class="kd">var</code></span> <code class="nx">i</code><code class="p">,</code> <code class="nx">len</code><code class="p">;</code>

  <span class="pd_green"><code class="k">for</code></span> <code class="p">(</code><code class="nx">i</code><span class="pd_ash"><code class="o">=</code><code class="mi">0</code></span><code class="p">,</code> <code class="nx">len</code><code class="o">=</code><code class="nx">properties</code><code class="p">.</code><code class="nx">length</code><code class="p">;</code> <code class="nx">i</code> <span class="pd_ash"><code class="o">&lt;</code></span> <code class="nx">len</code><code class="p">;</code> <code class="nx">i</code><span class="pd_ash"><code class="o">++</code></span><code class="p">){</code>
      <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"Name: "</code></span> <span class="pd_ash"><code class="o">+</code></span> <code class="nx">properties</code><code class="p">[</code><code class="nx">i</code><code class="p">]);</code>
      <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"Value: "</code></span> <span class="pd_ash"><code class="o">+</code></span> <code class="nx">object</code><code class="p">[</code><code class="nx">properties</code><code class="p">[</code><code class="nx">i</code><code class="p">]]);</code>
  <code class="p">}</code></pre><p>This example uses <code class="literal">Object.keys()</code> to retrieve the enumerable properties from an object ❶. A <code class="literal">for</code> loop is then used to iterate over the properties and output the name and value. Typically, you would use <code class="literal">Object.keys()</code> in situations where you want to operate on an array of property names and <code class="literal">for-in</code> when you don’t need an array.</p><div class="note" title="Note"><h3 class="title"><a id="ch03note02"/>Note</h3><p><span class="emphasis"><em>There is a difference between the enumerable properties returned in a for-in loop and the ones returned by Object.keys(). The for-in loop also enumerates prototype properties, while Object.keys() returns only own (instance) properties. The differences between prototype and own properties are discussed in <a class="xref" href="ch04.html" title="Chapter 4. Constructors and Prototypes">Chapter 4</a>.</em></span></p></div><p><a id="iddle1010" class="indexterm"/><a id="iddle1078" class="indexterm"/><a id="iddle1135" class="indexterm"/><a id="iddle1281" class="indexterm"/><a id="iddle1285" class="indexterm"/><a id="iddle1311" class="indexterm"/><a id="iddle1333" class="indexterm"/>Keep in mind that not all properties are enumerable. In fact, most of the native methods on objects have their <code class="literal">[[Enumerable]]</code> attribute set to <code class="literal">false</code>. You can check whether a property is enumerable by using the <code class="literal">propertyIsEnumerable()</code> method, which is present on every object:</p><a id="pro_id00063"/><pre class="programlisting">  <span class="pd_red"><code class="kd">var</code></span> <code class="nx">person1</code> <span class="pd_ash"><code class="o">=</code></span> <code class="p">{</code>
      <code class="nx">name</code><code class="o">:</code> <span class="pd_red"><code class="s2">"Nicholas"</code></span>
  <code class="p">};</code>

  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"name"</code></span> <span class="pd_green"><code class="k">in</code></span> <code class="nx">person1</code><code class="p">);</code>                          <span class="pd_green1"><code class="c1">// true</code></span>
<code class="err">❶</code> <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">person1</code><code class="p">.</code><code class="nx">propertyIsEnumerable</code><code class="p">(</code><span class="pd_red"><code class="s2">"name"</code></span><code class="p">));</code>       <span class="pd_green1"><code class="c1">// true</code></span>

  <span class="pd_green"><code class="kd">var</code></span> <code class="nx">properties</code> <span class="pd_ash"><code class="o">=</code></span> <span class="pd_green"><code class="nb">Object</code></span><code class="p">.</code><code class="nx">keys</code><code class="p">(</code><code class="nx">person1</code><code class="p">);</code>

  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"length"</code></span> <span class="pd_green"><code class="k">in</code></span> <code class="nx">properties</code><code class="p">);</code>                     <span class="pd_green1"><code class="c1">// true</code></span>
<code class="err">❷</code> <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">properties</code><code class="p">.</code><code class="nx">propertyIsEnumerable</code><code class="p">(</code><span class="pd_red"><code class="s2">"length"</code></span><code class="p">));</code>  <span class="pd_green1"><code class="c1">// false</code></span></pre><p>Here, the property <code class="literal">name</code> is enumerable, as it is a custom property defined on <code class="literal">person1</code> ❶. The <code class="literal">length</code> property for the <code class="literal">properties</code> array, on the other hand, is not enumerable ❷ because it’s a built-in property on <code class="literal">Array.prototype</code>. You’ll find that many native properties are not enumerable by default.</p></div><div class="sect1" title="Types of Properties"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="types_of_properties">Types of Properties</h2></div></div></div><p>There are two different types of properties: data properties and accessor properties. <span class="emphasis"><em>Data properties</em></span> contain a value, like the <code class="literal">name</code> property from earlier examples in this chapter. The default behavior of the <code class="literal">[[Put]]</code> method is to create a data property, and every example up to this point in the chapter has used data properties. <span class="emphasis"><em>Accessor properties</em></span> don’t contain a value but instead define a function to call when the property is read (called a <span class="emphasis"><em>getter</em></span>), and a function to call when the property is written to (called a <span class="emphasis"><em>setter</em></span>). Accessor properties only require either a getter or a setter, though they can have both.</p><p>There is a special syntax to define an accessor property using an object literal:</p><a id="pro_id00064"/><pre class="programlisting">  <span class="pd_green"><code class="kd">var</code></span> <code class="nx">person1</code> <span class="pd_ash"><code class="o">=</code></span> <code class="p">{</code>
<code class="err">❶</code>     <code class="nx">_name</code><code class="o">:</code> <span class="pd_red"><code class="s2">"Nicholas"</code></span><code class="p">,</code>

<code class="err">❷</code>     <code class="nx">get</code> <code class="nx">name</code><code class="p">()</code> <code class="p">{</code>
          <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"Reading name"</code></span><code class="p">);</code>
          <span class="pd_green"><code class="k">return</code> <code class="k">this</code></span><code class="p">.</code><code class="nx">_name</code><code class="p">;</code>
      <code class="p">},</code>

<code class="err">❸</code>     <code class="nx">set</code> <code class="nx">name</code><code class="p">(</code><code class="nx">value</code><code class="p">)</code> <code class="p">{</code>
          <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"Setting name to %s"</code></span><code class="p">,</code> <code class="nx">value</code><code class="p">);</code>
          <span class="pd_green"><code class="k">this</code></span><code class="p">.</code><code class="nx">_name</code> <span class="pd_ash"><code class="o">=</code></span> <code class="nx">value</code><code class="p">;</code>
      <code class="p">}</code>
  <code class="p">};</code>

  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">person1</code><code class="p">.</code><code class="nx">name</code><code class="p">);</code>    <span class="pd_green1"><code class="c1">// "Reading name" then "Nicholas"</code></span>

  <code class="nx">person1</code><code class="p">.</code><code class="nx">name</code> <code class="o">=</code> <span class="pd_red"><code class="s2">"Greg"</code></span><code class="p">;</code>
  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">person1</code><code class="p">.</code><code class="nx">name</code><code class="p">);</code>    <span class="pd_green1"><code class="c1">// "Setting name to Greg" then "Greg"</code></span></pre><p><a id="iddle1008" class="indexterm"/><a id="iddle1028" class="indexterm"/><a id="iddle1282" class="indexterm"/><a id="iddle1312" class="indexterm"/><a id="iddle1377" class="indexterm"/><a id="iddle1389" class="indexterm"/>This example defines an accessor property called <code class="literal">name</code>. There is a data property called <code class="literal">_name</code> that contains the actual value for the property ❶. (The leading underscore is a common convention to indicate that the property is considered to be private, though in reality it is still public.) The syntax used to define the getter ❷ and setter ❸ for <code class="literal">name</code> looks a lot like a function but without the <code class="literal">function</code> keyword. The special keywords <code class="literal">get</code> and <code class="literal">set</code> are used before the accessor property name, followed by parentheses and a function body. Getters are expected to return a value, while setters receive the value being assigned to the property as an argument.</p><p>Even though this example uses <code class="literal">_name</code> to store the property data, you could just as easily store the data in a variable or even in another object. This example simply adds logging to the behavior of the property; there’s usually no reason to use accessor properties if you are only storing the data in another property—just use the property itself. Accessor properties are most useful when you want the assignment of a value to trigger some sort of behavior, or when reading a value requires the calculation of the desired return value.</p><div class="note" title="Note"><h3 class="title"><a id="ch03note03"/>Note</h3><p><span class="emphasis"><em>You don’t need to define both a getter and a setter; you can choose one or both. If you define only a getter, then the property becomes read-only, and attempts to write to it will fail silently in nonstrict mode and throw an error in strict mode. If you define only a setter, then the property becomes write-only, and attempts to read the value will fail silently in both strict and nonstrict modes.</em></span></p></div></div><div class="sect1" title="Property Attributes"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="property_attributes">Property Attributes</h2></div></div></div><p>Prior to ECMAScript 5, there was no way to specify whether a property should be enumerable. In fact, there was no way to access the internal attributes of a property at all. ECMAScript 5 changed this by introducing several ways of interacting with property attributes directly, as well as introducing new attributes to support additional functionality. It’s now possible to create properties that behave the same way as builtin JavaScript properties. This section covers in detail the attributes of both data and accessor properties, starting with the ones they have in common.</p><div class="sect2" title="Common Attributes"><div class="titlepage"><div><div><h3 class="title" id="common_attributes">Common Attributes</h3></div></div></div><p><a id="iddle1051" class="indexterm"/><a id="iddle1085" class="indexterm"/><a id="iddle1097" class="indexterm"/><a id="iddle1213" class="indexterm"/><a id="iddle1283" class="indexterm"/><a id="iddle1286" class="indexterm"/>There are two property attributes shared between data and accessor properties. One is <code class="literal">[[Enumerable]]</code>, which determines whether you can iterate over the property. The other is <code class="literal">[[Configurable]]</code>, which determines whether the property can be changed. You can remove a configurable property using <code class="literal">delete</code> and can change its attributes at any time. (This also means configurable properties can be changed from data to accessor properties and vice versa.) By default, all properties you declare on an object are both enumerable and configurable.</p><p>If you want to change property attributes, you can use the <code class="literal">Object.defineProperty()</code> method. This method accepts three arguments: the object that owns the property, the property name, and a <span class="emphasis"><em>property descriptor</em></span> object containing the attributes to set. The descriptor has properties with the same name as the internal attributes but without the square brackets. So you use <code class="literal">enumerable</code> to set <code class="literal">[[Enumerable]]</code>, and <code class="literal">configurable</code> to set <code class="literal">[[Configurable]]</code>. For example, suppose you want to make an object property nonenumerable and nonconfigurable:</p><a id="pro_id00065"/><pre class="programlisting">  <span class="pd_green"><code class="kd">var</code></span> <code class="nx">person1</code> <span class="pd_ash"><code class="o">=</code></span> <code class="p">{</code>
<code class="err">❶</code>     <code class="nx">name</code><code class="o">:</code> <span class="pd_red"><code class="s2">"Nicholas"</code></span>
  <code class="p">};</code>

  <span class="pd_green"><code class="nb">Object</code></span><code class="p">.</code><code class="nx">defineProperty</code><code class="p">(</code><code class="nx">person1</code><code class="p">,</code> <span class="pd_red"><code class="s2">"name"</code></span><code class="p">,</code> <code class="p">{</code>
<code class="err">❷</code>     <code class="nx">enumerable</code><code class="o">:</code> <span class="pd_green"><code class="kc">false</code></span>
  <code class="p">});</code>

  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"name"</code></span> <span class="pd_green"><code class="k">in</code></span> <code class="nx">person1</code><code class="p">);</code>                      <span class="pd_green1"><code class="c1">// true</code></span>
<code class="err">❸</code> <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">person1</code><code class="p">.</code><code class="nx">propertyIsEnumerable</code><code class="p">(</code><span class="pd_red"><code class="s2">"name"</code></span><code class="p">));</code>   <span class="pd_green1"><code class="c1">// false</code></span>

  <span class="pd_green"><code class="kd">var</code></span> <code class="nx">properties</code> <span class="pd_ash"><code class="o">=</code></span> <span class="pd_green"><code class="nb">Object</code></span><code class="p">.</code><code class="nx">keys</code><code class="p">(</code><code class="nx">person1</code><code class="p">);</code>
  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">properties</code><code class="p">.</code><code class="nx">length</code><code class="p">);</code>                      <span class="pd_green1"><code class="c1">// 0</code></span>

  <span class="pd_green"><code class="nb">Object</code></span><code class="p">.</code><code class="nx">defineProperty</code><code class="p">(</code><code class="nx">person1</code><code class="p">,</code> <span class="pd_red"><code class="s2">"name"</code></span><code class="p">,</code> <code class="p">{</code>
<code class="err">❹</code>     <code class="nx">configurable</code><code class="o">:</code> <span class="pd_green"><code class="kc">false</code></span>
  <code class="p">});</code>

  <span class="pd_green1"><code class="c1">// try to delete the Property</code></span>
  <span class="pd_green"><code class="k">delete</code></span> <code class="nx">person1</code><code class="p">.</code><code class="nx">name</code><code class="p">;</code>
<code class="err">❺</code> <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"name"</code></span> <span class="pd_green"><code class="k">in</code></span> <code class="nx">person1</code><code class="p">);</code>                      <span class="pd_green1"><code class="c1">// true</code></span>
  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">person1</code><code class="p">.</code><code class="nx">name</code><code class="p">);</code>                           <span class="pd_green1"><code class="c1">// "Nicholas"</code></span>

<code class="err">❻</code> <span class="pd_green"><code class="nb">Object</code></span><code class="p">.</code><code class="nx">defineProperty</code><code class="p">(</code><code class="nx">person1</code><code class="p">,</code> <span class="pd_red"><code class="s2">"name"</code></span><code class="p">,</code> <code class="p">{</code>             <span class="pd_green1"><code class="c1">// error!!!</code></span>
      <code class="nx">configurable</code><code class="o">:</code> <span class="pd_green"><code class="kc">true</code></span>
  <code class="p">});</code></pre><p>The <code class="literal">name</code> property is defined as usual ❶, but it’s then modified to set its <code class="literal">[[Enumerable]]</code> attribute to <code class="literal">false</code> ❷. The <code class="literal">propertyIsEnumerable()</code> method now returns <code class="literal">false</code> ❸ because it references the new value of <code class="literal">[[Enumerable]]</code>. <a id="iddle1030" class="indexterm"/><a id="iddle1079" class="indexterm"/><a id="iddle1379" class="indexterm"/><a id="iddle1388" class="indexterm"/>After that, <code class="literal">name</code> is changed to be nonconfigurable ❹. From now on, attempts to delete <code class="literal">name</code> fail because the property can’t be changed, so <code class="literal">name</code> is still present on <code class="literal">person1</code> ❺. Calling <code class="literal">Object.defineProperty()</code> on <code class="literal">name</code> again would also result in no further changes to the property. Effectively, <code class="literal">name</code> is locked down as a property on <code class="literal">person1</code>.</p><p>The last piece of the code tries to redefine <code class="literal">name</code> to be configurable once again ❻. However, this throws an error because you can’t make a nonconfigurable property configurable again. Attempting to change a data property into an accessor property or vice versa should also throw an error in this case.</p><div class="note" title="Note"><h3 class="title"><a id="ch03note04"/>Note</h3><p><span class="emphasis"><em>When JavaScript is running in strict mode, attempting to delete a nonconfigurable property results in an error. In nonstrict mode, the operation silently fails.</em></span></p></div></div><div class="sect2" title="Data Property Attributes"><div class="titlepage"><div><div><h3 class="title" id="data_property_attributes">Data Property Attributes</h3></div></div></div><p>Data properties possess two additional attributes that accessors do not. The first is <code class="literal">[[Value]]</code>, which holds the property value. This attribute is filled in automatically when you create a property on an object. All property values are stored in <code class="literal">[[Value]]</code>, even if the value is a function.</p><p>The second attribute is <code class="literal">[[Writable]]</code>, which is a Boolean value indicating whether the property can be written to. By default, all properties are writable unless you specify otherwise.</p><p>With these two additional attributes, you can fully define a data property using <code class="literal">Object.defineProperty()</code> even if the property doesn’t already exist. Consider this code:</p><a id="pro_id00066"/><pre class="programlisting"><span class="pd_green"><code class="kd">var</code></span> <code class="nx">person1</code> <span class="pd_ash"><code class="o">=</code></span> <code class="p">{</code>
    <code class="nx">name</code><code class="o">:</code> <span class="pd_red"><code class="s2">"Nicholas"</code></span>
<code class="p">};</code></pre><p>You’ve seen this snippet throughout this chapter; it adds the <code class="literal">name</code> property to <code class="literal">person1</code> and sets its value. You can achieve the same result using the following (more verbose) code:</p><a id="pro_id00067"/><pre class="programlisting"><span class="pd_green"><code class="kd">var</code></span> <code class="nx">person1</code> <span class="pd_ash"><code class="o">=</code></span> <code class="p">{};</code>

<span class="pd_green"><code class="nb">Object</code></span><code class="p">.</code><code class="nx">defineProperty</code><code class="p">(</code><code class="nx">person1</code><code class="p">,</code> <span class="pd_red"><code class="s2">"name"</code></span><code class="p">,</code> <code class="p">{</code>
    <code class="nx">value</code><code class="o">:</code> <span class="pd_red"><code class="s2">"Nicholas"</code></span><code class="p">,</code>
    <code class="nx">enumerable</code><code class="o">:</code> <span class="pd_green"><code class="kc">true</code></span><code class="p">,</code>
    <code class="nx">configurable</code><code class="o">:</code> <span class="pd_green"><code class="kc">true</code></span><code class="p">,</code>
    <code class="nx">writable</code><code class="o">:</code> <span class="pd_green"><code class="kc">true</code></span>
<code class="p">});</code></pre><p><a id="iddle1011" class="indexterm"/><a id="iddle1029" class="indexterm"/><a id="iddle1132" class="indexterm"/><a id="iddle1332" class="indexterm"/>When <code class="literal">Object.defineProperty()</code> is called, it first checks to see if the property exists. If the property doesn’t exist, a new one is added with the attributes specified in the descriptor. In this case, <code class="literal">name</code> isn’t already a property of <code class="literal">person1</code>, so it is created.</p><p>When you are defining a new property with <code class="literal">Object.defineProperty()</code>, it’s important to specify all of the attributes because Boolean attributes automatically default to <code class="literal">false</code> otherwise. For example, the following code creates a <code class="literal">name</code> property that is nonenumerable, nonconfigurable, and nonwritable because it doesn’t explicitly make any of those attributes <code class="literal">true</code> in the call to <code class="literal">Object.defineProperty()</code>.</p><a id="pro_id00068"/><pre class="programlisting"><span class="pd_green"><code class="kd">var</code></span> <code class="nx">person1</code> <span class="pd_ash"><code class="o">=</code></span> <code class="p">{};</code>

<span class="pd_green"><code class="nb">Object</code></span><code class="p">.</code><code class="nx">defineProperty</code><code class="p">(</code><code class="nx">person1</code><code class="p">,</code> <span class="pd_red"><code class="s2">"name"</code></span><code class="p">,</code> <code class="p">{</code>
    <code class="nx">value</code><code class="o">:</code> <span class="pd_red"><code class="s2">"Nicholas"</code></span>
<code class="p">});</code>

<code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"name"</code></span> <span class="pd_green"><code class="k">in</code></span> <code class="nx">person1</code><code class="p">);</code>                      <span class="pd_green1"><code class="c1">// true</code></span>
<code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">person1</code><code class="p">.</code><code class="nx">propertyIsEnumerable</code><code class="p">(</code><span class="pd_red"><code class="s2">"name"</code></span><code class="p">));</code>   <span class="pd_green1"><code class="c1">// false</code></span>

<span class="pd_green"><code class="k">delete</code></span> <code class="nx">person1</code><code class="p">.</code><code class="nx">name</code><code class="p">;</code>
<code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"name"</code></span> <span class="pd_green"><code class="k">in</code></span> <code class="nx">person1</code><code class="p">);</code>                      <span class="pd_green1"><code class="c1">// true</code></span>

<code class="nx">person1</code><code class="p">.</code><code class="nx">name</code> <span class="pd_ash"><code class="o">=</code></span> <span class="pd_red"><code class="s2">"Greg"</code></span><code class="p">;</code>
<code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">person1</code><code class="p">.</code><code class="nx">name</code><code class="p">);</code>                           <span class="pd_green1"><code class="c1">// "Nicholas"</code></span></pre><p>In this code, you can’t do anything with the <code class="literal">name</code> property except read the value; every other operation is locked down. If you’re changing an existing property, keep in mind that only the attributes you specify will change.</p><div class="note" title="Note"><h3 class="title"><a id="ch03note05"/>Note</h3><p><span class="emphasis"><em>Nonwritable properties throw an error in strict mode when you try to change the value. In nonstrict mode, the operation silently fails.</em></span></p></div></div><div class="sect2" title="Accessor Property Attributes"><div class="titlepage"><div><div><h3 class="title" id="accessor_property_attributes">Accessor Property Attributes</h3></div></div></div><p>Accessor properties also have two additional attributes. Because there is no value stored for accessor properties, there is no need for <code class="literal">[[Value]]</code> or <code class="literal">[[Writable]]</code>. Instead, accessors have <code class="literal">[[Get]]</code> and <code class="literal">[[Set]]</code>, which contain the getter and setter functions, respectively. As with the object literal form of getters and setters, you need only define one of these attributes to create the property.</p><div class="note" title="Note"><h3 class="title"><a id="ch03note06"/>Note</h3><p><span class="emphasis"><em>If you try to create a property with both data and accessor attributes, you will get an error.</em></span></p></div><p><a id="iddle1012" class="indexterm"/><a id="iddle1052" class="indexterm"/><a id="iddle1071" class="indexterm"/><a id="iddle1098" class="indexterm"/>The advantage of using accessor property attributes instead of object literal notation to define accessor properties is that you can also define those properties on existing objects. If you want to use object literal notation, you have to define accessor properties when you create the object.</p><p>As with data properties, you can also specify whether accessor properties are configurable or enumerable. Consider this example from earlier:</p><a id="pro_id00069"/><pre class="programlisting"><span class="pd_green"><code class="kd">var</code></span> <code class="nx">person1</code> <span class="pd_ash"><code class="o">=</code></span> <code class="p">{</code>
    <code class="nx">_name</code><code class="o">:</code> <span class="pd_red"><code class="s2">"Nicholas"</code></span><code class="p">,</code>

    <code class="nx">get</code> <code class="nx">name</code><code class="p">()</code> <code class="p">{</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"Reading name"</code></span><code class="p">);</code>
        <span class="pd_green"><code class="k">return</code> <code class="k">this</code></span><code class="p">.</code><code class="nx">_name</code><code class="p">;</code>
    <code class="p">},</code>

    <code class="nx">set</code> <code class="nx">name</code><code class="p">(</code><code class="nx">value</code><code class="p">)</code> <code class="p">{</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"Setting name to %s"</code><code class="p">,</code> <code class="nx">valu</code></span><code class="nx">e</code><code class="p">);</code>
        <span class="pd_green"><code class="k">this</code></span><code class="p">.</code><code class="nx">_name</code> <span class="pd_ash"><code class="o">=</code></span> <code class="nx">value</code><code class="p">;</code>
    <code class="p">}</code>
<code class="p">};</code></pre><p>This code can also be written as follows:</p><a id="pro_id00070"/><pre class="programlisting"><span class="pd_green"><code class="kd">var</code></span> <code class="nx">person1</code> <code class="o">=</code> <code class="p">{</code>
    <code class="nx">_name</code><code class="o">:</code> <span class="pd_red"><code class="s2">"Nicholas"</code></span>
<code class="p">};</code>

<span class="pd_green"><code class="nb">Object</code></span><code class="p">.</code><code class="nx">defineProperty</code><code class="p">(</code><code class="nx">person1</code><code class="p">,</code> <span class="pd_red"><code class="s2">"name"</code></span><code class="p">,</code> <code class="p">{</code>
    <code class="nx">get</code><code class="o">:</code> <span class="pd_green"><code class="kd">function</code></span><code class="p">()</code> <code class="p">{</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"Reading name"</code></span><code class="p">);</code>
        <span class="pd_green"><code class="k">return</code> <code class="k">this</code></span><code class="p">.</code><code class="nx">_name</code><code class="p">;</code>
    <code class="p">},</code>
    <code class="nx">set</code><code class="o">:</code> <span class="pd_green"><code class="kd">function</code></span><code class="p">(</code><code class="nx">value</code><code class="p">)</code> <code class="p">{</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"Setting name to %s"</code></span><code class="p">,</code> <code class="nx">value</code><code class="p">);</code>
        <span class="pd_green"><code class="k">this</code></span><code class="p">.</code><code class="nx">_name</code> <span class="pd_ash"><code class="o">=</code></span> <code class="nx">value</code><code class="p">;</code>
    <code class="p">},</code>
    <code class="nx">enumerable</code><code class="o">:</code> <span class="pd_green"><code class="kc">true</code></span><code class="p">,</code>
    <code class="nx">configurable</code><code class="o">:</code> <span class="pd_green"><code class="kc">true</code></span>
<code class="p">});</code></pre><p>Notice that the <code class="literal">get</code> and <code class="literal">set</code> keys on the object passed in to <code class="literal">Object.defineProperty()</code> are data properties that contain a function. You can’t use object literal accessor format here.</p><p>Setting the other attributes (<code class="literal">[[Enumerable]]</code> and <code class="literal">[[Configurable]]</code>) allows you to change how the accessor property works. For example, you can create a nonconfigurable, nonenumerable, nonwritable property like this:</p><a id="pro_id00071"/><pre class="programlisting">  <span class="pd_green"><code class="kd">var</code></span> <code class="nx">person1</code> <span class="pd_ash"><code class="o">=</code></span> <code class="p">{</code>
      <code class="nx">_name</code><code class="o">:</code> <span class="pd_red"><code class="s2">"Nicholas"</code></span>
  <code class="p">};</code>
  <span class="pd_green"><code class="nb">Object</code></span><code class="p">.</code><code class="nx">defineProperty</code><code class="p">(</code><code class="nx">person1</code><code class="p">,</code> <span class="pd_red"><code class="s2">"name"</code></span><code class="p">,</code> <code class="p">{</code>
      <code class="nx">get</code><code class="o">:</code> <span class="pd_green"><code class="kd">function</code></span><code class="p">()</code> <code class="p">{</code>
          <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"Reading name"</code></span><code class="p">);</code>
<code class="err">❶</code>         <span class="pd_green"><code class="k">return</code> <code class="k">this</code></span><code class="p">.</code><code class="nx">_name</code><code class="p">;</code>
      <code class="p">}</code>
  <code class="p">});</code>

  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"name"</code></span> <span class="pd_green"><code class="k">in</code></span> <code class="nx">person1</code><code class="p">);</code>                      <span class="pd_green1"><code class="c1">// true</code></span>
  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">person1</code><code class="p">.</code><code class="nx">propertyIsEnumerable</code><code class="p">(</code><code class="s2">"name"</code><code class="p">));</code>   <span class="pd_green1"><code class="c1">// false</code></span>
  <span class="pd_green"><code class="k">delete</code></span> <code class="nx">person1</code><code class="p">.</code><code class="nx">name</code><code class="p">;</code>
  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"name"</code></span> <span class="pd_green"><code class="k">in</code></span> <code class="nx">person1</code><code class="p">);</code>                      <span class="pd_green1"><code class="c1">// true</code></span>

  <code class="nx">person1</code><code class="p">.</code><code class="nx">name</code> <span class="pd_ash"><code class="o">=</code></span> <span class="pd_red"><code class="s2">"Greg"</code></span><code class="p">;</code>
  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">person1</code><code class="p">.</code><code class="nx">name</code><code class="p">);</code>                           <span class="pd_green1"><code class="c1">// "Nicholas"</code></span></pre><p><a id="iddle1084" class="indexterm"/><a id="iddle1212" class="indexterm"/><a id="iddle1274" class="indexterm"/>In this code, the <code class="literal">name</code> property is an accessor property with only a getter ❶. There is no setter or any other attributes to explicitly set to <code class="literal">true</code>, so the value can be read but not changed.</p><div class="note" title="Note"><h3 class="title"><a id="ch03note07"/>Note</h3><p><span class="emphasis"><em>As with accessor properties defined via object literal notation, an accessor property without a setter throws an error in strict mode when you try to change the value. In nonstrict mode, the operation silently fails. Attempting to read an accessor property that has only a setter defined always returns undefined.</em></span></p></div></div><div class="sect2" title="Defining Multiple Properties"><div class="titlepage"><div><div><h3 class="title" id="defining_multiple_properties">Defining Multiple Properties</h3></div></div></div><p>It’s also possible to define multiple properties on an object simultaneously if you use <code class="literal">Object.defineProperties()</code> instead of <code class="literal">Object.defineProperty()</code>. This method accepts two arguments: the object to work on and an object containing all of the property information. The keys of that second argument are property names, and the values are descriptor objects defining the attributes for those properties. For example, the following code defines two properties:</p><a id="pro_id00072"/><pre class="programlisting">  <span class="pd_green"><code class="kd">var</code></span> <code class="nx">person1</code> <span class="pd_ash"><code class="o">=</code></span> <code class="p">{};</code>

  <span class="pd_green"><code class="nb">Object</code></span><code class="p">.</code><code class="nx">defineProperties</code><code class="p">(</code><code class="nx">person1</code><code class="p">,</code> <code class="p">{</code>

<code class="err">❶</code>     <span class="pd_green1"><code class="c1">// data property to store data</code></span>
      <code class="nx">_name</code><code class="o">:</code> <code class="p">{</code>
          <code class="nx">value</code><code class="o">:</code> <span class="pd_red"><code class="s2">"Nicholas"</code></span><code class="p">,</code>
          <code class="nx">enumerable</code><code class="o">:</code> <span class="pd_green"><code class="kc">true</code></span><code class="p">,</code>
          <code class="nx">configurable</code><code class="o">:</code> <span class="pd_green"><code class="kc">true</code></span><code class="p">,</code>
          <code class="nx">writable</code><code class="o">:</code> <span class="pd_green"><code class="kc">true</code></span>
      <code class="p">},</code>
<code class="err">❷</code>     <span class="pd_green1"><code class="c1">// accessor property</code></span>
      <code class="nx">name</code><code class="o">:</code> <code class="p">{</code>
          <code class="nx">get</code><code class="o">:</code> <span class="pd_green"><code class="kd">function</code></span><code class="p">()</code> <code class="p">{</code>
              <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_green"><code class="s2">"Reading name"</code></span><code class="p">);</code>
              <span class="pd_green"><code class="k">return</code> <code class="k">this</code></span><code class="p">.</code><code class="nx">_name</code><code class="p">;</code>
          <code class="p">},</code>
          <code class="nx">set</code><code class="o">:</code> <span class="pd_green"><code class="kd">function</code></span><code class="p">(</code><code class="nx">value</code><code class="p">)</code> <code class="p">{</code>
              <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"Setting name to %s"</code></span><code class="p">,</code> <code class="nx">value</code><code class="p">);</code>
              <span class="pd_green"><code class="k">this</code></span><code class="p">.</code><code class="nx">_name</code> <span class="pd_ash"><code class="o">=</code></span> <code class="nx">value</code><code class="p">;</code>
          <code class="p">},</code>
          <code class="nx">enumerable</code><code class="o">:</code> <span class="pd_green"><code class="kc">true</code></span><code class="p">,</code>
          <code class="nx">configurable</code><code class="o">:</code> <span class="pd_green"><code class="kc">true</code></span>
      <code class="p">}</code>
  <code class="p">});</code></pre><p><a id="iddle1133" class="indexterm"/><a id="iddle1217" class="indexterm"/><a id="iddle1284" class="indexterm"/><a id="iddle1324" class="indexterm"/>This example defines <code class="literal">_name</code> as a data property to contain information ❶ and <code class="literal">name</code> as an accessor property ❷. You can define any number of properties using <code class="literal">Object.defineProperties()</code>; you can even change existing properties and create new ones at the same time. The effect is the same as calling <code class="literal">Object.defineProperty()</code> multiple times.</p></div><div class="sect2" title="Retrieving Property Attributes"><div class="titlepage"><div><div><h3 class="title" id="retrieving_property_attributes">Retrieving Property Attributes</h3></div></div></div><p>If you need to fetch property attributes, you can do so in JavaScript by using <code class="literal">Object.getOwnPropertyDescriptor()</code>. As the name suggests, this method works only on own properties. This method accepts two arguments: the object to work on and the property name to retrieve. If the property exists, you should receive a descriptor object with four properties: <code class="literal">configurable</code>, <code class="literal">enumerable</code>, and the two others appropriate for the type of property. Even if you didn’t specifically set an attribute, you will still receive an object containing the appropriate value for that attribute. For example, this code creates a property and checks its attributes:</p><a id="pro_id00073"/><pre class="programlisting"><span class="pd_green"><code class="kd">var</code></span> <code class="nx">person1</code> <span class="pd_ash"><code class="o">=</code></span> <code class="p">{</code>
    <code class="nx">name</code><code class="o">:</code> <span class="pd_red"><code class="s2">"Nicholas"</code></span>
<code class="p">};</code>

<span class="pd_green"><code class="kd">var</code></span> <code class="nx">descriptor</code> <span class="pd_ash"><code class="o">=</code></span> <span class="pd_green"><code class="nb">Object</code></span><code class="p">.</code><code class="nx">getOwnPropertyDescriptor</code><code class="p">(</code><code class="nx">person1</code><code class="p">,</code> <span class="pd_red"><code class="s2">"name"</code></span><code class="p">);</code>

<code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">descriptor</code><code class="p">.</code><code class="nx">enumerable</code><code class="p">);</code>     <span class="pd_green1"><code class="c1">// true</code></span>
<code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">descriptor</code><code class="p">.</code><code class="nx">configurable</code><code class="p">);</code>   <span class="pd_green1"><code class="c1">// true</code></span>
<code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">descriptor</code><code class="p">.</code><code class="nx">writable</code><code class="p">);</code>       <span class="pd_green1"><code class="c1">// true</code></span>
<code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">descriptor</code><code class="p">.</code><code class="nx">value</code><code class="p">);</code>          <span class="pd_green1"><code class="c1">// "Nicholas"</code></span></pre><p>Here, a property called <code class="literal">name</code> is defined as part of an object literal. The call to <code class="literal">Object.getOwnPropertyDescriptor()</code> returns an object with <code class="literal">enumerable</code>, <code class="literal">configurable</code>, <code class="literal">writable</code>, and <code class="literal">value</code>, even though these weren’t explicitly defined via <code class="literal">Object.defineProperty()</code>.</p></div></div><div class="sect1" title="Preventing Object Modification"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="preventing_object_modification">Preventing Object Modification</h2></div></div></div><p><a id="iddle1106" class="indexterm"/><a id="iddle1107" class="indexterm"/><a id="iddle1165" class="indexterm"/><a id="iddle1219" class="indexterm"/><a id="iddle1228" class="indexterm"/><a id="iddle1241" class="indexterm"/><a id="iddle1245" class="indexterm"/><a id="iddle1246" class="indexterm"/><a id="iddle1257" class="indexterm"/><a id="iddle1258" class="indexterm"/><a id="iddle1328" class="indexterm"/><a id="iddle1329" class="indexterm"/><a id="iddle1341" class="indexterm"/>Objects, just like properties, have internal attributes that govern their behavior. One of these attributes is <code class="literal">[[Extensible]]</code>, which is a Boolean value indicating if the object itself can be modified. All objects you create are <span class="emphasis"><em>extensible</em></span> by default, meaning new properties can be added to the object at any time. You’ve seen this several times in this chapter. By setting <code class="literal">[[Extensible]]</code> to <code class="literal">false</code>, you can prevent new properties from being added to an object. There are three different ways to accomplish this.</p><div class="sect2" title="Preventing Extensions"><div class="titlepage"><div><div><h3 class="title" id="preventing_extensions">Preventing Extensions</h3></div></div></div><p>One way to create a nonextensible object is with <code class="literal">Object.preventExtensions()</code>. This method accepts a single argument, which is the object you want to make nonextensible. Once you use this method on an object, you’ll never be able to add any new properties to it again. You can check the value of <code class="literal">[[Extensible]]</code> by using <code class="literal">Object.isExtensible()</code>. The following code shows examples of both methods at work.</p><a id="pro_id00074"/><pre class="programlisting">  <span class="pd_green"><code class="kd">var</code></span> <code class="nx">person1</code> <span class="pd_ash"><code class="o">=</code></span> <code class="p">{</code>
      <code class="nx">name</code><code class="o">:</code> <span class="pd_red"><code class="s2">"Nicholas"</code></span>
  <code class="p">};</code>

<code class="err">❶</code> <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_green"><code class="nb">Object</code></span><code class="p">.</code><code class="nx">isExtensible</code><code class="p">(</code><code class="nx">person1</code><code class="p">));</code>     <span class="pd_green1"><code class="c1">// true</code></span>

<code class="err">❷</code> <span class="pd_green"><code class="nb">Object</code></span><code class="p">.</code><code class="nx">preventExtensions</code><code class="p">(</code><code class="nx">person1</code><code class="p">);</code>
  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_green"><code class="nb">Object</code></span><code class="p">.</code><code class="nx">isExtensible</code><code class="p">(</code><code class="nx">person1</code><code class="p">));</code>     <span class="pd_green1"><code class="c1">// false</code></span>

<code class="err">❸</code> <code class="nx">person1</code><code class="p">.</code><code class="nx">sayName</code> <span class="pd_ash"><code class="o">=</code></span> <span class="pd_green"><code class="kd">function</code></span><code class="p">()</code> <code class="p">{</code>
      <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_green"><code class="k">this</code></span><code class="p">.</code><code class="nx">name</code><code class="p">);</code>
  <code class="p">};</code>

  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"sayName"</code></span> <span class="pd_green"><code class="k">in</code></span> <code class="nx">person1</code><code class="p">);</code>             <span class="pd_green1"><code class="c1">// false</code></span></pre><p>After creating <code class="literal">person1</code>, this example checks the object’s <code class="literal">[[Extensible]]</code> attribute ❶ before making it unchangeable ❷. Now that <code class="literal">person1</code> is nonextensible, the <code class="literal">sayName()</code> method ❸ is never added to it.</p><div class="note" title="Note"><h3 class="title"><a id="ch03note08"/>Note</h3><p><span class="emphasis"><em>Attempting to add a property to a nonextensible object will throw an error in strict mode. In nonstrict mode, the operation fails silently. You should always use strict mode with nonextensible objects so that you are aware when a nonextensible object is being used incorrectly.</em></span></p></div></div><div class="sect2" title="Sealing Objects"><div class="titlepage"><div><div><h3 class="title" id="sealing_objects">Sealing Objects</h3></div></div></div><p>The second way to create a nonextensible object is to <span class="emphasis"><em>seal</em></span> the object. A sealed object is nonextensible, and all of its properties are nonconfigurable. That means not only can you not add new properties to the object, <a id="iddle1053" class="indexterm"/><a id="iddle1166" class="indexterm"/><a id="iddle1170" class="indexterm"/><a id="iddle1220" class="indexterm"/><a id="iddle1222" class="indexterm"/><a id="iddle1342" class="indexterm"/>but you also can’t remove properties or change their type (from data to accessor or vice versa). If an object is sealed, you can only read from and write to its properties.</p><p>You can use the <code class="literal">Object.seal()</code> method on an object to seal it. When that happens, the <code class="literal">[[Extensible]]</code> attribute is set to <code class="literal">false</code>, and all properties have their <code class="literal">[[Configurable]]</code> attribute set to <code class="literal">false</code>. You can check to see whether an object is sealed using <code class="literal">Object.isSealed()</code> as follows:</p><a id="pro_id00075"/><pre class="programlisting">  <span class="pd_green"><code class="kd">var</code></span> <code class="nx">person1</code> <span class="pd_ash"><code class="o">=</code></span> <code class="p">{</code>
      <code class="nx">name</code><code class="o">:</code> <span class="pd_red"><code class="s2">"Nicholas"</code></span>
  <code class="p">};</code>

  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_green"><code class="nb">Object</code></span><code class="p">.</code><code class="nx">isExtensible</code><code class="p">(</code><code class="nx">person1</code><code class="p">));</code>      <span class="pd_green1"><code class="c1">// true</code></span>
  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_green"><code class="nb">Object</code></span><code class="p">.</code><code class="nx">isSealed</code><code class="p">(</code><code class="nx">person1</code><code class="p">));</code>          <span class="pd_green1"><code class="c1">// false</code></span>

<code class="err">❶</code> <span class="pd_green"><code class="nb">Object</code></span><code class="p">.</code><code class="nx">seal</code><code class="p">(</code><code class="nx">person1</code><code class="p">);</code>
<code class="err">❷</code> <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_green"><code class="nb">Object</code></span><code class="p">.</code><code class="nx">isExtensible</code><code class="p">(</code><code class="nx">person1</code><code class="p">));</code>      <span class="pd_green1"><code class="c1">// false</code></span>
  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_green"><code class="nb">Object</code></span><code class="p">.</code><code class="nx">isSealed</code><code class="p">(</code><code class="nx">person1</code><code class="p">));</code>          <span class="pd_green1"><code class="c1">// true</code></span>

<code class="err">❸</code> <code class="nx">person1</code><code class="p">.</code><code class="nx">sayName</code> <span class="pd_ash"><code class="o">=</code></span> <span class="pd_green"><code class="kd">function</code></span><code class="p">()</code> <code class="p">{</code>
      <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_green"><code class="k">this</code></span><code class="p">.</code><code class="nx">name</code><code class="p">);</code>
  <code class="p">};</code>

  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"sayName"</code></span> <span class="pd_green"><code class="k">in</code></span> <code class="nx">person1</code><code class="p">);</code>              <span class="pd_green1"><code class="c1">// false</code></span>

<code class="err">❹</code> <code class="nx">person1</code><code class="p">.</code><code class="nx">name</code> <span class="pd_ash"><code class="o">=</code></span> <span class="pd_red"><code class="s2">"Greg"</code></span><code class="p">;</code>
  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">person1</code><code class="p">.</code><code class="nx">name</code><code class="p">);</code>                      <span class="pd_green1"><code class="c1">// "Greg"</code></span>

<code class="err">❺</code> <span class="pd_green"><code class="k">delete</code></span> <code class="nx">person1</code><code class="p">.</code><code class="nx">name</code><code class="p">;</code>
  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"name"</code></span>      <span class="pd_green"><code class="k">in</code></span> <code class="nx">person1</code><code class="p">);</code>            <span class="pd_green1"><code class="c1">// true</code></span>
  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">person1</code><code class="p">.</code><code class="nx">name</code><code class="p">);</code>                      <span class="pd_green1"><code class="c1">// "Greg"</code></span>

  <span class="pd_green"><code class="kd">var</code></span> <code class="nx">descriptor</code> <span class="pd_ash"><code class="o">=</code></span> <span class="pd_green"><code class="nb">Object</code></span><code class="p">.</code><code class="nx">getOwnPropertyDescriptor</code><code class="p">(</code><code class="nx">person1</code><code class="p">,</code> <span class="pd_red"><code class="s2">"name"</code></span><code class="p">);</code>
  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">descriptor</code><code class="p">.</code><code class="nx">configurable</code><code class="p">);</code>           <span class="pd_green1"><code class="c1">// false</code></span></pre><p>This code seals <code class="literal">person1</code> ❶ so you can’t add or remove properties. Since all sealed objects are nonextensible, <code class="literal">Object.isExtensible()</code> returns <code class="literal">false</code> ❷ when used on <code class="literal">person1</code>, and the attempt to add a method called <code class="literal">sayName()</code> ❸ fails silently. Also, though <code class="literal">person1.name</code> is successfully changed to a new value ❹, the attempt to delete it ❺ fails.</p><p>If you’re familiar with Java or C++, sealed objects should also be familiar. When you create a new object instance based on a class in one of those languages, you can’t add any new properties to that object. However, if a property contains an object, you can modify that object. In effect, sealed objects are JavaScript’s way of giving you the same measure of control without using classes.</p><div class="note" title="Note"><h3 class="title"><a id="ch03note09"/>Note</h3><p><span class="emphasis"><em>Be sure to use strict mode with sealed objects so you’ll get an error when someone tries to use the object incorrectly.</em></span></p></div></div><div class="sect2" title="Freezing Objects"><div class="titlepage"><div><div><h3 class="title" id="freezing_objects">Freezing Objects</h3></div></div></div><p><a id="iddle1115" class="indexterm"/><a id="iddle1117" class="indexterm"/><a id="iddle1167" class="indexterm"/><a id="iddle1215" class="indexterm"/><a id="iddle1221" class="indexterm"/><a id="iddle1238" class="indexterm"/>The last way to create a nonextensible object is to <span class="emphasis"><em>freeze</em></span> it. If an object is frozen, you can’t add or remove properties, you can’t change properties’ types, and you can’t write to any data properties. In essence, a frozen object is a sealed object where data properties are also read-only. Frozen objects can’t become unfrozen, so they remain in the state they were in when they became frozen. You can freeze an object by using <code class="literal">Object.freeze()</code> and determine if an object is frozen by using <code class="literal">Object.isFrozen()</code>. For example:</p><a id="pro_id00076"/><pre class="programlisting">  <span class="pd_green"><code class="kd">var</code></span> <code class="nx">person1</code> <span class="pd_ash"><code class="o">=</code></span> <code class="p">{</code>
      <code class="nx">name</code><code class="o">:</code> <span class="pd_red"><code class="s2">"Nicholas"</code></span>
  <code class="p">};</code>

  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_green"><code class="nb">Object</code></span><code class="p">.</code><code class="nx">isExtensible</code><code class="p">(</code><code class="nx">person1</code><code class="p">));</code>     <span class="pd_green1"><code class="c1">// true</code></span>
  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_green"><code class="nb">Object</code></span><code class="p">.</code><code class="nx">isSealed</code><code class="p">(</code><code class="nx">person1</code><code class="p">));</code>         <span class="pd_green1"><code class="c1">// false</code></span>
  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_green"><code class="nb">Object</code></span><code class="p">.</code><code class="nx">isFrozen</code><code class="p">(</code><code class="nx">person1</code><code class="p">));</code>         <span class="pd_green1"><code class="c1">// false</code></span>

<code class="err">❶</code> <span class="pd_green"><code class="nb">Object</code></span><code class="p">.</code><code class="nx">freeze</code><code class="p">(</code><code class="nx">person1</code><code class="p">);</code>
<code class="err">❷</code> <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_green"><code class="nb">Object</code></span><code class="p">.</code><code class="nx">isExtensible</code><code class="p">(</code><code class="nx">person1</code><code class="p">));</code>     <span class="pd_green1"><code class="c1">// false</code></span>
<code class="err">❸</code> <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_green"><code class="nb">Object</code></span><code class="p">.</code><code class="nx">isSealed</code><code class="p">(</code><code class="nx">person1</code><code class="p">));</code>         <span class="pd_green1"><code class="c1">// true</code></span>
  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_green"><code class="nb">Object</code></span><code class="p">.</code><code class="nx">isFrozen</code><code class="p">(</code><code class="nx">person1</code><code class="p">));</code>         <span class="pd_green1"><code class="c1">// true</code></span>

  <code class="nx">person1</code><code class="p">.</code><code class="nx">sayName</code> <span class="pd_ash"><code class="o">=</code></span> <span class="pd_green"><code class="kd">function</code></span><code class="p">()</code> <code class="p">{</code>
      <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_green"><code class="k">this</code></span><code class="p">.</code><code class="nx">name</code><code class="p">);</code>
  <code class="p">};</code>

  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"sayName"</code></span> <span class="pd_green"><code class="k">in</code></span> <code class="nx">person1</code><code class="p">);</code>             <span class="pd_green1"><code class="c1">// false</code></span>

<code class="err">❹</code> <code class="nx">person1</code><code class="p">.</code><code class="nx">name</code> <span class="pd_ash"><code class="o">=</code></span> <span class="pd_red"><code class="s2">"Greg"</code></span><code class="p">;</code>
  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">person1</code><code class="p">.</code><code class="nx">name</code><code class="p">);</code>                     <span class="pd_green1"><code class="c1">// "Nicholas"</code></span>

  <span class="pd_green"><code class="k">delete</code></span> <code class="nx">person1</code><code class="p">.</code><code class="nx">name</code><code class="p">;</code>
  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><span class="pd_red"><code class="s2">"name"</code></span> <span class="pd_green"><code class="k">in</code></span> <code class="nx">person1</code><code class="p">);</code>                <span class="pd_green1"><code class="c1">// true</code></span>
  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">person1</code><code class="p">.</code><code class="nx">name</code><code class="p">);</code>                     <span class="pd_green1"><code class="c1">// "Nicholas"</code></span>

  <span class="pd_green"><code class="kd">var</code></span> <code class="nx">descriptor</code> <code class="o">=</code> <span class="pd_green"><code class="nb">Object</code></span><code class="p">.</code><code class="nx">getOwnPropertyDescriptor</code><code class="p">(</code><code class="nx">person1</code><code class="p">,</code> <span class="pd_red"><code class="s2">"name"</code></span><code class="p">);</code>
  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">descriptor</code><code class="p">.</code><code class="nx">configurable</code><code class="p">);</code>           <span class="pd_green1"><code class="c1">// false</code></span>
  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">descriptor</code><code class="p">.</code><code class="nx">writable</code><code class="p">);</code>               <span class="pd_green1"><code class="c1">// false</code></span></pre><p>In this example, <code class="literal">person1</code> is frozen ❶. Frozen objects are also considered nonextensible and sealed, so <code class="literal">Object.isExtensible()</code> returns <code class="literal">false</code> ❷ and <code class="literal">Object.isSealed()</code> returns <code class="literal">true</code> ❸. The <code class="literal">name</code> property can’t be changed, so even though it is assigned to <code class="literal">"Greg"</code>, the operation fails ❹, and subsequent checks of <code class="literal">name</code> will still return <code class="literal">"Nicholas"</code>.</p><div class="note" title="Note"><h3 class="title"><a id="ch03note10"/>Note</h3><p><span class="emphasis"><em>Frozen objects are simply snapshots of an object at a particular point in time. They are of limited use and should be used rarely. As with all nonextensible objects, you should use strict mode with frozen objects.</em></span></p></div></div></div><div class="sect1" title="Summary"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="summary-id00003">Summary</h2></div></div></div><p><a id="iddle1089" class="indexterm"/><a id="iddle1137" class="indexterm"/><a id="iddle1173" class="indexterm"/>It helps to think of JavaScript objects as hash maps where properties are just key/value pairs. You access object properties using either dot notation or bracket notation with a string identifier. You can add a property at any time by assigning a value to it, and you can remove a property at any time with the <code class="literal">delete</code> operator. You can always check whether a property exists by using the <code class="literal">in</code> operator on a property name and object. If the property in question is an own property, you could also use <code class="literal">hasOwnProperty()</code>, which exists on every object. All object properties are enumerable by default, which means that they will appear in a <code class="literal">for-in</code> loop or be retrieved by <code class="literal">Object.keys()</code>.</p><p>There are two types of properties: data properties and accessor properties. Data properties are placeholders for values, and you can read from and write to them. When a data property holds a function value, the property is considered a method of the object. Unlike data properties, accessor properties don’t store values on their own; they use a combination of getters and setters to perform specific actions. You can create both data properties and accessor properties directly using object literal notation.</p><p>All properties have several associated attributes. These attributes define how the properties work. Both data and accessor properties have <code class="literal">[[Enumerable]]</code> and <code class="literal">[[Configurable]]</code> attributes. Data properties also have <code class="literal">[[Writable]]</code> and <code class="literal">[[Value]]</code> attributes, while accessor properties have <code class="literal">[[Get]]</code> and <code class="literal">[[Set]]</code> attributes. By default, <code class="literal">[[Enumerable]]</code> and <code class="literal">[[Configurable]]</code> are set to <code class="literal">true</code> for all properties, and <code class="literal">[[Writable]]</code> is set to <code class="literal">true</code> for data properties. You can change these attributes by using <code class="literal">Object. defineProperty()</code> or <code class="literal">Object.defineProperties()</code>. It’s also possible to retrieve these attributes by using <code class="literal">Object.getOwnPropertyDescriptor()</code>.</p><p>When you want to lock down an object’s properties in some way, there are three different ways to do so. If you use <code class="literal">Object.preventExtensions()</code>, objects will no longer allow properties to be added. You could also create a sealed object with the <code class="literal">Object.seal()</code> method, which makes that object nonextensible and makes its properties nonconfigurable. The <code class="literal">Object.freeze()</code> method creates a frozen object, which is a sealed object with nonwritable data properties. Be careful with nonextensible objects, and always use strict mode so that attempts to access the objects incorrectly will throw an error.</p></div></section></body></html>