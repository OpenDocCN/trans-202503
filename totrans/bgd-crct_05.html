<html><head></head><body>
<h2 class="h2" id="ch04"><span epub:type="pagebreak" id="page_30"/><span class="big">4</span><br/>THE NIGHT-LIGHT</h2>&#13;
<p class="ch-sub">THIS CIRCUIT IS A NIGHT-LIGHT THAT TURNS ON IN THE DARK.</p>&#13;
<div class="image"><img alt="image" src="../images/f0030-01.jpg"/></div>&#13;
<h3 class="h3" id="lev45"><span epub:type="pagebreak" id="page_31"/><strong>THE CIRCUIT DIAGRAM</strong></h3>&#13;
<div class="image"><img alt="image" src="../images/f0031-01.jpg"/></div>&#13;
<h3 class="h3" id="lev46"><strong>THE PARTS LIST</strong></h3>&#13;
<table class="topbot-d">&#13;
<thead>&#13;
<tr>&#13;
<td class="table-a" style="vertical-align: top;"><p class="tab_th"><strong>PART</strong></p></td>&#13;
<td class="table-b" style="vertical-align: top;"><p class="tab_th"><strong>VALUE</strong></p></td>&#13;
<td class="table-b" style="vertical-align: top;"><p class="tab_th"><strong>DESCRIPTION</strong></p></td>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td class="table-a" style="vertical-align: top;"><p class="taba"><span class="red">LDR</span></p></td>&#13;
<td class="table-b" style="vertical-align: top;"><p class="taba"><span class="red">~10 k to ~200 kΩ</span></p></td>&#13;
<td class="table-b" style="vertical-align: top;"><p class="taba"><span class="red">Light-dependent resistor (photoresistor) with around 5 to 10 kΩ resistance in light and 200 kΩ or more in dark</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table-a" style="vertical-align: top;"><p class="taba"><span class="red">Q1</span></p></td>&#13;
<td class="table-b" style="vertical-align: top;"><p class="taba"><span class="red">BC547</span></p></td>&#13;
<td class="table-b" style="vertical-align: top;"><p class="taba"><span class="red">Any general-purpose NPN transistor</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table-a" style="vertical-align: top;"><p class="taba"><span class="red">R1</span></p></td>&#13;
<td class="table-b" style="vertical-align: top;"><p class="taba"><span class="red">100 kΩ</span></p></td>&#13;
<td class="table-b" style="vertical-align: top;"><p class="taba"><span class="red">Standard resistor</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table-a" style="vertical-align: top;"><p class="taba"><span class="red">R3</span></p></td>&#13;
<td class="table-b" style="vertical-align: top;"><p class="taba"><span class="red">470 Ω</span></p></td>&#13;
<td class="table-b" style="vertical-align: top;"><p class="taba"><span class="red">Standard resistor</span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td class="table-a" style="vertical-align: top;"><p class="taba"><span class="red">LED</span></p></td>&#13;
<td class="table-b" style="vertical-align: top;"><p class="taba"> </p></td>&#13;
<td class="table-b" style="vertical-align: top;"><p class="taba"><span class="red">Standard-output light-emitting diode</span></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<h3 class="h3" id="lev47"><strong>ABOUT THE CIRCUIT</strong></h3>&#13;
<p class="noindent">This circuit turns on an LED when it gets dark. During the day, the light stays off, but at night, it can help you see things like the keyhole in your front door or a glass of water on your nightstand.</p>&#13;
<p class="indent">This circuit is similar to the one in <a href="ch03.xhtml#ch03">Project 3</a>, but here the transistor controls an LED instead of a buzzer. Remember, the LED has a resistor connected in series to limit its current.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_32"/>Also, the resistor and LDR, which form the voltage divider that sets the voltage to the base of the transistor, have switched places.</p>&#13;
<p class="indent">In <a href="ch03.xhtml#ch03">Project 3</a>, the LDR was the upper resistor on the voltage divider. So when the resistance of the LDR was <em>low</em>—that is, when it sensed light from the opened cookie jar—the transistor turned on. In this circuit, the LDR is the lower resistor of the voltage divider. That means the transistor turns on when the resistance of the LDR is <em>high</em>, which happens when it’s dark.</p>&#13;
<h3 class="h3" id="lev48"><strong>COMMON MISTAKES</strong></h3>&#13;
<p class="noindent">If your circuit isn’t working correctly, check for the following:</p>&#13;
<ul>&#13;
<li class="noindent">The R1 resistance value is too high, so the LED never turns on. If you change R1, its resistance must not be less than 1 kΩ (see “How the Circuit Works” next).</li>&#13;
<li class="noindent">The R1 resistance value is too low, so the LED is always on.</li>&#13;
<li class="noindent">You used the wrong value for R3—either too much or too little resistance.</li>&#13;
<li class="noindent">You connected the transistor the wrong way.</li>&#13;
<li class="noindent">You connected the LED the wrong way.</li>&#13;
</ul>&#13;
<p class="indent">You can change the circuit’s sensitivity to light by changing the resistance of R1, but as mentioned previously, it must not be less than 1 kΩ (otherwise you may destroy the transistor).</p>&#13;
<p class="indent">If you’re still struggling with this circuit, you can find more resources through the book’s website at <em><a href="https://nostarch.com/circuits/">https://nostarch.com/circuits/</a></em>.</p>&#13;
<h3 class="h3" id="lev49"><strong>HOW THE CIRCUIT WORKS</strong></h3>&#13;
<p class="noindent">Just as in the Cookie Jar Alarm, the LDR and the resistor (R1) make up a voltage divider in this circuit. But since the LDR is now placed at the bottom of the voltage divider (between the transistor base and negative battery terminal), it works opposite to how the Cookie Jar Alarm works. In this circuit, when it’s dark and the LDR resistance is high, the voltage on the transistor’s base will be high enough to turn the LED on (shown in <a href="ch04.xhtml#ch04fig1">Figure 4-1</a>). This means the transistor switches on the LED when it’s dark.</p>&#13;
<div class="image"><span epub:type="pagebreak" id="page_33"/><a id="ch04fig1"/><img alt="image" src="../images/f0033-01.jpg"/></div>&#13;
<p class="figcap"><strong>FIGURE 4-1</strong> The amount of current flowing from the base to the emitter determines how much current can flow from the collector to the emitter.</p>&#13;
<p class="indent">The LDR that I used for this project has around 5 to 10 kΩ resistance when it’s in light. With the 100 kΩ resistor (R1), the LED will turn on when the value of the LDR goes above about 10 kΩ.</p>&#13;
<p class="indent">A curious thing about this circuit is that the R1 resistor will also set the maximum brightness of the LED. This is because R1 determines the amount of current that flows into the base of the transistor, which in turn decides how much current can flow into the collector.</p>&#13;
<p class="indent">For a general-purpose transistor like the one you’re using in this project, the amount of current flowing from the collector to the emitter can be up to 100 times greater than the current flowing from the base to the emitter.</p>&#13;
<p class="indent">That means that if you have 0.1 mA of current flowing from the base to the emitter, you can have up to 10 mA flowing from the collector to the emitter. If 10 mA is the upper limit from the collector to the emitter, that’s the maximum that can flow through the LED too.</p>&#13;
<p class="indent">The current that flows into the base of the transistor has to first flow through R1. Not all the current that flows through R1 will go into the base—some will go through the LDR too—but when it’s dark, the LDR resistance is so high that you can simplify for the sake of the calculation and say that all the current goes into the base.</p>&#13;
<p class="indent">Finding the current (I) through R1 is actually quite simple. Just find the voltage (V) across the resistor and divide it by the resistor value (R):</p>&#13;
<div class="imagec"><img alt="image" src="../images/f0033-02.jpg"/></div>&#13;
<p class="indent">This calculation is based on <em>Ohm’s law</em>, which describes the relationship among voltage, resistance, and current. You can learn more about Ohm’s law at <em><a href="https://www.build-electronic-circuits.com/ohms-law/">https://www.build-electronic-circuits.com/ohms-law/</a></em>.</p>&#13;
<p class="indent"><span epub:type="pagebreak" id="page_34"/>The voltage on the upper side of the resistor is easy. It’s 9 V because it is connected to the positive terminal of the battery, but what about the lower side? Since you’re looking for the maximum current that can flow through the transistor, it only makes sense to look at the current when the transistor is turned on. When the transistor is on, the voltage on the base of the transistor is around 0.7 V.</p>&#13;
<p class="indent">So you have 9 V on one side and 0.7 V on the other. This means you have 8.3 V across the resistor (R1). Using Ohm’s law, you can divide 8.3 V by 100,000 Ω (= 100 kΩ) to get 0.000083 A (= 0.083 mA), so the maximum current that can flow through the LED and into the collector of the transistor is 100 times larger, or 8.3 mA.</p>&#13;
<p class="indent">Since R1 is limiting the current to a value that is safe for the LED, in this circuit you could actually skip the R3 resistor, whose job is also to limit the current to the LED.</p>&#13;
</body></html>