- en: '10'
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Wearable LED Text-Scrolling Sash by Kristina Durivage
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
- en: In this chapter, you’ll make an LED sash with interactive scrolling text.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/f0183-01.jpg)'
  id: totrans-3
  prefs: []
  type: TYPE_IMG
- en: Small and bright LEDs are really fun for making things you can wear! Wearing
    LED clothes at night is a sure way to stand out. This chapter will show you how
    to construct an LED sash that scrolls text and lets you interact with it wirelessly.
    As the final project in this book, it’s a little more difficult than the other
    projects, in terms of both electronics and construction of the sash itself. But
    the payoff is a sash whose scrolling text you can alter and update on the move
    through your phone.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
- en: '**GET THE PARTS**'
  id: totrans-5
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '**NOTE**'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
- en: '*Supplies and tools for sewing the sash are listed in “[Gathering the Materials](ch10.xhtml#lev144)”
    on [page 208](ch10.xhtml#page_208).*'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
- en: This parts list is pretty substantial and many parts have options, so feel free
    to browse ahead in the chapter for more specifications. With these items, you
    can put wireless LEDs pretty much anywhere!
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
- en: '**Components**'
  id: totrans-9
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Battery (I’m using a 7.2 V NiMH battery with a capacity of 5,000 mAh. See “[Calculating
    the Battery Capacity You Need](ch10.xhtml#ch10sb1)” on [page 186](ch10.xhtml#page_186)
    to figure out how much current your project will require.)
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Step-down, adjustable voltage regulator
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 8 × 32 NeoPixel RGB LED matrix (Adafruit P/N 2294, SparkFun P/N 13304, or search
    for “WS2812” on eBay—NeoPixel is a nickname for the WS2812 type of LED)
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Particle Photon board, with or without headers (available from *[https://store.particle.io/products/photon](https://store.particle.io/products/photon)*;
    see “[Connecting the Particle Photon Board](ch10.xhtml#lev131)” on [page 196](ch10.xhtml#page_196)
    for more details)
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: T-style Deans plug connectors (1 female, 1 male)
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 22-gauge solid hookup wire (black, red, and another color)
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**NOTE**'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
- en: '*If you want to make a smaller garment, feel free to use a smaller NeoPixel
    array. Also, if you want your LEDs to be more flexible, say in the hem of a skirt
    or a pant leg, I’d suggest using stranded wire rather than solid core.*'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
- en: I’ll be showing how to adjust the voltage regulator in this chapter, but you
    may want to review the beginning of the section “[Attaching a Voltage Regulator](ch10.xhtml#lev130)”
    on [page 190](ch10.xhtml#page_190) if you’re unfamiliar with these—there are a
    few different options and it can get tricky.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
- en: '**Tools**'
  id: totrans-19
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Here is a list of tools you’ll need for the electronics part of the build,
    as well as some that are simply recommended to make things easier:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
- en: Soldering iron
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Solder
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Helping hands (or some other kind of vise)
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Alligator clips
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Pliers
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Multimeter
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Electrical tape
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Heat-shrink tubing
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**BUILD IT**'
  id: totrans-29
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: We’re going to build this project in stages. First, we’ll build what we need
    for power. Then we’ll hook up the Photon and the LED array, because we can only
    test those things when they have power to run. Once the electronics are all connected
    up, we’ll make a sash that houses the project comfortably.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
- en: The power is the least flashy part, but it will be worth it to have a fully
    mobile project!
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
- en: '[Figure 10-1](ch10.xhtml#ch10fig1) shows a diagram of the final circuit. If
    you get stuck at all, use this diagram as a reference.'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/f0185-01.jpg)'
  id: totrans-33
  prefs: []
  type: TYPE_IMG
- en: '**FIGURE 10-1:** Circuit diagram for the text sash'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
- en: '**Getting Power: Replacing the Plug on Your Batteries**'
  id: totrans-35
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'With our batteries, we’ll be dealing with two wires—power and ground. There’s
    one important rule here: *do not let the power and ground wires touch or come
    in contact with the same piece of metal*. It’s a simple rule, but it’s very important
    because if they touch it will cause a short in the wiring, which can mean anything
    from your project not working to a component actually breaking.'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
- en: '**CALCULATING THE BATTERY CAPACITY YOU NEED**'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
- en: Battery capacity is a compromise between weight, cost, and endurance. To figure
    out what your project needs in terms of battery capacity, first check how many
    LEDs you have. The array I have is 8 × 32 LEDs, meaning I have 256 LEDs total.
    Most of the time an LED will use a max draw of 60 mA (full bright white light),
    with an average use of 20 mA. So if we multiply that by our number of LEDs, our
    calculations show our sash will have a maximum draw of 15,360 mA (~15.5 A) and
    an average draw of 5,120 mA (5 A).
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
- en: However, since our LEDs will display scrolling text, most will be off at any
    given time, so our actual use will be much less than that. With a multimeter,
    I measured current draw of between 0.5 and 0.7 A for my final project. On that
    amp draw, a 3,600 mAh battery will last about 5 hours and a 5,000 mAh battery
    will last about 7 hours.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
- en: If you want to use the array for something else that runs all the LEDs at once
    and need the higher amp draw, the 3,600 mAh battery will last 13 to 42 minutes
    and the 5,000 mAh will last 20 to 58 minutes. Those numbers aren’t exact—batteries
    are never exact—and you lose a bit of power with the voltage regulator and the
    other components, so it’s best to overestimate your needs.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
- en: For this project, I recommend a NiMH battery that’s 7.2 V 5,000 mAh. The LEDs
    and the Photon need 5 V, and at 7.2 V this battery provides the closest voltage.
    Later, we’ll use a regulator to take the voltage down to 5 V to avoid damaging
    parts.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
- en: Our battery needs to plug into our charger and our project, but chances are
    they don’t currently have the same connection type. We’re going to replace the
    plugs on both battery and charger with T-style Deans plugs so they’re compatible.
    You’ll need to be fairly comfortable with soldering for this part.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
- en: First, let’s label the Deans plugs so we don’t mix up the power and the ground.
    Deans plugs have two terminals, shaped like a T. The horizontal terminal (the
    top of the T) is usually for the power (red) wire, and the vertical terminal is
    for the ground (black) wire. Label the Deans plug with a **+** for the horizontal
    and **–** for the vertical, as shown in [Figure 10-2](ch10.xhtml#ch10fig2).
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/f0187-01.jpg)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
- en: '**FIGURE 10-2:** Labeled Deans plugs, male (left) and female (right)'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
- en: '**WARNING**'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
- en: '*Don’t let the power and ground wires touch or come in contact with the same
    piece of metal. This will cause a short in the wiring, which can prevent your
    project from working or break a component. Work with one wire at a time and cover
    the other with electrical tape.*'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
- en: Assuming your battery doesn’t come with a Deans plug connector, you’ll need
    to replace its plug with a Deans plug. Again, it’s safest to do this one wire
    at a time, and put electrical tape around the wire you’re not dealing with.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
- en: '**Tin the power and ground wires.** Clip each wire as close to the plug connector
    on the battery as possible, strip a section off the end roughly the same length
    as the plug terminal, twist it so it’s not fraying, and add solder to the length
    of the exposed wire all around (if you need advice on soldering, see the appendix).
    This process, shown in [Figure 10-3](ch10.xhtml#ch10fig3), is called *tinning*
    the wires.'
  id: totrans-49
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![image](../images/f0187-02.jpg)'
  id: totrans-50
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: '**FIGURE 10-3:** Twisting the wire, then adding solder to it to make it easier
    to work with'
  id: totrans-51
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '**Prepare the female Deans plug.** Take the female plug (the one with exposed
    terminals coming from only one side), and fit some heat-shrink tubing over both
    the wire and the plug’s terminal, as shown in [Figure 10-4](ch10.xhtml#ch10fig4).
    Set the tubing aside for now; don’t slide it over the terminal yet. We’ll shrink
    it after attaching the wire to the plug.'
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: If you don’t have heat-shrink tubing, you can wrap exposed wire in electrical
    tape. Heat-shrink tubing looks a bit more polished, but electrical tape can be
    removed and reapplied more easily.
  id: totrans-53
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![image](../images/f0187-03.jpg)'
  id: totrans-54
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: '**FIGURE 10-4:** Fitting heat-shrink tubing (right) on the terminal of the
    female Deans plug (left)—we’ll shrink this in a bit'
  id: totrans-55
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '**Solder the female Deans plug.** Use a pair of helping hands or a vise to
    hold the female Deans plug. There is a dent on one side of the terminals from
    the plug. Heat up one of the terminals of the Deans plug and melt a small pool
    of solder on the dented side (see [Figure 10-5](ch10.xhtml#ch10fig5)). Be sure
    to not touch the plastic with the tip of your soldering iron, though! Add solder
    to the dents on both terminals.'
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![image](../images/f0188-01.jpg)'
  id: totrans-57
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: '**FIGURE 10-5:** Melt a pool of solder onto the Deans plug to hold the wire.'
  id: totrans-58
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '**Solder the power wire.** Take the red wire coming out of the battery. Cut
    two half-inch pieces of the heat-shrink tubing you set aside earlier and slide
    one piece onto the exposed section of the wire. Push it as far away from the part
    you’ll be soldering as you can, as shown in [Figure 10-6](ch10.xhtml#ch10fig6)—the
    heat from the soldering iron could start shrinking it before we’re ready!'
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![image](../images/f0188-02.jpg)'
  id: totrans-60
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: '**FIGURE 10-6:** The heat-shrink tubing on the wire. We will slide it over
    the Deans plug terminal and shrink it after attaching the wire to the Deans plug.'
  id: totrans-61
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: All the exposed bits of wire must be covered when we’re finished, so make sure
    the exposed bit of wire is no longer than the terminal—it’s better to be too short
    than too long. Remelt the solder pool on the female Deans plug’s positive terminal
    and push the tinned end of the red battery wire into it until it’s covered in
    solder ([Figure 10-7](ch10.xhtml#ch10fig7)). Remove the iron and hold the wire
    in place until it hardens, but don’t touch it until it’s cool.
  id: totrans-62
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![image](../images/f0189-01.jpg)'
  id: totrans-63
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: '**FIGURE 10-7:** The wire will get hot during this step, so use pliers to hold
    it close to the Deans plug as you melt the solder and attach the wire.'
  id: totrans-64
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '**Solder the ground wire.** Once the joint is cool, repeat this process on
    the negative terminal with the black battery wire—don’t forget to slide heat-shrink
    tubing onto the wire before connecting it to the Deans plug! We’ll shrink the
    tubes in a moment.'
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Insulate the wires.** Once both wires are cool to the touch, move the heat-shrink
    tubing down to cover both the metal terminal and the attached exposed wire. If
    you don’t have heat-shrink tubing that fits, you can cover the components with
    electrical tape. If you need to try again, you’ll need to undo the soldering,
    put new heat-shrink on, and resolder.'
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: If you have a heat gun, use that to heat up and shrink the heat-shrink tubing.
    Otherwise, you can hold a lighter near the tubing to heat it, but be sure not
    to expose the tubing to a direct flame. Twist the red and black wires to add support
    to the setup, as shown in [Figure 10-8](ch10.xhtml#ch10fig8).
  id: totrans-67
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![image](../images/f0189-02.jpg)'
  id: totrans-68
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: '**FIGURE 10-8:** The Deans plug with wires'
  id: totrans-69
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: With that, you’re done! You’ve added a different connector onto a battery! [Figure
    10-8](ch10.xhtml#ch10fig8) shows how it should look.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
- en: If your charger doesn’t currently have a Deans plug, you’ll have to repeat this
    process for the charger but with a male Deans plug for connecting your female
    battery plug. Make sure to disconnect the charger from power when you put the
    plug on to avoid any exposed live wires.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
- en: '**Attaching a Voltage Regulator**'
  id: totrans-72
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: It’s likely that your battery will provide more than 5 V, so we need to reduce
    that to the 5 V the Photon needs to prevent it from overpowering. Voltage regulators,
    as seen in [Figure 10-9](ch10.xhtml#ch10fig9), can step down voltage to the level
    you need. We’ll use an adjustable voltage regulator because they’re the easiest
    to find.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
- en: The term *voltage regulator* is pretty intimidating, and the board looks intimidating
    too, but don’t worry! Once you’ve set it up, it’ll do its thing and you’ll never
    have to touch it again.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
- en: '**Buy a voltage regulator.** There are a couple of important things to note
    when you’re voltage regulator shopping. First, buy a *switching* voltage regulator
    that looks similar to the one in [Figure 10-9](ch10.xhtml#ch10fig9). Second, make
    sure to buy a regulator with two blue boxes, not one—this lets you adjust both
    current and voltage.'
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Most voltage regulators return either 3 A or 5 A. Either is fine for displaying
    text only (if you remember from the section on batteries, our draw was 0.5–0.7
    A), but if you end up changing the program so most of the LEDs are on, you’ll
    need to be sure that you keep the draw under the maximum the regulator allows.
  id: totrans-76
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 大多数电压调节器返回的电流是3A或5A。对于仅显示文本的情况，这两者都可以使用（如果你还记得电池部分，我们的电流为0.5–0.7A），但是如果你更改了程序，让大多数LED灯亮起，你需要确保电流不超过调节器的最大允许值。
- en: '![image](../images/f0190-01.jpg)'
  id: totrans-77
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![image](../images/f0190-01.jpg)'
- en: '**FIGURE 10-9:** The voltage regulator from the top'
  id: totrans-78
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图 10-9：** 从上方看电压调节器'
- en: '**Connect the plug.** There are only four parts on this board you need to care
    about—the two plastic boxes with screws at the top of [Figure 10-9](ch10.xhtml#ch10fig9),
    and the IN and OUT boxes on either side.'
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**连接插头。** 这块电路板上只有四个部分需要关注——[图 10-9](ch10.xhtml#ch10fig9)顶部的两个带螺丝的塑料盒，以及两侧的IN和OUT盒子。'
- en: You’ll need four pieces of wire—two black and two red. One set will connect
    the battery and the voltage regulator, while the other will connect the voltage
    regulator to the rest of the electronics.
  id: totrans-80
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 你需要四根电线——两根黑色的和两根红色的。一组将连接电池和电压调节器，另一组将电压调节器与其他电子设备连接。
- en: '**NOTE**'
  id: totrans-81
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**注意**'
- en: '*The big copper-wrapped wheel is the inductor coil, and it can be awfully loose
    and wobbly. If yours is loose, run hot glue on either side of it to hold it in
    place. Hot glue doesn’t conduct electricity, so it won’t interfere with anything
    on the board.*'
  id: totrans-82
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '*大铜包裹轮是电感线圈，它可能非常松动。如果它松动了，可以在它的两侧涂上热熔胶来固定它。热熔胶不导电，所以不会干扰电路板上的任何元件。*'
- en: Take one red wire and one black wire and twist them together to make them more
    manageable, then do the same with the other pair. Strip a quarter-inch or so off
    all eight ends. Following the same process as we did for the battery, connect
    one pair of black and red wires to a male Deans plug. The male plugs have metal
    terminals sticking out of both sides; solder one side onto the side with the smaller
    metal piece. The female plug you attached to the battery will plug into this,
    and it will be the incoming side of the voltage regulator.
  id: totrans-83
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 拿一根红线和一根黑线，把它们扭在一起，方便操作，然后对另一对线也做同样的处理。将所有八个电线的端头剥去大约四分之一英寸。按照我们之前接电池的方式，将一对红黑电线连接到一个公Deans插头上。公插头的两侧都有金属端子；将其中一侧焊接到较小金属件的一侧。你连接到电池上的母插头将插入这个公插头，它将是电压调节器的输入端。
- en: '**Check the voltage of the battery.** Get out your multimeter, then take the
    male Deans plug you just wired to the red and black wires and plug it into the
    battery’s female Deans plug. Be very careful that the two exposed wires on the
    other end of the voltage regulator never touch each other!'
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**检查电池电压。** 拿出你的万用表，然后将你刚刚接好红黑电线的公Deans插头插入电池的母Deans插头。非常小心，确保电压调节器另一端的两个裸露电线绝对不接触！'
- en: Set your multimeter to measure DC voltage. Touch the red probe to the red wire
    and the black probe to the black wire and check the reading on your multimeter
    (see [Figure 10-10](ch10.xhtml#ch10fig10)).
  id: totrans-85
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 将万用表设置为测量直流电压。将红色探头接触红线，黑色探头接触黑线，并检查万用表上的读数（参见[图 10-10](ch10.xhtml#ch10fig10)）。
- en: '![image](../images/f0191-01.jpg)'
  id: totrans-86
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![image](../images/f0191-01.jpg)'
- en: '**FIGURE 10-10:** Measuring the voltage of the battery, and testing the connections
    of the wires to the Deans plug'
  id: totrans-87
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图 10-10：** 测量电池电压，并测试电线与Deans插头的连接'
- en: 'If you aren’t getting any reading, try the following:'
  id: totrans-88
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果没有显示读数，尝试以下操作：
- en: Check that your multimeter probes are plugged into the voltage and ground terminals
    of the multimeter.
  id: totrans-89
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 检查你的万用表探头是否插入了万用表的电压和地线端口。
- en: Confirm that your multimeter is set to measure DC voltage.
  id: totrans-90
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确认你的万用表已设置为测量直流电压。
- en: Make sure your wires are plugged in to the battery.
  id: totrans-91
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保电线已经连接到电池。
- en: See if you can get a reading from a regular battery, like a AA, by connecting
    the red probe to the positive end and the black to the negative end, to confirm
    that your multimeter is working.
  id: totrans-92
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 看看你是否能通过连接红色探头到正极，黑色探头到负极，使用普通电池（比如AA电池）来确认你的万用表是否正常工作。
- en: 'Test the battery more directly: hold the battery’s female Deans plug in your
    helping hands, then put the probes inside the two terminals (with red to positive
    and black to negative) and see if you get a reading out of that. If not, try pinching
    the wire where it was soldered to the terminal and see if you get any kind of
    numbers then—it may be that the solder connection was not firm enough.'
  id: totrans-93
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更直接地测试电池：将电池的母式Deans插头放入辅助夹具中，然后将探针插入两个端子（红线连接正极，黑线连接负极），看看是否能得到读数。如果没有，尝试捏住电线与端子连接的地方，看看是否能得到读数——可能是焊接连接不够牢固。
- en: Try pinching the wire where it’s connected to the male Deans plug and see if
    you get a reading then.
  id: totrans-94
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 尝试捏住电线与男式Deans插头连接的地方，看看是否能够得到读数。
- en: If you still can’t get a reading, ask someone to look over your work! Just be
    sure not to carry this setup around while the battery is plugged in.
  id: totrans-95
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果你还是无法获得读数，找个人检查你的工作！只要确保在电池插入时不要携带这个设置。
- en: Once things are working, unplug the battery, set it aside, and grab the voltage
    regulator.
  id: totrans-96
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 一切正常后，拔掉电池，将其放置一旁，然后拿起电压调节器。
- en: '**Wire up the voltage regulator.** You’ll need a Phillips-head screwdriver
    small enough to fit the screw at the top of the terminals on the IN side, labeled
    in [Figure 10-9](ch10.xhtml#ch10fig9). We’ll attach the red wire to IN+ and the
    black wire to IN–.'
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**连接电压调节器。** 你需要一把足够小的十字螺丝刀，以适应IN端子顶部的螺丝，这些端子在[图 10-9](ch10.xhtml#ch10fig9)中标记为IN。我们将红线连接到IN+，黑线连接到IN–。'
- en: Unscrew the screws until the top is flush with the case around it, and place
    the black wire from your male Deans plug inside IN– to test that it fits (see
    [Figure 10-11](ch10.xhtml#ch10fig11)). If you can see any exposed wire coming
    out of the terminal, trim some back—you don’t want any bare wire showing, but
    you want as much wire inside as will fit.
  id: totrans-98
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 拧松螺丝直到顶部与周围的外壳平齐，然后将男式Deans插头的黑线插入IN–端子，检查是否适配（见[图 10-11](ch10.xhtml#ch10fig11)）。如果你看到端子中有任何裸露的电线，修剪掉一些——你不希望有裸露的电线，但希望尽可能多的电线插入端子。
- en: Once the wire fits, tighten the screw to hold it in place, as shown in [Figure
    10-11](ch10.xhtml#ch10fig11). Repeat this for the red wire in IN+, and then tug
    on both wires slightly to make sure they won’t fall out. You can twist the wires
    back again to make sure they are close together; just make sure no exposed wire
    is showing or touching.
  id: totrans-99
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 一旦电线合适，拧紧螺丝以固定它们，如[图 10-11](ch10.xhtml#ch10fig11)所示。重复此步骤，连接红线到IN+，然后轻拉两根电线，确保它们不会掉出来。你可以再次将电线拧回去，确保它们紧密贴在一起；只要确保没有裸露的电线暴露或接触。
- en: '![image](../images/f0193-01.jpg)'
  id: totrans-100
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![image](../images/f0193-01.jpg)'
- en: '**FIGURE 10-11:** Screwing in the red wire after it was cut to fit so there
    was no metal showing'
  id: totrans-101
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图 10-11：** 将红线旋入端子后，确保红线被裁剪得恰到好处，避免金属部分暴露。'
- en: Take the other set of black and red wires not yet attached to anything and do
    the same for those in the OUT terminals. Remember that red goes to OUT+ and black
    goes to OUT–. [Figure 10-12](ch10.xhtml#ch10fig12) shows how it should look.
  id: totrans-102
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 拿起另外一组尚未连接的黑色和红色电线，按照相同的方法连接到OUT端子上。记住，红线连接到OUT+，黑线连接到OUT–。[图 10-12](ch10.xhtml#ch10fig12)显示了应该如何连接。
- en: '![image](../images/f0193-02.jpg)'
  id: totrans-103
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![image](../images/f0193-02.jpg)'
- en: '**FIGURE 10-12:** Your voltage regulator so far—male Deans plug attached to
    the IN side and exposed wires attached to the OUT side'
  id: totrans-104
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图 10-12：** 到目前为止的电压调节器——男式Deans插头连接到IN端，裸露的电线连接到OUT端。'
- en: '**Adjust the voltage to 5 V.** To adjust the voltage, we turn the screws on
    the OUT side of the regulator. The left screw adjusts the output voltage, and
    the right adjusts the maximum output current. On some boards the screw terminals
    will be labeled CV for volt adjustment and CC for current adjustment (shown in
    [Figure 10-13](ch10.xhtml#ch10fig13)). You might want to label them V for volts
    and A for amps to avoid mixing them up.'
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**将电压调整为 5 V。** 要调整电压，我们需要转动稳压器OUT端的螺丝。左侧螺丝调整输出电压，右侧螺丝调整最大输出电流。在某些板子上，螺丝端子会标记为CV（电压调整）和CC（电流调整）（如[图
    10-13](ch10.xhtml#ch10fig13)所示）。你可能想把它们标记为V（伏特）和A（安培），以避免混淆。'
- en: '![image](../images/f0194-01.jpg)'
  id: totrans-106
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![image](../images/f0194-01.jpg)'
- en: '**FIGURE 10-13:** CV (left) is for adjusting volts, and CC (right) is for adjusting
    amps, or current.'
  id: totrans-107
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图 10-13：** CV（左）用于调节电压，CC（右）用于调节电流或安培数。'
- en: Get your multimeter back out, and attach one end of an alligator clip to each
    of the exposed wires and the other end to each multimeter probe for both positive
    and negative, shown in [Figure 10-14](ch10.xhtml#ch10fig14). Again, be very careful
    to not let red and black touch each other. If you aren’t getting any reading at
    this point, check the voltage regulator connections on both ends.
  id: totrans-108
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 拿出你的万用表，将鳄鱼夹的一端连接到每根裸露电线的末端，另一端分别连接到正负的万用表探针，如[图 10-14](ch10.xhtml#ch10fig14)所示。再次小心不要让红线和黑线互相接触。如果此时没有读取到任何数据，检查电压调节器两端的连接。
- en: '![image](../images/f0194-02.jpg)'
  id: totrans-109
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![image](../images/f0194-02.jpg)'
- en: '**FIGURE 10-14:** Use alligator clips to connect the end of each wire and the
    multimeter probe so your hands are free to adjust the voltage regulator.'
  id: totrans-110
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图 10-14：** 使用鳄鱼夹将每根电线的末端和万用表探针连接起来，这样你的手就可以自由调整电压调节器。'
- en: Some voltage regulators have a small light, and if it’s lit, it’s getting power
    but not sending it back out. If it’s not lit, it’s not even getting power, so
    you should check the battery connection. Be sure you unplug the battery between
    adjusting wires, though—you don’t want to accidentally have ground and power touch
    somewhere.
  id: totrans-111
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 一些电压调节器有一个小灯，如果灯亮了，说明它正在接收电力，但没有输出。如果灯没有亮，说明它根本没有接收到电力，那么你应该检查电池连接。不过，在调整电线时一定要断开电池——你可不想让地线和电源线意外接触。
- en: Once your multimeter is reading, turn the voltage adjustment screw counterclockwise
    until the voltage change registers on the multimeter. Continue turning the screw
    until the multi-meter reads 5 V, erring to be a little under 5 V rather than over.
    If counterclockwise doesn’t adjust the voltage in the direction you need, try
    turning it clockwise and note which direction makes the voltage increase and decrease.
  id: totrans-112
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 一旦你的万用表开始读取数据，将电压调节螺丝逆时针旋转，直到万用表显示电压变化。继续旋转螺丝，直到万用表显示 5V，最好略低于 5V，而不是高于 5V。如果逆时针旋转无法调整到所需的电压方向，尝试顺时针旋转，并记住哪个方向使电压升高或降低。
- en: '**NOTE**'
  id: totrans-113
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**注意**'
- en: '*This part can be frustrating. The two screw boxes look exactly the same, and
    it may take a while to get feedback from the voltage change on the multimeter.
    It can take a lot of twisting, but the adjustment will register eventually, and
    then you’ll be able to use any battery and have wearable LEDs to party in. Hang
    in there.*'
  id: totrans-114
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '*这一部分可能会让人感到沮丧。两个螺丝盒看起来完全一样，而且你可能需要一段时间才能从万用表的电压变化中得到反馈。可能需要很多次旋转，但调整最终会生效，然后你就可以使用任何电池，并且拥有可穿戴的LED灯来参加派对。坚持下去。*'
- en: '**Adjust the current.** Current is measured differently than voltage: voltage
    needs to be pretty precise, as components like the Photon or the LED array won’t
    work if the voltage gets too far away from 5 V. Current can be set as high as
    you want, and components will draw what they need. We’ll set the current to the
    max.'
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**调整电流。** 电流的测量方式与电压不同：电压需要非常精确，因为像Photon或LED阵列这样的元件如果电压偏离 5V 太远，就无法正常工作。电流可以设置得很高，组件会根据需要自行吸取电流。我们将电流设置为最大值。'
- en: Remember which direction turns the voltage up, and turn the current screw in
    the same direction. You’ll hear a click with every turn when it is maxed out.
    The good news here is if your current is too low, everything will just shut off
    without being damaged, and if the current is too high, your parts will draw only
    what they need. Note which direction you turned this screw for future debugging.
  id: totrans-116
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 记住哪个方向是增大电压，并且将电流调节螺丝朝同一方向旋转。当旋转到最大时，你会听到每次旋转都会有咔哒声。好消息是，如果电流过低，所有的设备会直接关闭，不会损坏，如果电流过高，零件会只吸取它们需要的电流。记住你旋转这个螺丝的方向，以便以后调试。
- en: '**Split the line.** Our LED array takes a lot more power than the Photon can
    output, so we’ll split the line from the voltage regulator so that one set of
    power/ground wires will power the Photon and one set will power the LED array.
    We’ll accomplish this by forking the wire coming out of the voltage regulator,
    so the red and black pair becomes two red and black pairs.'
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**分线。** 我们的LED阵列需要的功率比Photon能够输出的要多，因此我们将从电压调节器处分开电源线，这样一组电源/地线将为Photon供电，而另一组将为LED阵列供电。我们将通过将电压调节器出来的电线分叉来实现这一点，使红线和黑线成对变成两对红线和黑线。'
- en: Cut a new piece each of black and red wire, about two feet long. Fold the red
    wire in half, and strip a small section of wire at the fold. Wrap the exposed
    metal middle together with the exposed end of the red wire from the voltage regulator
    and add some solder so they’re attached. However you can get those two wires to
    stay together will work. When you’re done, shrink some heat-shrink tubing over
    that section.
  id: totrans-118
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 剪下一段约两英尺长的黑色和红色电线。将红色电线对折，并在折叠处剥开一小段电线。在折叠处将暴露的金属中间与电压调节器的红色电线暴露端连接起来，并添加一些焊料使它们固定。无论你如何将这两根电线固定在一起，都能达到目的。完成后，在这段电线处加上热缩管。
- en: Repeat this for the black wire. These steps are shown in [Figure 10-15](ch10.xhtml#ch10fig15).
  id: totrans-119
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对黑色电线重复此步骤。这些步骤如[图 10-15](ch10.xhtml#ch10fig15)所示。
- en: '![image](../images/f0196-01.jpg)'
  id: totrans-120
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![image](../images/f0196-01.jpg)'
- en: '**FIGURE 10-15:** Wrap the exposed end of the red wire around the exposed middle
    of a longer red wire, solder, and heat-shrink.'
  id: totrans-121
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图 10-15：** 将红色电线的裸露端绕在一根更长的红色电线的裸露中间，进行焊接并加热收缩。'
- en: '**Create two pairs of wires.** Pair up a red and black wire coming out of the
    fork by twisting them together so you have two pairs, and use more heat-shrink
    tubing to hold them together at the fork, as in [Figure 10-15](ch10.xhtml#ch10fig15).
    Remember to never let exposed black and red wires touch when the battery is plugged
    in!'
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**创建两对电线。** 将从分叉处出来的红色和黑色电线通过扭在一起形成一对，这样你就有了两对电线，并使用更多的热缩管在分叉处将它们固定在一起，如[图
    10-15](ch10.xhtml#ch10fig15)所示。记住，插入电池时，绝不要让暴露的黑色和红色电线接触！'
- en: With that, we’re done with the power part of this project! [Figure 10-16](ch10.xhtml#ch10fig16)
    shows a diagram of the project so far. You now can plug in a battery and, once
    we attach it to the board and LED array, you’ll be able to power both components
    and run them completely wirelessly.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 这样，我们就完成了这个项目的电源部分！[图 10-16](ch10.xhtml#ch10fig16)展示了到目前为止的项目示意图。现在你可以插入电池，一旦我们将其连接到电路板和LED阵列，你就能为两个组件供电，并使它们完全无线运行。
- en: '![image](../images/f0196-02.jpg)'
  id: totrans-124
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0196-02.jpg)'
- en: '**FIGURE 10-16:** A diagram of the components so far'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: '**图 10-16：** 到目前为止组件的示意图'
- en: '**Connecting the Particle Photon Board**'
  id: totrans-126
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '**连接Particle Photon板**'
- en: This section will just cover the wiring for the Photon; you’ll hook the Photon
    up to your phone as a wireless hotspot and program it in “[Code It](ch10.xhtml#lev133)”
    on [page 200](ch10.xhtml#page_200). If you want to get a feel for the Photon before
    you start semipermanently soldering wires to it, feel free to head there or look
    at other example projects using the board first. We’ll be using just three pins
    on the Photon—VIN, GND, and D3.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 本节将只涉及Photon的接线部分；你将把Photon连接到你的手机作为无线热点，并在[第200页](ch10.xhtml#page_200)的“[编程](ch10.xhtml#lev133)”中进行编程。如果你想在开始半永久性地将电线焊接到Photon之前先了解一下它，随时可以先去那里或查看其他使用该板的示例项目。我们将只使用Photon上的三个引脚——VIN、GND和D3。
- en: Some Photon boards will come with headers, and some won’t—[Figure 10-17](ch10.xhtml#ch10fig17)
    shows the difference in how they’ll look.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 一些Photon板会附带接头，而有些则不会——[图 10-17](ch10.xhtml#ch10fig17)展示了它们在外观上的差异。
- en: '![image](../images/f0197-01.jpg)'
  id: totrans-129
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/f0197-01.jpg)'
- en: '**FIGURE 10-17:** A Photon without headers (left) and with headers (right)'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: '**图 10-17：** 没有接头的Photon（左）和有接头的Photon（右）'
- en: Headers allow you to connect the Photon on a more temporary basis by plugging
    and unplugging it from a breadboard rather than soldering wires. But headers also
    add more bulk, and it’s easier for components to unplug from a breadboard if they
    get tugged the wrong way.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 接头允许你通过插拔将Photon临时连接到面包板上，而不是焊接电线。但接头也会增加体积，而且如果组件被拉扯到错误的方向，它们更容易从面包板上脱落。
- en: Without headers, you will solder wire directly to the board. This is more permanent—you
    can remove the wire by heating up the solder connection again, but that risks
    damaging the board.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 如果没有接头，你将直接将电线焊接到电路板上。这是更为永久的连接方式——你可以通过重新加热焊接点来移除电线，但这样有可能损坏电路板。
- en: If you want to experiment and are worried about getting things wrong, I recommend
    using headers and a breadboard, especially if you might want to use the Photon
    for other things.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想做实验，并担心搞错了，我建议使用接头和面包板，尤其是在你可能想把Photon用于其他用途的情况下。
- en: If you want to make this project permanent, I’d recommend soldering directly
    to the board at some point, even if you start with the breadboard. The following
    instructions assume you’re soldering wires directly to the Photon.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想使这个项目变得永久，我建议在某个时刻直接焊接到电路板上，即使你一开始使用的是面包板。以下说明假设你将电线直接焊接到Photon上。
- en: '**Solder the wires.** Take one pair of the forked red and black wires from
    the voltage regulator and connect them to the Photon, with the red wire to VIN
    and the black wire to GND, and then solder them in place, as shown in [Figure
    10-18](ch10.xhtml#ch10fig18). Make sure the solder joints from the VIN and GND
    do *not* touch each other or anything else on the board. Clip any extra wire you
    have poking up through the board so there’s nothing to snag.'
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![image](../images/f0197-02.jpg)'
  id: totrans-136
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: '**FIGURE 10-18:** Soldering the wires directly to the board'
  id: totrans-137
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '**Test the plug.** Double-check that the other pair of wires from the voltage
    regulator is protected (if you stripped the ends, make sure they aren’t touching),
    then plug in your battery. You should see your Photon spring to life! If you’re
    nervous about this step, try plugging the battery in for just a second and make
    sure you don’t see any smoke or sparks. If you *do* see smoke or sparks, somewhere
    your VIN/red line is touching your GND/black line. Double-check your soldering
    to make sure everything is connected up correctly and the solder is where it’s
    supposed to be and nowhere else.'
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Wiring the LED Array**'
  id: totrans-139
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'We’ll finish up by soldering the second pair of forked wires to the LED array.
    The LED array will need three lines: power, ground, and the data line from a digital
    pin (D3).'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
- en: There are many different brands of LED arrays out there, and the connections
    may be labeled differently. You’ll want to look either for arrows pointing toward
    or away from the board, or the words IN and OUT, to indicate which side the data
    line should go on.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
- en: 'There should be three terminals labeled + or 5V, – or GND, and DI (or DIN),
    as shown in [Figure 10-19](ch10.xhtml#ch10fig19). If they’re not labeled, look
    at the wires that come attached: red is usually +, black is –, and data is some
    other color. We’ll be removing the wires, so label the board itself if you need
    to.'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
- en: '**Remove the wires the board comes with.** The wires are just soldered on the
    surface, so put your hot soldering iron on the terminal and lightly pull the wire
    until the solder melts enough for the wire to come off. Remember not to get solder
    anywhere but the terminal, and don’t touch any other part of the board with your
    soldering iron.'
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Connect your power wires.** Next, take the remaining pair of forked red and
    black wires and connect them to a set of power + and – terminals on the LED array
    (they may also be labeled 5V and GND). Add a bit of solder to each pad first,
    then strip a small section of wire, cut it to fit the pad, heat up the solder
    on the pad, and put the stripped wire under the solder. This step is shown in
    [Figure 10-19](ch10.xhtml#ch10fig19).'
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![image](../images/f0199-01.jpg)'
  id: totrans-145
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: '**FIGURE 10-19:** Add more solder to the terminals. Make sure the exposed bit
    of wire is about the same length as the pad, then melt the solder on the terminal
    to attach the wire to the LED array.'
  id: totrans-146
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '**Connect the data line.** Take a wire that’s not red or black and connect
    it from the DIN terminal of the LED array to D3 (or any other D pin) of the Photon,
    as shown in [Figure 10-20](ch10.xhtml#ch10fig20). Wire length matters here—the
    shorter the wire between the Photon and the LED, the less chance of interference,
    which can mess up the LED display. Solder this connection in the same way as the
    power connections.'
  id: totrans-147
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![image](../images/f0199-02.jpg)'
  id: totrans-148
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: '**FIGURE 10-20:** Solder the DIN connection.'
  id: totrans-149
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Test the wiring now by plugging in the battery. You should see the Photon’s
    light turn on. The LEDs won’t light up yet because there’s no program telling
    them to. You’ll plug the battery in to turn the device on and off from now on.
  id: totrans-150
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: If your Photon’s light does not turn on, check the wiring coming out of the
    battery and into the Photon. Somewhere a wire is probably broken, meaning the
    Photon is not receiving power. Use the multimeter to see the voltage level at
    different places to diagnose where the break occurs. Also check that your red
    and black wires are not reversed.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
- en: If it still isn’t working, you may have accidentally turned the current adjustment
    screw all the way down instead of up. Try turning the current screw all the way
    in the opposite direction and see if that helps.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
- en: Once the Photon powers up, you can put your soldering iron away, because except
    for adjustments you might make after you’ve sewn your sash, you’re done with the
    physical hardware part of this project! Next up we’ll be uploading some scrolling
    text code, testing it, and then assembling the garment for the electronics to
    go inside!
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
- en: '**CODE IT**'
  id: totrans-154
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'Our end goal with the coding is to be able to text a message to a number and
    have that message display on the sash. To get this to work, we need code running
    in two places: on the Photon, and on a server that will wait to receive a message
    and then send it to your sash. We’ll focus on the code running on the Photon first.'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
- en: You can download the full code for this project from *[https://nostarch.com/LEDHandbook/](https://nostarch.com/LEDHandbook/)*.
    I’m going to give an overview of aspects of this code, but I’ve also added comments
    in the code itself to document how it works.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
- en: '**Connecting the Photon to Wi-Fi**'
  id: totrans-157
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: First, you’ll need to get your Photon hooked up to Wi-Fi. Use the documentation
    from the Photon site at *[https://docs.particle.io/guide/getting-started/intro/photon/](https://docs.particle.io/guide/getting-started/intro/photon/)*
    to see how to get started. Note that the documentation may be updated between
    this writing and your reading, so it may look a little different but should be
    easy to follow.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
- en: This step is optional and can be reconfigured later, so if you just want your
    Photon to connect to the internet right away, connect it to a traditional Wi-Fi
    network and skip this part. Once your Photon is connected, you should rarely have
    problems.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
- en: You’ll need to download the Particle app to connect your Photon to a Wi-Fi network.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
- en: '**Download the app.** Go to your app provider and search for Particle. The
    tile for the app looks like [Figure 10-21](ch10.xhtml#ch10fig21). Download and
    install the Particle app and create your own account.'
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![image](../images/f0201-01.jpg)'
  id: totrans-162
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: '**FIGURE 10-21:** The Particle app tile'
  id: totrans-163
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: You should be taken to the Your Devices screen. Click the **+** in the corner
    and choose **Set up a Photon**. You should now be able to connect to your Photon.
  id: totrans-164
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '**(Recommended) Connect your Photon to your phone’s hotspot.** I recommend
    turning on your phone’s Wi-Fi hotspot ability and connecting your Photon to that.
    This can be tricky, but it allows you to be fully mobile and not have to rely
    on hooking up your Photon to multiple Wi-Fi networks.'
  id: totrans-165
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: To connect your Photon to your phone, note your phone’s network name and password,
    then click **Connect to Wi-Fi network** and select **My network is not listed**.
    Enter your Wi-Fi name and password, as shown in [Figure 10-22](ch10.xhtml#ch10fig22).
  id: totrans-166
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: When the app shows a spinning indicator and says it’s looking for the Wi-Fi
    network, go back to Settings and turn your phone’s hotspot on. The Photon will
    connect to the internet, and from that point forward it will connect to your phone’s
    hotspot as long as the hotspot ability is on.
  id: totrans-167
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![image](../images/f0201-02.jpg)'
  id: totrans-168
  prefs: []
  type: TYPE_IMG
- en: '**FIGURE 10-22:** Photon screens for connecting to your phone’s Wi-Fi hotspot'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
- en: '**Coding the Photon**'
  id: totrans-170
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Once your Photon is connected, head over to *[https://build.particle.io/build](https://build.particle.io/build)*.
    This is where you’ll upload your code to your Photon. You’ll set up an account,
    and then you’ll be taken to an editor where you can send messages to your sash!
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
- en: '**Adding the LED Library**'
  id: totrans-172
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: The code for your Photon is available to download at *[https://nostarch.com/LEDHandbook/](https://nostarch.com/LEDHandbook/)*
    in the file *textsash1.ino*, but you’ll first need tell Particle to use the library
    for controlling the LEDs.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
- en: In the editor, hit the button to create a new app. Give your app a recognizable
    name, like TextSashPhoton. Hit the save button (folder icon) on the left side.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
- en: The Libraries icon looks like a bookmark on the left side of the screen; click
    this and scroll to the list of Community Libraries. You’ll likely see the NeoPixel
    library at the top of the list ([Figure 10-23](ch10.xhtml#ch10fig23)).
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/f0202-01.jpg)'
  id: totrans-176
  prefs: []
  type: TYPE_IMG
- en: '**FIGURE 10-23:** The Libraries icon and the Community Libraries section'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
- en: Click the NeoPixel library and you should see some code come up. Ignore this
    for now and look for the Include In App button, as shown in [Figure 10-24](ch10.xhtml#ch10fig24).
    Click it and select your recently made app by its name (if it’s not there, you
    might have forgotten to hit save after entering a name).
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/f0202-02.jpg)'
  id: totrans-179
  prefs: []
  type: TYPE_IMG
- en: '**FIGURE 10-24:** Including the NeoPixel library'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
- en: You should see an Included Libraries section in the gray bar to the left with
    NeoPixel listed, as well as an `#include` line at the top of your file specifying
    the `neopixel` library. Now you’re ready to add more code!
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
- en: '**Testing the Photon**'
  id: totrans-182
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: Before we add the code that will let us send messages to the array, let’s write
    some code to test that all the wires are hooked up right and everything is working
    as planned.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
- en: From the code files downloaded from *[https://nostarch.com/LEDHandbook/](https://nostarch.com/LEDHandbook/)*
    open the file *testArray.ino* and copy it onto the main part of the screen. Be
    sure the line that includes `#include` is there.
  id: totrans-184
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now make sure the Photon app knows which device it’s uploading code to. Click
    the Devices icon, which looks like a scope or crosshairs (see [Figure 10-25](ch10.xhtml#ch10fig25)).
    You should see your newly paired Photon on the list. Give it a name and then click
    the name. A star should show to the left of the name—when you upload code now,
    known as *flashing* code, it’ll go to that device.
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![image](../images/f0203-01.jpg)'
  id: totrans-186
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: '**FIGURE 10-25:** The Devices icon'
  id: totrans-187
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Make sure your Photon is powered and connected to the internet—the LED on the
    Photon should be blinking cyan if it is—and click the flash button (which looks
    like a lightning bolt) on the top of the left bar. You should see the Photon blink
    magenta. If this is your first time uploading code, it might go through some different
    colors while it makes sure the firmware is up to date and resets. When it’s all
    done, one LED in the corner of the array should light red.
  id: totrans-188
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: If the light didn’t come on, do some more troubleshooting.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
- en: '**Coding Text to Your LED Display**'
  id: totrans-190
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: Once you have the Photon working, paste the code from *shortstr_textsash.ino*
    from the book’s resources into the Photon editor. I’ve fully documented every
    function and any confusing bits within the code itself, so feel free to peruse
    it. Just scroll down past the code at the top that encodes the characters.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
- en: Flash that code by pressing the lightning button, and you should see `Hello
    World!` display across your LED array. That’s cool, but now let’s make it say
    exactly what we want!
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
- en: 'Please note there is one limitation for now: you can only send the sash 63
    characters at a time. Sending more doesn’t return an obvious error; it just doesn’t
    work. I’ll show you how to get around this later.'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
- en: 'To send a message to your LEDs, you’ll need two things: your Photon’s device
    ID and your access token. To find the device ID, click the Devices icon on the
    sidebar of the editor, then hit the arrow to the right of the device name. This
    will drop down the device ID in a textbox. Copy this ID to a text file for now.'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
- en: To find the access token, click **Settings** on the bottom left and you’ll find
    the code in a box there. Copy this to a text file too.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
- en: We will use these two identifiers to send data to the sash. Just like how your
    computer gets and sends data from the internet, connecting your Photon to the
    internet allows you to send data to your specific device to execute code. We’ll
    use *Postman*, an app for Chrome. You can download it and find out more at *[http://www.getpostman.com/](http://www.getpostman.com/)*.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
- en: '**NOTE**'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
- en: '*If you have a program of choice to send REST calls, feel free to use it.*'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
- en: Download the Chrome app and open Postman. Now we’ll set up a call that will
    send text to your sash.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
- en: Select **POST** from the drop-down menu shown in [Figure 10-26](ch10.xhtml#ch10fig26),
    and enter [https://api.particle.io/v1/devices/deviceID/buildString](https://api.particle.io/v1/devices/deviceID/buildString)
    for the URL, with your device ID replacing *deviceID*.
  id: totrans-200
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Body tab from the menu beneath the URL box, shown in [Figure 10-26](ch10.xhtml#ch10fig26),
    and select the **x-www-form-urlencoded** radio button. Enter access_token as the
    key and enter the access token you copied from your Photon account as the value.
    Then, on a new line, enter args as the key and type in the text you want to display
    on the LED array as the value. [Figure 10-26](ch10.xhtml#ch10fig26) shows what
    this looks like with all the parameters set up correctly. Remember that the message
    is limited to 63 characters for now.
  id: totrans-201
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![image](../images/f0204-01.jpg)'
  id: totrans-202
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: '**FIGURE 10-26:** How the call to Photon should be set up on Postman'
  id: totrans-203
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: When you’re done, save your post and hit the big blue **Send** button. You should
    see your LED array display your text!
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
- en: If you don’t see anything turn on at this point and everything prior to this
    has worked, it might be that your voltage regulator’s current regulator is set
    too low. Turn back to “[Attaching a Voltage Regulator](ch10.xhtml#lev130)” on
    [page 190](ch10.xhtml#page_190) for a refresher on setting the current on voltage
    regulators and make the adjustment.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
- en: '**Upping the Character Limit**'
  id: totrans-206
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: Now you have an LED array you can communicate with, but you’ll want to send
    more than 63 characters. Go back to your Particle editor and swap out the program
    you’ve been using with the file *longstr-textsash.ino*. This will let you make
    longer strings, but it’s a bit more complicated than that.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
- en: Instead of sending one message like you did before, you’ll send several after
    each other, and the Photon will store and merge them together until you tell it
    that you’re done and then display the messages.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
- en: In a text editor, type what you want to display, but break it up into 60-character
    chunks. Then, instead of sending one message, send each line as a separate message
    by pasting it into the `args` value in Postman. Your first line must be `1,BEGIN`
    and your final line will be `1,END` to signal the end of your message. Each line
    of text needs to begin with `0,` and then a space. For example, for the message
    “This is a really long string that goes on and on and on and I just can’t stop
    myself from typing so much. It’s so much fun!” you would send five args via Postman.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
- en: The first message tells the sash that it’s going to start getting text. The
    `1,END` command tells the sash that you’re done sending text and it can display
    what it’s been merging together.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  id: totrans-211
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: This might seem a pain to do manually, but don’t worry—you’re not going to use
    manually sent messages as a long-term plan anyway.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
- en: '**Coding the Server to Send Messages Through Texts**'
  id: totrans-213
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'If you don’t mind sending messages to your sash this way, you can stop here.
    Otherwise, this section will show you how to set up a service that will let you
    text messages to your sash. This requires a Twilio account, which is free. Twilio
    will give you a unique number to send messages to your sash from—if you send them
    from your own number, you’ll end up displaying every text you send! If you get
    lost at all in this section, you can visit my GitHub repo for directions on where
    to save information in various files here in the server folder: *[https://github.com/gelicia/textSashChapter](https://github.com/gelicia/textSashChapter)*.'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
- en: '**Installing node and npm**'
  id: totrans-215
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: This code will be written in JavaScript, and you’ll need to install node and
    npm. The process might be different depending on what operating system you’re
    using, so follow the instructions at *[https://docs.npmjs.com/getting-started/installing-node](https://docs.npmjs.com/getting-started/installing-node)*
    to install node and npm for your OS of choice.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
- en: '**NOTE**'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
- en: '*You’ll need to be running the command terminal as administrator here.*'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
- en: Once npm is installed, open up a terminal (use the Terminal application in macOS
    or search cmd from Start in Windows and click Command Prompt).
  id: totrans-219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Find where node is stored on your computer and navigate to the server folder
    in the terminal using the `cd` command; for example:'
  id: totrans-220
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE1]'
  id: totrans-221
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Run npm install from that folder in the terminal and you should see some text
    like `q@`, `restler@`, and `nedb@` show up. This is npm installing downloads from
    the libraries we’ll use in our server program, like the `neopixel` library. You’ll
    also see that the server folder now includes a folder called *node_modules*.
  id: totrans-222
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Inside this *node_modules* folder are some *.js* files. You’ll need to alter
    some permissions here using the device ID and access token from Photon you found
    earlier.
  id: totrans-223
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: First rename *particleConfigTEMP.js* and *twilioConfigTEMP.js* to particleConfig.js
    and twilioConfig.js (i.e., remove *TEMP* from both). The *particleConfig.js* file
    is easier—you already have the device ID and access token from what you did via
    Postman.
  id: totrans-224
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Setting Up a Unique Number with Twilio**'
  id: totrans-225
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: The changes you need to make to the *twilioConfig.js* file will require a Twilio
    account.
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
- en: Sign up for a Twilio account at *[https://www.twilio.com/](https://www.twilio.com/)*,
    making sure to select that you’ll be using SMS (the rest of the questions don’t
    matter, so you can leave them blank). You’ll have to provide a valid cell number
    to receive a confirmation code, and you’ll use that to complete the signup.
  id: totrans-227
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: When you log in, you should see a Get Started button; click that and then click
    **Get a number**. You should be offered a number to use; click **Choose this number**.
    Note this number for later. You’ll send messages from this number to display on
    the sash. If you can’t find it, scroll down to Phone Numbers from the dashboard
    and click it.
  id: totrans-228
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You should see your number listed. Write down your number, then click the home
    button. You should see your account SID and Auth Token on the page. Put those
    into the *twilioConfig.js* file you renamed at the beginning of this section—remember
    you can see the files in my GitHub repo if you need more guidance.
  id: totrans-229
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Plug your LED array into power and then in your terminal, run node bot.js. Now,
    from your phone, text a message you want to display to your Twilio number.
  id: totrans-230
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You should see the message queue up in the terminal, and then it should show
    up on the LED array. If something doesn’t work, check what error messages you
    get in your console and confirm that you set up your permissions IDs correctly.
  id: totrans-231
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Now you have a simple way to interact with your LEDs! You can either keep your
    number to yourself and text new messages, or give it to some trusted friends to
    text as well.
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
- en: '**GOING FURTHER WITH THE SERVER**'
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
- en: The final step in this section would be to put this program somewhere it won’t
    turn off when your computer shuts down. This is beyond the scope of this book,
    but if you have the know-how or a friend who does, I recommend using DigitalOcean
    (they have excellent help for beginners) and the npm library `forever` (*[https://github.com/foreverjs/forever](https://github.com/foreverjs/forever)*),
    which lets you run the *bot.js* script continuously and will restart it if it
    fails.
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
- en: '**ASSEMBLE IT**'
  id: totrans-235
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'Finally we’ll make the garment to hold the LED display. There are two routes
    you can take here—either build everything from scratch, or buy something and modify
    it to suit your project. This is why it’s important to do the electronics part
    first: you need to know what you’re putting in pockets before you start making
    them.'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
- en: I’ll be showing you how to make a sash that holds everything—battery, voltage
    regulator, Photon, and LED array—in three pockets, as shown in [Figure 10-27](ch10.xhtml#ch10fig27).
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/f0208-01.jpg)'
  id: totrans-238
  prefs: []
  type: TYPE_IMG
- en: '**FIGURE 10-27:** The sash is constructed with three pockets, and straps to
    hold the wiring in place.'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
- en: '**Gathering the Materials**'
  id: totrans-240
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: We’ll make a black sash, which shows off the colors of the LEDs nicely. However,
    dark colors can absorb the light and make the displayed text hard to see, so we
    need two layers—first a thin layer of terry cloth from a cut-up white towel or
    washcloth, and then the black fabric.
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
- en: The terry cloth diffuses the light well and counteracts the light absorption
    from the black fabric. [Figures 10-28](ch10.xhtml#ch10fig28) through [10-31](ch10.xhtml#ch10fig31)
    show the same LED light display behind different kinds of fabric.
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/f0209-01.jpg)'
  id: totrans-243
  prefs: []
  type: TYPE_IMG
- en: '**FIGURE 10-28:** The LED array with no cover'
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/f0209-02.jpg)'
  id: totrans-245
  prefs: []
  type: TYPE_IMG
- en: '**FIGURE 10-29:** The LED array covered by black fabric. Notice the lights
    are not diffused at all—this is difficult to read when scrolling.'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/f0209-03.jpg)'
  id: totrans-247
  prefs: []
  type: TYPE_IMG
- en: '**FIGURE 10-30:** The LED array covered by terry cloth. Notice the lights are
    really diffused and bleed into each other really well.'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../images/f0209-04.jpg)'
  id: totrans-249
  prefs: []
  type: TYPE_IMG
- en: '**FIGURE 10-31:** The LED array covered by terry cloth and black fabric. This
    is the final piece.'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
- en: '**Supplies**'
  id: totrans-251
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: 'You’ll need the following supplies:'
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
- en: 1.5 yards of black fabric (I used plain black cotton)
  id: totrans-253
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: White terry cloth (either bulk or a towel to cut up)
  id: totrans-254
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Newspaper or scrap paper
  id: totrans-255
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Tools**'
  id: totrans-256
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: 'You’ll also need the following tools:'
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
- en: Scissors—preferably fabric scissors or pinking shears
  id: totrans-258
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Tape measure
  id: totrans-259
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Marker pen
  id: totrans-260
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Needles, thread, and straight pins
  id: totrans-261
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: (Optional) Sewing machine; you could also hand-sew the sash instead
  id: totrans-262
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: (Optional) White fabric pen or chalk; this helps with marking where you need
    to sew
  id: totrans-263
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: (Optional) Iron
  id: totrans-264
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Constructing the Sash**'
  id: totrans-265
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: First, think of where you might put the parts of the project; we need the battery
    near the base because it’s heavy and cumbersome, and if it’s at the top it will
    gradually pull down. We want the LED array front and center, and we need the Photon
    nearby to minimize interference on the wire. We’ll try making the sash out of
    paper first, to experiment with how things fit.
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
- en: First, measure from the top of your shoulder to your opposite hip to get an
    estimate of size. For me, 30 inches was about right.
  id: totrans-267
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Lay two pages of a newspaper or a large sheet of newsprint flat on the ground.
    The front and back of the sash are the same shape, so you can cut them both out
    at the same time. Lay the tape measure on the paper in a slight curve, to mimic
    the shape you’ll want your sash ([Figure 10-32](ch10.xhtml#ch10fig32)). Draw that
    curve on the newspaper, marking the beginning and end points of the length you
    measured earlier.
  id: totrans-268
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: For the width, think about the width of the LED array, and how much space you
    want on either side. The LED array is 3.5 inches wide, and I made my sash pattern
    about 7 to 8 inches wide to begin with. Using the line you drew as the center,
    mark half your width on both sides ([Figure 10-33](ch10.xhtml#ch10fig33)).
  id: totrans-269
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![image](../images/f0211-01.jpg)'
  id: totrans-270
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: '**FIGURE 10-32:** Using the measuring tape to ensure the sash is about the
    correct length'
  id: totrans-271
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![image](../images/f0211-02.jpg)'
  id: totrans-272
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: '**FIGURE 10-33:** Use the centerline and the width you want to get the rest
    of the sash shape on the newspaper.'
  id: totrans-273
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: You’ll end up with two pieces of a vaguely sash-like shape. Cut it out of the
    paper and tape the ends together to form a sash. Put this paper sash on ([Figure
    10-34](ch10.xhtml#ch10fig34)) and see if you want to make any adjustments to the
    shape. I always take a lot off the shoulder and some from the bottom because it
    sticks out.
  id: totrans-274
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![image](../images/f0212-01.jpg)'
  id: totrans-275
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: '**FIGURE 10-34:** Try on the paper sash and trim as needed.'
  id: totrans-276
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Keep adjusting the shape until you’re happy with it. My final paper sash looked
    like [Figure 10-35](ch10.xhtml#ch10fig35).
  id: totrans-277
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![image](../images/f0212-02.jpg)'
  id: totrans-278
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: '**FIGURE 10-35:** The sash shape once adjusted'
  id: totrans-279
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Once you have the shape right, you can use it as a pattern to cut out the fabric.
    We’ll have two layers to the sash to make it stronger, so you’ll need to cut out
    two full sash shapes and sew them on top of each other. The best way to do this
    is to fold your fabric with the fold going over the shoulder.
  id: totrans-280
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Mark the outline of the paper on the fabric directly or pin the pattern to the
    fabric and cut around the paper.
  id: totrans-281
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: If you have a serger sewing machine, use fabric scissors to cut out the sash.
    If not, use pinking shears to prevent the fabric from fraying.
  id: totrans-282
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: If you couldn’t fold the fabric over the shoulder, just sew two pieces together
    so it looks like [Figure 10-36](ch10.xhtml#ch10fig36), with the front and back
    attached at the top. You’ll want two of these shapes.
  id: totrans-283
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Mark the sides as shown in [Figure 10-36](ch10.xhtml#ch10fig36) and sew the
    two layers on top of each other, either with a serger or using a straight stitch
    on the zigzag edges if you cut your fabric with pinking shears.
  id: totrans-284
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![image](../images/f0213-01.jpg)'
  id: totrans-285
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: '**FIGURE 10-36:** Mark where you’ll stitch the two layers together.'
  id: totrans-286
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Turn the piece inside out so the sewn edges are now inside. You can iron the
    pieces flat or stitch on top to make sure they stay flat. You should have something
    like [Figure 10-37](ch10.xhtml#ch10fig37) when you’re done.
  id: totrans-287
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![image](../images/f0213-02.jpg)'
  id: totrans-288
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: '**FIGURE 10-37:** The sash base is mostly done!'
  id: totrans-289
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Now sew one of the ends shut and tuck the raw edges on the other end inside
    so it has a nice folded edge. Place the sewn-up end inside the folded end about
    an inch and stitch both through to close the sash.
  id: totrans-290
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Now that the base of the sash is done, we’re going to need a few more things:
    three pockets (one for the battery and the voltage regulator, one for the LED
    array, and one for the Photon) and straps to hold down the wiring. Let’s start
    with the pocket for the battery and the voltage regulator.'
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
- en: '**Sewing the Battery and Voltage Regulator Pocket**'
  id: totrans-292
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: The battery needs to fit snugly in its pocket so it doesn’t move around. To
    make this work, we’ll create a box-like pocket with sides about an inch deep.
    We’ll place this pocket at the bottom of the sash in the back, so it will rest
    on your lower back. This balances out the weight of the array on the front of
    the sash. The most important thing here is to make sure the battery fits. I’ve
    thrown away plenty of pockets because they were too big or too tight.
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
- en: To make sure the pocket fits the battery and voltage regulator, put the battery
    in the middle of some fabric and draw around it, leaving a couple inches on all
    sides and cutting off excess. Fold one side of the fabric over a little to create
    a hem and sew it in place—that will be the open end of the pocket.
  id: totrans-294
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: On the side opposite the hemmed edge, fold the end and sides in by an inch or
    so, fold the corners in until the point of the triangle meets the corner of the
    battery, and then pin the folds in place (see [Figure 10-38](ch10.xhtml#ch10fig38),
    top).
  id: totrans-295
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Fold the sides of the pocket in, so that the triangle made in the corners keeps
    the sides and bottom up ([Figure 10-38](ch10.xhtml#ch10fig38), center), and pin
    it in place. Don’t worry if it’s ugly; no one will see the end of the pocket.
  id: totrans-296
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Test the size with the battery, and if it fits well, sew the corner triangles
    in place, then sew along the outside edge of each corner for good measure ([Figure
    10-38](ch10.xhtml#ch10fig38), bottom).
  id: totrans-297
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![image](../images/f0214-01.jpg)'
  id: totrans-298
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: '**FIGURE 10-38:** Beginning to shape the bottom of the pocket'
  id: totrans-299
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Place the pocket vertically with the open part up. You’ll want to place the
    pocket at the bottom of the back of the sash, since it’s heavy and you want it
    out of the way and out of sight.
  id: totrans-300
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Pin the pocket in place and stitch the bottom, then the sides, to the sash.
    Leave a bit of unstitched space at the corners so the case can bulge out a bit
    if it needs to.
  id: totrans-301
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Try putting the battery and regulator in the pocket and putting the sash on.
    You’ll have more weight on the other side to even things out later, but if you
    need to move the battery or use another method to hold it down, feel free to do
    so.
  id: totrans-302
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Sewing the LED Array Pocket**'
  id: totrans-303
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Next up is the LED pocket, which is a flat pocket. We’ll add a layer of terry
    cloth to the inside of this pocket to diffuse the light. So the layers, from your
    body outward, will be: two layers of black sash fabric, then the LED array, and
    then the terry cloth and outer black fabric of the pocket.'
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
- en: On the terry cloth, mark and cut out around the LED matrix, with a tiny bit
    of wiggle room, as shown in [Figure 10-39](ch10.xhtml#ch10fig39). Use pinking
    shears if you don’t have a serger. Leave a bit more room on the top, so you can
    fold and sew an edge of black fabric over for the top of the pocket.
  id: totrans-305
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![image](../images/f0215-01.jpg)'
  id: totrans-306
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: '**FIGURE 10-39:** Cutting out and sewing the terry cloth and fabric layers'
  id: totrans-307
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Serge the edge of the terry cloth, or leave a zigzag edge if you don’t have
    a serger. We’ll be covering the edges in the pocket fabric so it won’t be visible.
    Put the terry cloth on the black fabric and draw around it, leaving 3 to 4 inches
    around on each side.
  id: totrans-308
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Fold the black fabric over itself by an inch or so, and then fold it over again
    on the terry cloth so the serged or raw edge of the terry cloth doesn’t show,
    and pin the folds in place. Do that to all sides, as shown in the bottom panel
    of [Figure 10-39](ch10.xhtml#ch10fig39).
  id: totrans-309
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Place the LED array on the cloth to make sure it still fits.
  id: totrans-310
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Determine where you want the pocket to go on the sash, line it up, and then
    pin it in place. This is a good opportunity to try the sash on again, to make
    sure the pocket looks right when worn and that the array fits. Stitch the pocket
    in place onto the sash, trying to keep close to the edge of the pocket.
  id: totrans-311
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now we’ll build a pocket for the Photon.
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
- en: '**Sewing the Photon Pocket**'
  id: totrans-313
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'If your Photon doesn’t have headers, follow the same idea as the LED pocket
    to make a flat pocket. If your Photon has headers, follow the same idea as the
    battery pocket to fit the bulk. You may need to hand-sew the bottom. Then place
    it on the sash as follows:'
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
- en: Once you’ve made the Photon pocket, position it just above the LED pocket, as
    shown in [Figure 10-40](ch10.xhtml#ch10fig40), so that the wire from the Photon
    to the LED is as short as possible.
  id: totrans-315
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![image](../images/f0216-01.jpg)'
  id: totrans-316
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: '**FIGURE 10-40:** The Photon pocket positioned a small distance above the LED
    pocket'
  id: totrans-317
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Sew only the two long sides, so wires can come out of the top and bottom. They’ll
    hold the Photon in place. If it ever seems like it’s poking out too much, you
    can add a snap to the top of the pocket to keep the Photon in place.
  id: totrans-318
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Adding Wire Straps**'
  id: totrans-319
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: The last thing we’ll add are little straps to hold the wires down to the sash.
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
- en: Cut out a strip of fabric, about 3 inches wide and 1.5 feet long. Serge or sew
    the long sides together to make a cylinder, then turn it inside out—you might
    want to attach a safety pin to one side of one end and push it through to the
    other end to make this easier.
  id: totrans-321
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Once the right side is out, you’ll end up with something more tube-like than
    strap-like. Stitch the long side opposite the seam or iron it so it stays flat.
  id: totrans-322
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Cut the fabric into shorter sections, about 3 inches long. You’ll probably need
    about four of them. Hang on to them for now; once you’ve figured out where your
    wires will be sticking out in the next section, you’ll stitch them to the sash.
  id: totrans-323
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now you’ll need to make the connecting wires of the project longer or shorter
    to fit your sash.
  id: totrans-324
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: This is your project, so you can make any adjustments you want! I’ve taken out
    some seams so wires can come out of the sides of pockets, added snaps to pockets
    that don’t close up, and more.
  id: totrans-325
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: To lengthen or shorten the wires, you just need to undo the soldering and either
    cut down or add new wires, making sure to note where to reconnect them. See the
    appendix for more soldering tips.
  id: totrans-326
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Remember the voltage regulator doesn’t necessarily need to be soldered, so you
    can unscrew the wires, thread them under straps, and then screw them back up after.
    Look back at the electronics part of this chapter if you need to remember the
    wiring. Now you should be able to fit your electronics inside your sash!
  id: totrans-327
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Once you’re done figuring out wire length, space your straps along the sash
    so the wires lie flat. Pin and then sew the straps in place. I only needed those
    going from the front over the shoulder to the back battery pocket. See [Figure
    10-41](ch10.xhtml#ch10fig41) for where I put my straps to hold wires.
  id: totrans-328
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![image](../images/f0218-01.jpg)'
  id: totrans-329
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: '**FIGURE 10-41:** The front and back of the sash, with the wires at a good
    length and positioned under straps. All the components are in their pockets and
    it’s ready to wear!'
  id: totrans-330
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Once you’re done with that, put all the items in their pockets and the wires
    in their holders, and your sash is finished!
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
- en: '**SUMMARY**'
  id: totrans-332
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'Now you have a wearable LED array that can display text. I’ve included a sample
    server to send text messages, but other options are available too. Small pictures,
    colors, and designs are all available. Just remember: the more LEDs on at one
    time, the more current draw. Go out in the world with your own fantastic LED sash!'
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
