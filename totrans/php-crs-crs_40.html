<html><head></head><body>
<div id="sbo-rt-content"><section aria-labelledby="app-c" epub:type="appendix" role="doc-appendix">
<span aria-label="673" epub:type="pagebreak" id="pg_673" role="doc-pagebreak"/>
<hgroup>
<h1 class="APP" id="app-c">
<span class="CN"><span class="SANS_Futura_Std_Bold_Condensed_B_11">C</span></span>
<span class="CT"><span class="SANS_Dogma_OT_Bold_B_11">REPLIT CONFIGURATION</span></span>
</h1>
</hgroup>
<figure class="opener"><img alt="" class="opener" height="380" src="../images/opener.jpg" width="380"/>
</figure>
<p class="INTRO">If you’ve chosen to use the Replit online coding environment to follow along with this book, you’ll be able to get started right away using Replit’s default PHP settings. As you move through the book, however, you may need to make some changes to make Replit work with more sophisticated tools like the Composer dependency manager and a database management system. This appendix discusses how to reconfigure your Replit projects. The settings we’ll discuss apply to both PHP CLI and PHP Web Server projects.</p>
<section aria-labelledby="sec1" epub:type="division">
<span aria-label="674" epub:type="pagebreak" id="pg_674" role="doc-pagebreak"/>
<h2 class="H1" id="sec1"><span id="toc-link_427"/><span class="SANS_Futura_Std_Bold_B_11">Changing the PHP Version</span></h2>
<p class="TNI1">A new Replit project may not be running the latest version of PHP by default. To find out, enter <span class="SANS_TheSansMonoCd_W7Bold_11">php -v</span> into the Replit command line shell. You should see the PHP version number printed in response. If this isn’t the latest version of PHP, you may be able to change the version by editing one of the project’s hidden configuration files. First, show the hidden files by clicking the three vertical dots widget in the left-hand Files column and choosing <b>Show Hidden Files</b> (see <a href="#figC-1">Figure C-1</a>).</p>
<figure class="IMG"><img alt="" class="img100" height="796" id="figC-1" src="../images/figureC-1.jpg" width="1353"/>
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure C-1: Showing hidden files for the current Replit project</span></p></figcaption>
</figure>
<p class="TX">You should now see a new section in the Files column labeled Config Files and containing two files: <i>.replit</i> and <i>replit.nix</i>. Select the <i>replit.nix</i> file, and you should see its contents in the middle editor column. The contents should look something like <a href="#lisC-1">Listing C-1</a>.</p>
<span id="lisC-1"/>
<pre><code>{pkgs}: {&#13;
  deps = [&#13;
    pkgs.php&#13;
  ];&#13;
}</code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing C-1: The</span> <span class="SANS_Futura_Std_Book_11">replit.nix</span> <span class="SANS_Futura_Std_Book_Oblique_11">configuration file</span></p>
<p class="TX"><span aria-label="675" epub:type="pagebreak" id="pg_675" role="doc-pagebreak"/>To change the PHP version, add two digits to the end of <span class="SANS_TheSansMonoCd_W5Regular_11">pkgs.php</span> representing the major and minor version numbers you want (for example, <span class="SANS_TheSansMonoCd_W5Regular_11">pkgs.php82</span> to use PHP version 8.2.<i>x</i>). Then, if you enter <span class="SANS_TheSansMonoCd_W7Bold_11">php -v</span> at the command line again after a short time, you should see the new version number listed.</p>
<p class="TX">This may take some trial and error, as Replit may not be able to work with the absolute latest version of PHP. For example, it can’t run PHP 8.3 at the time of this writing, though in the future you should be able to use <span class="SANS_TheSansMonoCd_W5Regular_11">pkgs.php83</span> to run PHP 8.3.<i>x</i>, then <span class="SANS_TheSansMonoCd_W5Regular_11">pkgs.php84</span> for version 8.4.<i>x</i>, and so on.</p>
<blockquote>
<p class="Note"><span class="SANS_Dogma_OT_Bold_B_15">NOTE</span></p>
</blockquote>
<p class="NOTE-TXT"><i>Rather than guessing how long it will take to rebuild the environment after changing a configuration setting, you can close the current shell tab and then open a new one. You won’t be shown a command line prompt in the new tab until the new environment has been fully loaded.</i></p>
</section>
<section aria-labelledby="sec2" epub:type="division">
<h2 class="H1" id="sec2"><span id="toc-link_428"/><span class="SANS_Futura_Std_Bold_B_11">Adding the Composer Tool</span></h2>
<p class="TNI1"><span class="Xref"><a href="chapter20.xhtml">Chapter 20</a></span> introduces the Composer command line tool for dependency management. This tool isn’t available by default in Replit PHP projects, but you can easily add it by editing the <i>replit.nix</i> configuration file. Make the changes shown in <a href="#lisC-2">Listing C-2</a>, replacing the <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span> after the <span class="SANS_TheSansMonoCd_W5Regular_11">8</span> with the appropriate PHP minor version number, such as <span class="SANS_TheSansMonoCd_W5Regular_11">2</span> for PHP version 8.2.</p>
<span id="lisC-2"/>
<pre><code><span class="TheSansMonoCd_W5Regular_Grey_11">{pkgs}: {</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">  deps = [</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">    pkgs.php8x</span>&#13;
    pkgs.php8<span class="TheSansMonoCd_W5Regular_Italic_11">x</span>Packages.composer&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">  ];</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">}</span></code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing C-2: Adding Composer to the</span> <span class="SANS_Futura_Std_Book_11">replit.nix</span> <span class="SANS_Futura_Std_Book_Oblique_11">configuration file</span></p>
<p class="TX">After the Replit environment updates, enter <span class="SANS_TheSansMonoCd_W7Bold_11">composer</span> at the command line. If everything is working, you should see a list of all the commands available with the Composer tool.</p>
</section>
<section aria-labelledby="sec3" epub:type="division">
<h2 class="H1" id="sec3"><span id="toc-link_429"/><span class="SANS_Futura_Std_Bold_B_11">Using the SQLite Database System</span></h2>
<p class="TNI1"><span class="Xref"><a href="part6.xhtml">Part VI</a></span> introduced database programming with the MySQL and SQLite database systems. If you’re following along with Replit, the most straightforward option is to use SQLite, which as of this writing is available by default for all Replit PHP projects. You can verify this by executing the <span class="SANS_TheSansMonoCd_W5Regular_11">phpinfo()</span> function and checking the PDO and <span class="SANS_TheSansMonoCd_W5Regular_11">pdo_sqlite</span> entries, as in <a href="#figC-2">Figure C-2</a>.</p>
<span aria-label="676" epub:type="pagebreak" id="pg_676" role="doc-pagebreak"/>
<figure class="IMG"><img alt="" class="img100" height="948" id="figC-2" src="../images/figureC-2.jpg" width="1389"/>
<figcaption><p class="CAP"><span class="SANS_Futura_Std_Book_Oblique_11">Figure C-2: Confirming PDO SQLite features by printing</span> <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">phpinfo()</span></p></figcaption>
</figure>
<p class="TX">In the event the default installation of SQLite is removed in the future, you can add it to a Replit project by editing the <i>replit.nix</i> configuration file to include the two extra lines shown in <a href="#lisC-3">Listing C-3</a>. This is how my typical PHP Web Server project <i>replit.nix</i> file looked before SQLite was added as a default.</p>
<span id="lisC-3"/>
<pre><code><span class="TheSansMonoCd_W5Regular_Grey_11">{pkgs}: {</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">  deps = [</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">    pkgs.php8x</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">    pkgs.php8xPackages.composer</span>&#13;
    pkgs.php8<span class="TheSansMonoCd_W5Regular_Italic_11">x</span>Extensions.pdo&#13;
    pkgs.sqlite&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">  ];</span>&#13;
<span class="TheSansMonoCd_W5Regular_Grey_11">}</span></code></pre>
<p class="CodeListingCaption"><span class="SANS_Futura_Std_Book_Oblique_11">Listing C-3: Enabling SQLite in the</span> <span class="SANS_Futura_Std_Book_11">replit.nix</span> <span class="SANS_Futura_Std_Book_Oblique_11">file</span></p>
<p class="TX">These extra lines add the PDO extension and SQLite to the project. Once again, replace the <span class="SANS_TheSansMonoCd_W5Regular_Italic_11">x</span> with the latest minor version number of PHP available.</p>
</section>
<section aria-labelledby="sec4" epub:type="division">
<h2 class="H1" id="sec4"><span id="toc-link_430"/><span class="SANS_Futura_Std_Bold_B_11">Serving Pages from the public Directory</span></h2>
<p class="TNI1">When you click the Run button in a PHP Web Server project, Replit defaults to serving all files and folders for the project. As discussed in <span class="Xref"><a href="chapter10.xhtml">Chapter 10</a></span>, however, it’s best for security reasons to create a <i>public</i> folder for the project and serve only the contents of this folder. While you can always serve from <i>public</i> by entering <span class="SANS_TheSansMonoCd_W7Bold_11">php -S localhost:8000 -t public</span> in the shell, you may find it <span aria-label="677" epub:type="pagebreak" id="pg_677" role="doc-pagebreak"/>more convenient to change the behavior of the Run button instead. For that, open the hidden <i>.replit</i> configuration file and change the first line as follows:</p>
<pre><code>run = "php -S 0.0.0.0:8000 -t ./public"</code></pre>
<p class="TX">If your <i>index.php</i> script is located in a <i>public</i> folder and you don’t make this change, clicking the Run button will trigger a <span class="SANS_TheSansMonoCd_W5Regular_11">404 Not Found</span> error, since Replit will be looking for the <i>index.php</i> script in the root directory of the project.</p>
</section>
</section>
</div></body></html>