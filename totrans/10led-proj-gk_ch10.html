<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" epub:prefix="z3998: http://www.daisy.org/z3998/2012/vocab/structure/#" lang="en" xml:lang="en">
  <head>
    <title>Project 10: Wearable LED Text-Scrolling Sash by Kristina Durivage</title>
    <link href="../styles/9781593278472.css" rel="stylesheet" type="text/css"/>
    <link href="../68851547a55f.css" rel="stylesheet" type="text/css"/>
  </head>
  <body>
    <div id="sbo-rt-content"><h2 class="h2" id="ch10"><span epub:type="pagebreak" id="page_182"/><span class="big">10</span><br/>Wearable LED Text-Scrolling Sash by Kristina Durivage</h2>
<p class="ch-sub"><span epub:type="pagebreak" id="page_183"/>In this chapter, you’ll make an LED sash with interactive scrolling text.</p>
<div class="image"><img src="../images/f0183-01.jpg" alt="image"/></div>
<p class="noindent"><span epub:type="pagebreak" id="page_184"/>Small and bright LEDs are really fun for making things you can wear! Wearing LED clothes at night is a sure way to stand out. This chapter will show you how to construct an LED sash that scrolls text and lets you interact with it wirelessly. As the final project in this book, it’s a little more difficult than the other projects, in terms of both electronics and construction of the sash itself. But the payoff is a sash whose scrolling text you can alter and update on the move through your phone.</p>
<h3 class="h3" id="lev125"><strong>GET THE PARTS</strong></h3>
<div class="note">
<p class="notet"><strong>NOTE</strong></p>
<p class="notep"><em>Supplies and tools for sewing the sash are listed in “<a href="ch10.xhtml#lev144">Gathering the Materials</a>” on <a href="ch10.xhtml#page_208">page 208</a>.</em></p>
</div>
<p class="noindent">This parts list is pretty substantial and many parts have options, so feel free to browse ahead in the chapter for more specifications. With these items, you can put wireless LEDs pretty much anywhere!</p>
<h4 class="h4" id="lev126"><strong>Components</strong></h4>
<ul>
<li class="noindent">Battery (I’m using a 7.2 V NiMH battery with a capacity of 5,000 mAh. See “<a href="ch10.xhtml#ch10sb1">Calculating the Battery Capacity You Need</a>” on <a href="ch10.xhtml#page_186">page 186</a> to figure out how much current your project will require.)</li>
<li class="noindent">Step-down, adjustable voltage regulator</li>
<li class="noindent">8 × 32 NeoPixel RGB LED matrix (Adafruit P/N 2294, SparkFun P/N 13304, or search for “WS2812” on eBay—NeoPixel is a nickname for the WS2812 type of LED)</li>
<li class="noindent">Particle Photon board, with or without headers (available from <em><a href="https://store.particle.io/products/photon">https://store.particle.io/products/photon</a></em>; see “<a href="ch10.xhtml#lev131">Connecting the Particle Photon Board</a>” on <a href="ch10.xhtml#page_196">page 196</a> for more details)</li>
<li class="noindent">T-style Deans plug connectors (1 female, 1 male)</li>
<li class="noindent">22-gauge solid hookup wire (black, red, and another color)</li>
</ul>
<div class="note">
<p class="notet"><strong>NOTE</strong></p>
<p class="notep"><em>If you want to make a smaller garment, feel free to use a smaller NeoPixel array. Also, if you want your LEDs to be more flexible, say in the hem of a skirt or a pant leg, I’d suggest using stranded wire rather than solid core.</em></p>
</div>
<p class="indent">I’ll be showing how to adjust the voltage regulator in this chapter, but you may want to review the beginning of the section “<a href="ch10.xhtml#lev130">Attaching a Voltage Regulator</a>” on <a href="ch10.xhtml#page_190">page 190</a> if you’re unfamiliar with these—there are a few different options and it can get tricky.</p>
<h4 class="h4" id="lev127"><strong>Tools</strong></h4>
<p class="noindent">Here is a list of tools you’ll need for the electronics part of the build, as well as some that are simply recommended to make things easier:</p>
<ul>
<li class="noindent">Soldering iron</li>
<li class="noindent">Solder</li>
<li class="noindent"><span epub:type="pagebreak" id="page_185"/>Helping hands (or some other kind of vise)</li>
<li class="noindent">Alligator clips</li>
<li class="noindent">Pliers</li>
<li class="noindent">Multimeter</li>
<li class="noindent">Electrical tape</li>
<li class="noindent">Heat-shrink tubing</li>
</ul>
<h3 class="h3" id="lev128"><strong>BUILD IT</strong></h3>
<p class="noindent">We’re going to build this project in stages. First, we’ll build what we need for power. Then we’ll hook up the Photon and the LED array, because we can only test those things when they have power to run. Once the electronics are all connected up, we’ll make a sash that houses the project comfortably.</p>
<p class="indent">The power is the least flashy part, but it will be worth it to have a fully mobile project!</p>
<p class="indent"><a href="ch10.xhtml#ch10fig1">Figure 10-1</a> shows a diagram of the final circuit. If you get stuck at all, use this diagram as a reference.</p>
<div class="image"><a id="ch10fig1"/><img src="../images/f0185-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-1:</strong> Circuit diagram for the text sash</p>
<h4 class="h4" id="lev129"><strong>Getting Power: Replacing the Plug on Your Batteries</strong></h4>
<p class="noindent">With our batteries, we’ll be dealing with two wires—power and ground. There’s one important rule here: <em>do not let the power and ground wires touch or come in contact with the same piece of metal</em>. It’s a simple rule, but it’s very important because if they touch it will cause a short in the wiring, which can mean anything from your project not working to a component actually breaking.</p>
<div class="sidebar">
<p class="sidebart" id="ch10sb1"><span epub:type="pagebreak" id="page_186"/><strong>CALCULATING THE BATTERY CAPACITY YOU NEED</strong></p>
<p class="spara">Battery capacity is a compromise between weight, cost, and endurance. To figure out what your project needs in terms of battery capacity, first check how many LEDs you have. The array I have is 8 × 32 LEDs, meaning I have 256 LEDs total. Most of the time an LED will use a max draw of 60 mA (full bright white light), with an average use of 20 mA. So if we multiply that by our number of LEDs, our calculations show our sash will have a maximum draw of 15,360 mA (~15.5 A) and an average draw of 5,120 mA (5 A).</p>
<p class="spara1">However, since our LEDs will display scrolling text, most will be off at any given time, so our actual use will be much less than that. With a multimeter, I measured current draw of between 0.5 and 0.7 A for my final project. On that amp draw, a 3,600 mAh battery will last about 5 hours and a 5,000 mAh battery will last about 7 hours.</p>
<p class="spara1">If you want to use the array for something else that runs all the LEDs at once and need the higher amp draw, the 3,600 mAh battery will last 13 to 42 minutes and the 5,000 mAh will last 20 to 58 minutes. Those numbers aren’t exact—batteries are never exact—and you lose a bit of power with the voltage regulator and the other components, so it’s best to overestimate your needs.</p>
</div>
<p class="indent">For this project, I recommend a NiMH battery that’s 7.2 V 5,000 mAh. The LEDs and the Photon need 5 V, and at 7.2 V this battery provides the closest voltage. Later, we’ll use a regulator to take the voltage down to 5 V to avoid damaging parts.</p>
<p class="indent">Our battery needs to plug into our charger and our project, but chances are they don’t currently have the same connection type. We’re going to replace the plugs on both battery and charger with T-style Deans plugs so they’re compatible. You’ll need to be fairly comfortable with soldering for this part.</p>
<p class="indent">First, let’s label the Deans plugs so we don’t mix up the power and the ground. Deans plugs have two terminals, shaped like a T. The horizontal terminal (the top of the T) is usually for the power (red) wire, and the vertical terminal is for the ground (black) wire. Label the Deans plug with a <strong>+</strong> for the horizontal and <strong>–</strong> for the vertical, as shown in <a href="ch10.xhtml#ch10fig2">Figure 10-2</a>.</p>
<div class="image"><span epub:type="pagebreak" id="page_187"/><a id="ch10fig2"/><img src="../images/f0187-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-2:</strong> Labeled Deans plugs, male (left) and female (right)</p>
<div class="note">
<p class="notet"><strong>WARNING</strong></p>
<p class="notep"><em>Don’t let the power and ground wires touch or come in contact with the same piece of metal. This will cause a short in the wiring, which can prevent your project from working or break a component. Work with one wire at a time and cover the other with electrical tape.</em></p>
</div>
<p class="indent">Assuming your battery doesn’t come with a Deans plug connector, you’ll need to replace its plug with a Deans plug. Again, it’s safest to do this one wire at a time, and put electrical tape around the wire you’re not dealing with.</p>
<ol>
<li class="noindent"><p class="list"><strong>Tin the power and ground wires.</strong> Clip each wire as close to the plug connector on the battery as possible, strip a section off the end roughly the same length as the plug terminal, twist it so it’s not fraying, and add solder to the length of the exposed wire all around (if you need advice on soldering, see the appendix). This process, shown in <a href="ch10.xhtml#ch10fig3">Figure 10-3</a>, is called <em>tinning</em> the wires.</p>
<div class="image"><a id="ch10fig3"/><img src="../images/f0187-02.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-3:</strong> Twisting the wire, then adding solder to it to make it easier to work with</p></li>
<li class="noindent"><p class="list"><strong>Prepare the female Deans plug.</strong> Take the female plug (the one with exposed terminals coming from only one side), and fit some heat-shrink tubing over both the wire and the plug’s terminal, as shown in <a href="ch10.xhtml#ch10fig4">Figure 10-4</a>. Set the tubing aside for now; don’t slide it over the terminal yet. We’ll shrink it after attaching the wire to the plug.</p>
<p class="indent">If you don’t have heat-shrink tubing, you can wrap exposed wire in electrical tape. Heat-shrink tubing looks a bit more polished, but electrical tape can be removed and reapplied more easily.</p>
<div class="image"><a id="ch10fig4"/><img src="../images/f0187-03.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-4:</strong> Fitting heat-shrink tubing (right) on the terminal of the female Deans plug (left)—we’ll shrink this in a bit</p></li>
<li class="noindent"><p class="list"><span epub:type="pagebreak" id="page_188"/><strong>Solder the female Deans plug.</strong> Use a pair of helping hands or a vise to hold the female Deans plug. There is a dent on one side of the terminals from the plug. Heat up one of the terminals of the Deans plug and melt a small pool of solder on the dented side (see <a href="ch10.xhtml#ch10fig5">Figure 10-5</a>). Be sure to not touch the plastic with the tip of your soldering iron, though! Add solder to the dents on both terminals.</p>
<div class="image"><a id="ch10fig5"/><img src="../images/f0188-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-5:</strong> Melt a pool of solder onto the Deans plug to hold the wire.</p></li>
<li class="noindent"><p class="list"><strong>Solder the power wire.</strong> Take the red wire coming out of the battery. Cut two half-inch pieces of the heat-shrink tubing you set aside earlier and slide one piece onto the exposed section of the wire. Push it as far away from the part you’ll be soldering as you can, as shown in <a href="ch10.xhtml#ch10fig6">Figure 10-6</a>—the heat from the soldering iron could start shrinking it before we’re ready!</p>
<div class="image"><a id="ch10fig6"/><img src="../images/f0188-02.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-6:</strong> The heat-shrink tubing on the wire. We will slide it over the Deans plug terminal and shrink it after attaching the wire to the Deans plug.</p>
<p class="indent">All the exposed bits of wire must be covered when we’re finished, so make sure the exposed bit of wire is no longer than the terminal—it’s better to be too short than too long. Remelt the solder pool on the female Deans plug’s positive terminal and push the tinned end of the red battery wire into it until it’s covered in solder (<a href="ch10.xhtml#ch10fig7">Figure 10-7</a>). Remove the iron and hold the wire in place until it hardens, but don’t touch it until it’s cool.</p>
<div class="image"><span epub:type="pagebreak" id="page_189"/><a id="ch10fig7"/><img src="../images/f0189-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-7:</strong> The wire will get hot during this step, so use pliers to hold it close to the Deans plug as you melt the solder and attach the wire.</p></li>
<li class="noindent"><p class="list"><strong>Solder the ground wire.</strong> Once the joint is cool, repeat this process on the negative terminal with the black battery wire—don’t forget to slide heat-shrink tubing onto the wire before connecting it to the Deans plug! We’ll shrink the tubes in a moment.</p></li>
<li class="noindent"><p class="list"><strong>Insulate the wires.</strong> Once both wires are cool to the touch, move the heat-shrink tubing down to cover both the metal terminal and the attached exposed wire. If you don’t have heat-shrink tubing that fits, you can cover the components with electrical tape. If you need to try again, you’ll need to undo the soldering, put new heat-shrink on, and resolder.</p>
<p class="indent">If you have a heat gun, use that to heat up and shrink the heat-shrink tubing. Otherwise, you can hold a lighter near the tubing to heat it, but be sure not to expose the tubing to a direct flame. Twist the red and black wires to add support to the setup, as shown in <a href="ch10.xhtml#ch10fig8">Figure 10-8</a>.</p>
<div class="image"><a id="ch10fig8"/><img src="../images/f0189-02.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-8:</strong> The Deans plug with wires</p></li>
</ol>
<p class="indent"><span epub:type="pagebreak" id="page_190"/>With that, you’re done! You’ve added a different connector onto a battery! <a href="ch10.xhtml#ch10fig8">Figure 10-8</a> shows how it should look.</p>
<p class="indent">If your charger doesn’t currently have a Deans plug, you’ll have to repeat this process for the charger but with a male Deans plug for connecting your female battery plug. Make sure to disconnect the charger from power when you put the plug on to avoid any exposed live wires.</p>
<h4 class="h4" id="lev130"><strong>Attaching a Voltage Regulator</strong></h4>
<p class="noindent">It’s likely that your battery will provide more than 5 V, so we need to reduce that to the 5 V the Photon needs to prevent it from overpowering. Voltage regulators, as seen in <a href="ch10.xhtml#ch10fig9">Figure 10-9</a>, can step down voltage to the level you need. We’ll use an adjustable voltage regulator because they’re the easiest to find.</p>
<p class="indent">The term <em>voltage regulator</em> is pretty intimidating, and the board looks intimidating too, but don’t worry! Once you’ve set it up, it’ll do its thing and you’ll never have to touch it again.</p>
<ol>
<li class="noindent"><p class="list"><strong>Buy a voltage regulator.</strong> There are a couple of important things to note when you’re voltage regulator shopping. First, buy a <em>switching</em> voltage regulator that looks similar to the one in <a href="ch10.xhtml#ch10fig9">Figure 10-9</a>. Second, make sure to buy a regulator with two blue boxes, not one—this lets you adjust both current and voltage.</p>
<p class="indent">Most voltage regulators return either 3 A or 5 A. Either is fine for displaying text only (if you remember from the section on batteries, our draw was 0.5–0.7 A), but if you end up changing the program so most of the LEDs are on, you’ll need to be sure that you keep the draw under the maximum the regulator allows.</p>
<div class="image"><a id="ch10fig9"/><img src="../images/f0190-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-9:</strong> The voltage regulator from the top</p></li>
<li class="noindent"><p class="list"><strong>Connect the plug.</strong> There are only four parts on this board you need to care about—the two plastic boxes with screws at the top of <a href="ch10.xhtml#ch10fig9">Figure 10-9</a>, and the IN and OUT boxes on either side.</p>
<p class="indent"><span epub:type="pagebreak" id="page_191"/>You’ll need four pieces of wire—two black and two red. One set will connect the battery and the voltage regulator, while the other will connect the voltage regulator to the rest of the electronics.</p>
<div class="note">
<p class="notet"><strong>NOTE</strong></p>
<p class="notep"><em>The big copper-wrapped wheel is the inductor coil, and it can be awfully loose and wobbly. If yours is loose, run hot glue on either side of it to hold it in place. Hot glue doesn’t conduct electricity, so it won’t interfere with anything on the board.</em></p>
</div>
<p class="indent">Take one red wire and one black wire and twist them together to make them more manageable, then do the same with the other pair. Strip a quarter-inch or so off all eight ends. Following the same process as we did for the battery, connect one pair of black and red wires to a male Deans plug. The male plugs have metal terminals sticking out of both sides; solder one side onto the side with the smaller metal piece. The female plug you attached to the battery will plug into this, and it will be the incoming side of the voltage regulator.</p></li>
<li class="noindent"><p class="list"><strong>Check the voltage of the battery.</strong> Get out your multimeter, then take the male Deans plug you just wired to the red and black wires and plug it into the battery’s female Deans plug. Be very careful that the two exposed wires on the other end of the voltage regulator never touch each other!</p>
<p class="indent">Set your multimeter to measure DC voltage. Touch the red probe to the red wire and the black probe to the black wire and check the reading on your multimeter (see <a href="ch10.xhtml#ch10fig10">Figure 10-10</a>).</p>
<div class="image"><a id="ch10fig10"/><img src="../images/f0191-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-10:</strong> Measuring the voltage of the battery, and testing the connections of the wires to the Deans plug</p>
<p class="indent">If you aren’t getting any reading, try the following:</p>
<ul class="bullet5">
<li class="noindent">Check that your multimeter probes are plugged into the voltage and ground terminals of the multimeter.</li>
<li class="noindent"><span epub:type="pagebreak" id="page_192"/>Confirm that your multimeter is set to measure DC voltage.</li>
<li class="noindent">Make sure your wires are plugged in to the battery.</li>
<li class="noindent">See if you can get a reading from a regular battery, like a AA, by connecting the red probe to the positive end and the black to the negative end, to confirm that your multimeter is working.</li>
<li class="noindent">Test the battery more directly: hold the battery’s female Deans plug in your helping hands, then put the probes inside the two terminals (with red to positive and black to negative) and see if you get a reading out of that. If not, try pinching the wire where it was soldered to the terminal and see if you get any kind of numbers then—it may be that the solder connection was not firm enough.</li>
<li class="noindent">Try pinching the wire where it’s connected to the male Deans plug and see if you get a reading then.</li>
<li class="noindent">If you still can’t get a reading, ask someone to look over your work! Just be sure not to carry this setup around while the battery is plugged in.</li>
</ul>
<p class="indent">Once things are working, unplug the battery, set it aside, and grab the voltage regulator.</p></li>
<li class="noindent"><p class="list"><strong>Wire up the voltage regulator.</strong> You’ll need a Phillips-head screwdriver small enough to fit the screw at the top of the terminals on the IN side, labeled in <a href="ch10.xhtml#ch10fig9">Figure 10-9</a>. We’ll attach the red wire to IN+ and the black wire to IN–.</p>
<p class="indent">Unscrew the screws until the top is flush with the case around it, and place the black wire from your male Deans plug inside IN– to test that it fits (see <a href="ch10.xhtml#ch10fig11">Figure 10-11</a>). If you can see any exposed wire coming out of the terminal, trim some back—you don’t want any bare wire showing, but you want as much wire inside as will fit.</p>
<p class="indent">Once the wire fits, tighten the screw to hold it in place, as shown in <a href="ch10.xhtml#ch10fig11">Figure 10-11</a>. Repeat this for the red wire in IN+, and then tug on both wires slightly to make sure they won’t fall out. You can twist the wires back again to make sure they are close together; just make sure no exposed wire is showing or touching.</p>
<div class="image"><span epub:type="pagebreak" id="page_193"/><a id="ch10fig11"/><img src="../images/f0193-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-11:</strong> Screwing in the red wire after it was cut to fit so there was no metal showing</p>
<p class="indent">Take the other set of black and red wires not yet attached to anything and do the same for those in the OUT terminals. Remember that red goes to OUT+ and black goes to OUT–. <a href="ch10.xhtml#ch10fig12">Figure 10-12</a> shows how it should look.</p>
<div class="image"><a id="ch10fig12"/><img src="../images/f0193-02.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-12:</strong> Your voltage regulator so far—male Deans plug attached to the IN side and exposed wires attached to the OUT side</p></li>
<li class="noindent"><p class="list"><strong>Adjust the voltage to 5 V.</strong> To adjust the voltage, we turn the screws on the OUT side of the regulator. The left screw adjusts the output voltage, and the right adjusts the maximum output current. On some boards the screw terminals will be labeled CV for volt adjustment and CC for current adjustment (shown in <a href="ch10.xhtml#ch10fig13">Figure 10-13</a>). You might want to label them V for volts and A for amps to avoid mixing them up.</p>
<div class="image"><span epub:type="pagebreak" id="page_194"/><a id="ch10fig13"/><img src="../images/f0194-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-13:</strong> CV (left) is for adjusting volts, and CC (right) is for adjusting amps, or current.</p>
<p class="indent">Get your multimeter back out, and attach one end of an alligator clip to each of the exposed wires and the other end to each multimeter probe for both positive and negative, shown in <a href="ch10.xhtml#ch10fig14">Figure 10-14</a>. Again, be very careful to not let red and black touch each other. If you aren’t getting any reading at this point, check the voltage regulator connections on both ends.</p>
<div class="image"><a id="ch10fig14"/><img src="../images/f0194-02.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-14:</strong> Use alligator clips to connect the end of each wire and the multimeter probe so your hands are free to adjust the voltage regulator.</p>
<p class="indent">Some voltage regulators have a small light, and if it’s lit, it’s getting power but not sending it back out. If it’s not lit, it’s not even getting power, so you should check the battery connection. Be sure you unplug the battery between adjusting wires, though—you don’t want to accidentally have ground and power touch somewhere.</p>
<p class="indent"><span epub:type="pagebreak" id="page_195"/>Once your multimeter is reading, turn the voltage adjustment screw counterclockwise until the voltage change registers on the multimeter. Continue turning the screw until the multi-meter reads 5 V, erring to be a little under 5 V rather than over. If counterclockwise doesn’t adjust the voltage in the direction you need, try turning it clockwise and note which direction makes the voltage increase and decrease.</p>
<div class="note">
<p class="notet"><strong>NOTE</strong></p>
<p class="notep"><em>This part can be frustrating. The two screw boxes look exactly the same, and it may take a while to get feedback from the voltage change on the multimeter. It can take a lot of twisting, but the adjustment will register eventually, and then you’ll be able to use any battery and have wearable LEDs to party in. Hang in there.</em></p>
</div></li>
<li class="noindent"><p class="list"><strong>Adjust the current.</strong> Current is measured differently than voltage: voltage needs to be pretty precise, as components like the Photon or the LED array won’t work if the voltage gets too far away from 5 V. Current can be set as high as you want, and components will draw what they need. We’ll set the current to the max.</p>
<p class="indent">Remember which direction turns the voltage up, and turn the current screw in the same direction. You’ll hear a click with every turn when it is maxed out. The good news here is if your current is too low, everything will just shut off without being damaged, and if the current is too high, your parts will draw only what they need. Note which direction you turned this screw for future debugging.</p></li>
<li class="noindent"><p class="list"><strong>Split the line.</strong> Our LED array takes a lot more power than the Photon can output, so we’ll split the line from the voltage regulator so that one set of power/ground wires will power the Photon and one set will power the LED array. We’ll accomplish this by forking the wire coming out of the voltage regulator, so the red and black pair becomes two red and black pairs.</p>
<p class="indent">Cut a new piece each of black and red wire, about two feet long. Fold the red wire in half, and strip a small section of wire at the fold. Wrap the exposed metal middle together with the exposed end of the red wire from the voltage regulator and add some solder so they’re attached. However you can get those two wires to stay together will work. When you’re done, shrink some heat-shrink tubing over that section.</p>
<p class="indent">Repeat this for the black wire. These steps are shown in <a href="ch10.xhtml#ch10fig15">Figure 10-15</a>.</p>
<div class="image"><span epub:type="pagebreak" id="page_196"/><a id="ch10fig15"/><img src="../images/f0196-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-15:</strong> Wrap the exposed end of the red wire around the exposed middle of a longer red wire, solder, and heat-shrink.</p></li>
<li class="noindent"><p class="list"><strong>Create two pairs of wires.</strong> Pair up a red and black wire coming out of the fork by twisting them together so you have two pairs, and use more heat-shrink tubing to hold them together at the fork, as in <a href="ch10.xhtml#ch10fig15">Figure 10-15</a>. Remember to never let exposed black and red wires touch when the battery is plugged in!</p></li>
</ol>
<p class="indent">With that, we’re done with the power part of this project! <a href="ch10.xhtml#ch10fig16">Figure 10-16</a> shows a diagram of the project so far. You now can plug in a battery and, once we attach it to the board and LED array, you’ll be able to power both components and run them completely wirelessly.</p>
<div class="image"><a id="ch10fig16"/><img src="../images/f0196-02.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-16:</strong> A diagram of the components so far</p>
<h4 class="h4" id="lev131"><strong>Connecting the Particle Photon Board</strong></h4>
<p class="noindent">This section will just cover the wiring for the Photon; you’ll hook the Photon up to your phone as a wireless hotspot and program it in “<a href="ch10.xhtml#lev133">Code It</a>” on <a href="ch10.xhtml#page_200">page 200</a>. If you want to get a feel for the Photon before you start semipermanently soldering wires to it, feel free to head there or look at other example projects using the board first. We’ll be using just three pins on the Photon—VIN, GND, and D3.</p>
<p class="indent">Some Photon boards will come with headers, and some won’t—<a href="ch10.xhtml#ch10fig17">Figure 10-17</a> shows the difference in how they’ll look.</p>
<div class="image"><span epub:type="pagebreak" id="page_197"/><a id="ch10fig17"/><img src="../images/f0197-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-17:</strong> A Photon without headers (left) and with headers (right)</p>
<p class="indent">Headers allow you to connect the Photon on a more temporary basis by plugging and unplugging it from a breadboard rather than soldering wires. But headers also add more bulk, and it’s easier for components to unplug from a breadboard if they get tugged the wrong way.</p>
<p class="indent">Without headers, you will solder wire directly to the board. This is more permanent—you can remove the wire by heating up the solder connection again, but that risks damaging the board.</p>
<p class="indent">If you want to experiment and are worried about getting things wrong, I recommend using headers and a breadboard, especially if you might want to use the Photon for other things.</p>
<p class="indent">If you want to make this project permanent, I’d recommend soldering directly to the board at some point, even if you start with the breadboard. The following instructions assume you’re soldering wires directly to the Photon.</p>
<ol>
<li class="noindent"><p class="list"><strong>Solder the wires.</strong> Take one pair of the forked red and black wires from the voltage regulator and connect them to the Photon, with the red wire to VIN and the black wire to GND, and then solder them in place, as shown in <a href="ch10.xhtml#ch10fig18">Figure 10-18</a>. Make sure the solder joints from the VIN and GND do <em>not</em> touch each other or anything else on the board. Clip any extra wire you have poking up through the board so there’s nothing to snag.</p>
<div class="image"><a id="ch10fig18"/><img src="../images/f0197-02.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-18:</strong> Soldering the wires directly to the board</p></li>
<li class="noindent"><p class="list"><span epub:type="pagebreak" id="page_198"/><strong>Test the plug.</strong> Double-check that the other pair of wires from the voltage regulator is protected (if you stripped the ends, make sure they aren’t touching), then plug in your battery. You should see your Photon spring to life! If you’re nervous about this step, try plugging the battery in for just a second and make sure you don’t see any smoke or sparks. If you <em>do</em> see smoke or sparks, somewhere your VIN/red line is touching your GND/black line. Double-check your soldering to make sure everything is connected up correctly and the solder is where it’s supposed to be and nowhere else.</p></li>
</ol>
<h4 class="h4" id="lev132"><strong>Wiring the LED Array</strong></h4>
<p class="noindent">We’ll finish up by soldering the second pair of forked wires to the LED array. The LED array will need three lines: power, ground, and the data line from a digital pin (D3).</p>
<p class="indent">There are many different brands of LED arrays out there, and the connections may be labeled differently. You’ll want to look either for arrows pointing toward or away from the board, or the words IN and OUT, to indicate which side the data line should go on.</p>
<p class="indent">There should be three terminals labeled + or 5V, – or GND, and DI (or DIN), as shown in <a href="ch10.xhtml#ch10fig19">Figure 10-19</a>. If they’re not labeled, look at the wires that come attached: red is usually +, black is –, and data is some other color. We’ll be removing the wires, so label the board itself if you need to.</p>
<ol>
<li class="noindent"><p class="list"><strong>Remove the wires the board comes with.</strong> The wires are just soldered on the surface, so put your hot soldering iron on the terminal and lightly pull the wire until the solder melts enough for the wire to come off. Remember not to get solder anywhere but the terminal, and don’t touch any other part of the board with your soldering iron.</p></li>
<li class="noindent"><p class="list"><strong>Connect your power wires.</strong> Next, take the remaining pair of forked red and black wires and connect them to a set of power + and – terminals on the LED array (they may also be labeled 5V and GND). Add a bit of solder to each pad first, then strip a small section of wire, cut it to fit the pad, heat up the solder on the pad, and put the stripped wire under the solder. This step is shown in <a href="ch10.xhtml#ch10fig19">Figure 10-19</a>.</p>
<div class="image"><span epub:type="pagebreak" id="page_199"/><a id="ch10fig19"/><img src="../images/f0199-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-19:</strong> Add more solder to the terminals. Make sure the exposed bit of wire is about the same length as the pad, then melt the solder on the terminal to attach the wire to the LED array.</p></li>
<li class="noindent"><p class="list"><strong>Connect the data line.</strong> Take a wire that’s not red or black and connect it from the DIN terminal of the LED array to D3 (or any other D pin) of the Photon, as shown in <a href="ch10.xhtml#ch10fig20">Figure 10-20</a>. Wire length matters here—the shorter the wire between the Photon and the LED, the less chance of interference, which can mess up the LED display. Solder this connection in the same way as the power connections.</p>
<div class="image"><a id="ch10fig20"/><img src="../images/f0199-02.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-20:</strong> Solder the DIN connection.</p>
<p class="indent">Test the wiring now by plugging in the battery. You should see the Photon’s light turn on. The LEDs won’t light up yet because there’s no program telling them to. You’ll plug the battery in to turn the device on and off from now on.</p></li>
</ol>
<p class="indent">If your Photon’s light does not turn on, check the wiring coming out of the battery and into the Photon. Somewhere a wire is probably broken, meaning the Photon is not receiving power. Use the <span epub:type="pagebreak" id="page_200"/>multimeter to see the voltage level at different places to diagnose where the break occurs. Also check that your red and black wires are not reversed.</p>
<p class="indent">If it still isn’t working, you may have accidentally turned the current adjustment screw all the way down instead of up. Try turning the current screw all the way in the opposite direction and see if that helps.</p>
<p class="indent">Once the Photon powers up, you can put your soldering iron away, because except for adjustments you might make after you’ve sewn your sash, you’re done with the physical hardware part of this project! Next up we’ll be uploading some scrolling text code, testing it, and then assembling the garment for the electronics to go inside!</p>
<h3 class="h3" id="lev133"><strong>CODE IT</strong></h3>
<p class="noindent">Our end goal with the coding is to be able to text a message to a number and have that message display on the sash. To get this to work, we need code running in two places: on the Photon, and on a server that will wait to receive a message and then send it to your sash. We’ll focus on the code running on the Photon first.</p>
<p class="indent">You can download the full code for this project from <em><a href="https://nostarch.com/LEDHandbook/">https://nostarch.com/LEDHandbook/</a></em>. I’m going to give an overview of aspects of this code, but I’ve also added comments in the code itself to document how it works.</p>
<h4 class="h4" id="lev134"><strong>Connecting the Photon to Wi-Fi</strong></h4>
<p class="noindent">First, you’ll need to get your Photon hooked up to Wi-Fi. Use the documentation from the Photon site at <em><a href="https://docs.particle.io/guide/getting-started/intro/photon/">https://docs.particle.io/guide/getting-started/intro/photon/</a></em> to see how to get started. Note that the documentation may be updated between this writing and your reading, so it may look a little different but should be easy to follow.</p>
<p class="indent">This step is optional and can be reconfigured later, so if you just want your Photon to connect to the internet right away, connect it to a traditional Wi-Fi network and skip this part. Once your Photon is connected, you should rarely have problems.</p>
<p class="indent">You’ll need to download the Particle app to connect your Photon to a Wi-Fi network.</p>
<ol>
<li class="noindent"><p class="list"><strong>Download the app.</strong> Go to your app provider and search for Particle. The tile for the app looks like <a href="ch10.xhtml#ch10fig21">Figure 10-21</a>. Download and install the Particle app and create your own account.</p>
<div class="image"><span epub:type="pagebreak" id="page_201"/><a id="ch10fig21"/><img src="../images/f0201-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-21:</strong> The Particle app tile</p>
<p class="indent">You should be taken to the Your Devices screen. Click the <strong>+</strong> in the corner and choose <strong>Set up a Photon</strong>. You should now be able to connect to your Photon.</p></li>
<li class="noindent"><p class="list"><strong>(Recommended) Connect your Photon to your phone’s hotspot.</strong> I recommend turning on your phone’s Wi-Fi hotspot ability and connecting your Photon to that. This can be tricky, but it allows you to be fully mobile and not have to rely on hooking up your Photon to multiple Wi-Fi networks.</p>
<p class="indent">To connect your Photon to your phone, note your phone’s network name and password, then click <strong>Connect to Wi-Fi network</strong> and select <strong>My network is not listed</strong>. Enter your Wi-Fi name and password, as shown in <a href="ch10.xhtml#ch10fig22">Figure 10-22</a>.</p>
<p class="indent">When the app shows a spinning indicator and says it’s looking for the Wi-Fi network, go back to Settings and turn your phone’s hotspot on. The Photon will connect to the internet, and from that point forward it will connect to your phone’s hotspot as long as the hotspot ability is on.</p></li>
</ol>
<div class="image"><a id="ch10fig22"/><img src="../images/f0201-02.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-22:</strong> Photon screens for connecting to your phone’s Wi-Fi hotspot</p>
<h4 class="h4" id="lev135"><strong>Coding the Photon</strong></h4>
<p class="noindent">Once your Photon is connected, head over to <em><a href="https://build.particle.io/build">https://build.particle.io/build</a></em>. This is where you’ll upload your code to your Photon. You’ll set up an account, and then you’ll be taken to an editor where you can send messages to your sash!</p>
<h5 class="h5" id="lev136"><span epub:type="pagebreak" id="page_202"/><strong>Adding the LED Library</strong></h5>
<p class="noindent">The code for your Photon is available to download at <em><a href="https://nostarch.com/LEDHandbook/">https://nostarch.com/LEDHandbook/</a></em> in the file <em>textsash1.ino</em>, but you’ll first need tell Particle to use the library for controlling the LEDs.</p>
<p class="indent">In the editor, hit the button to create a new app. Give your app a recognizable name, like TextSashPhoton. Hit the save button (folder icon) on the left side.</p>
<p class="indent">The Libraries icon looks like a bookmark on the left side of the screen; click this and scroll to the list of Community Libraries. You’ll likely see the NeoPixel library at the top of the list (<a href="ch10.xhtml#ch10fig23">Figure 10-23</a>).</p>
<div class="image"><a id="ch10fig23"/><img src="../images/f0202-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-23:</strong> The Libraries icon and the Community Libraries section</p>
<p class="indent">Click the NeoPixel library and you should see some code come up. Ignore this for now and look for the Include In App button, as shown in <a href="ch10.xhtml#ch10fig24">Figure 10-24</a>. Click it and select your recently made app by its name (if it’s not there, you might have forgotten to hit save after entering a name).</p>
<div class="image"><a id="ch10fig24"/><img src="../images/f0202-02.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-24:</strong> Including the NeoPixel library</p>
<p class="indent">You should see an Included Libraries section in the gray bar to the left with NeoPixel listed, as well as an <code>#include</code> line at the top <span epub:type="pagebreak" id="page_203"/>of your file specifying the <code>neopixel</code> library. Now you’re ready to add more code!</p>
<h5 class="h5" id="lev137"><strong>Testing the Photon</strong></h5>
<p class="noindent">Before we add the code that will let us send messages to the array, let’s write some code to test that all the wires are hooked up right and everything is working as planned.</p>
<ol>
<li class="noindent">From the code files downloaded from <em><a href="https://nostarch.com/LEDHandbook/">https://nostarch.com/LEDHandbook/</a></em> open the file <em>testArray.ino</em> and copy it onto the main part of the screen. Be sure the line that includes <code>#include</code> is there.</li>
<li class="noindent"><p class="list">Now make sure the Photon app knows which device it’s uploading code to. Click the Devices icon, which looks like a scope or crosshairs (see <a href="ch10.xhtml#ch10fig25">Figure 10-25</a>). You should see your newly paired Photon on the list. Give it a name and then click the name. A star should show to the left of the name—when you upload code now, known as <em>flashing</em> code, it’ll go to that device.</p>
<div class="image"><a id="ch10fig25"/><img src="../images/f0203-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-25:</strong> The Devices icon</p></li>
<li class="noindent"><p class="list">Make sure your Photon is powered and connected to the internet—the LED on the Photon should be blinking cyan if it is—and click the flash button (which looks like a lightning bolt) on the top of the left bar. You should see the Photon blink magenta. If this is your first time uploading code, it might go through some different colors while it makes sure the firmware is up to date and resets. When it’s all done, one LED in the corner of the array should light red.</p></li>
</ol>
<p class="indent">If the light didn’t come on, do some more troubleshooting.</p>
<h5 class="h5" id="lev138"><strong>Coding Text to Your LED Display</strong></h5>
<p class="noindent">Once you have the Photon working, paste the code from <em>shortstr_textsash.ino</em> from the book’s resources into the Photon editor. I’ve fully documented every function and any confusing bits within the code itself, so feel free to peruse it. Just scroll down past the code at the top that encodes the characters.</p>
<p class="indent">Flash that code by pressing the lightning button, and you should see <code>Hello World!</code> display across your LED array. That’s cool, but now let’s make it say exactly what we want!</p>
<p class="indent"><span epub:type="pagebreak" id="page_204"/>Please note there is one limitation for now: you can only send the sash 63 characters at a time. Sending more doesn’t return an obvious error; it just doesn’t work. I’ll show you how to get around this later.</p>
<p class="indent">To send a message to your LEDs, you’ll need two things: your Photon’s device ID and your access token. To find the device ID, click the Devices icon on the sidebar of the editor, then hit the arrow to the right of the device name. This will drop down the device ID in a textbox. Copy this ID to a text file for now.</p>
<p class="indent">To find the access token, click <strong>Settings</strong> on the bottom left and you’ll find the code in a box there. Copy this to a text file too.</p>
<p class="indent">We will use these two identifiers to send data to the sash. Just like how your computer gets and sends data from the internet, connecting your Photon to the internet allows you to send data to your specific device to execute code. We’ll use <em>Postman</em>, an app for Chrome. You can download it and find out more at <em><a href="http://www.getpostman.com/">http://www.getpostman.com/</a></em>.</p>
<div class="note">
<p class="notet"><strong>NOTE</strong></p>
<p class="notep"><em>If you have a program of choice to send REST calls, feel free to use it.</em></p>
</div>
<p class="indent">Download the Chrome app and open Postman. Now we’ll set up a call that will send text to your sash.</p>
<ol>
<li class="noindent">Select <strong>POST</strong> from the drop-down menu shown in <a href="ch10.xhtml#ch10fig26">Figure 10-26</a>, and enter <a href="https://api.particle.io/v1/devices/deviceID/buildString"><span class="codestrong">https://api.particle.io/v1/devices/</span><span class="codestrongitalic">deviceID</span><span class="codestrong">/buildString</span></a> for the URL, with your device ID replacing <em>deviceID</em>.</li>
<li class="noindent"><p class="list">Click the Body tab from the menu beneath the URL box, shown in <a href="ch10.xhtml#ch10fig26">Figure 10-26</a>, and select the <strong>x-www-form-urlencoded</strong> radio button. Enter <span class="codestrong">access_token</span> as the key and enter the access token you copied from your Photon account as the value. Then, on a new line, enter <span class="codestrong">args</span> as the key and type in the text you want to display on the LED array as the value. <a href="ch10.xhtml#ch10fig26">Figure 10-26</a> shows what this looks like with all the parameters set up correctly. Remember that the message is limited to 63 characters for now.</p>
<div class="image"><a id="ch10fig26"/><img src="../images/f0204-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-26:</strong> How the call to Photon should be set up on Postman</p></li>
</ol>
<p class="indent">When you’re done, save your post and hit the big blue <strong>Send</strong> button. You should see your LED array display your text!</p>
<p class="indent"><span epub:type="pagebreak" id="page_205"/>If you don’t see anything turn on at this point and everything prior to this has worked, it might be that your voltage regulator’s current regulator is set too low. Turn back to “<a href="ch10.xhtml#lev130">Attaching a Voltage Regulator</a>” on <a href="ch10.xhtml#page_190">page 190</a> for a refresher on setting the current on voltage regulators and make the adjustment.</p>
<h5 class="h5" id="lev139"><strong>Upping the Character Limit</strong></h5>
<p class="noindent">Now you have an LED array you can communicate with, but you’ll want to send more than 63 characters. Go back to your Particle editor and swap out the program you’ve been using with the file <em>longstr-textsash.ino</em>. This will let you make longer strings, but it’s a bit more complicated than that.</p>
<p class="indent">Instead of sending one message like you did before, you’ll send several after each other, and the Photon will store and merge them together until you tell it that you’re done and then display the messages.</p>
<p class="indent">In a text editor, type what you want to display, but break it up into 60-character chunks. Then, instead of sending one message, send each line as a separate message by pasting it into the <code>args</code> value in Postman. Your first line must be <code>1,BEGIN</code> and your final line will be <code>1,END</code> to signal the end of your message. Each line of text needs to begin with <code>0,</code> and then a space. For example, for the message “This is a really long string that goes on and on and on and I just can’t stop myself from typing so much. It’s so much fun!” you would send five args via Postman.</p>
<p class="indent">The first message tells the sash that it’s going to start getting text. The <code>1,END</code> command tells the sash that you’re done sending text and it can display what it’s been merging together.</p>
<pre>1,BEGIN<br/>0, This is a really long string that goes on and on and on and<br/>0, I just can’t stop myself from typing so much. It's so much<br/>0, fun!<br/>1,END</pre>
<p class="indent">This might seem a pain to do manually, but don’t worry—you’re not going to use manually sent messages as a long-term plan anyway.</p>
<h4 class="h4" id="lev140"><strong>Coding the Server to Send Messages Through Texts</strong></h4>
<p class="noindent">If you don’t mind sending messages to your sash this way, you can stop here. Otherwise, this section will show you how to set up a service that will let you text messages to your sash. This requires a Twilio account, which is free. Twilio will give you a unique number to <span epub:type="pagebreak" id="page_206"/>send messages to your sash from—if you send them from your own number, you’ll end up displaying every text you send! If you get lost at all in this section, you can visit my GitHub repo for directions on where to save information in various files here in the server folder: <em><a href="https://github.com/gelicia/textSashChapter">https://github.com/gelicia/textSashChapter</a></em>.</p>
<h5 class="h5" id="lev141"><strong>Installing node and npm</strong></h5>
<p class="noindent">This code will be written in JavaScript, and you’ll need to install node and npm. The process might be different depending on what operating system you’re using, so follow the instructions at <em><a href="https://docs.npmjs.com/getting-started/installing-node">https://docs.npmjs.com/getting-started/installing-node</a></em> to install node and npm for your OS of choice.</p>
<div class="note">
<p class="notet"><strong>NOTE</strong></p>
<p class="notep"><em>You’ll need to be running the command terminal as administrator here.</em></p>
</div>
<ol>
<li class="noindent"><p class="list">Once npm is installed, open up a terminal (use the Terminal application in macOS or search <span class="codestrong">cmd</span> from Start in Windows and click Command Prompt).</p></li>
<li class="noindent"><p class="list">Find where node is stored on your computer and navigate to the server folder in the terminal using the <code>cd</code> command; for example:</p>
<pre>$ <span class="codestrong">cd User/Program Files/nodejs/node_modules/npm</span></pre></li>
<li class="noindent"><p class="list">Run <span class="codestrong">npm install</span> from that folder in the terminal and you should see some text like <code>q@</code>, <code>restler@</code>, and <code>nedb@</code> show up. This is npm installing downloads from the libraries we’ll use in our server program, like the <code>neopixel</code> library. You’ll also see that the server folder now includes a folder called <em>node_modules</em>.</p>
<p class="indent">Inside this <em>node_modules</em> folder are some <em>.js</em> files. You’ll need to alter some permissions here using the device ID and access token from Photon you found earlier.</p></li>
<li class="noindent"><p class="list">First rename <em>particleConfigTEMP.js</em> and <em>twilioConfigTEMP.js</em> to <span class="codestrong">particleConfig.js</span> and <span class="codestrong">twilioConfig.js</span> (i.e., remove <em>TEMP</em> from both). The <em>particleConfig.js</em> file is easier—you already have the device ID and access token from what you did via Postman.</p></li>
</ol>
<h5 class="h5" id="lev142"><strong>Setting Up a Unique Number with Twilio</strong></h5>
<p class="noindent">The changes you need to make to the <em>twilioConfig.js</em> file will require a Twilio account.</p>
<ol>
<li class="noindent"><p class="list">Sign up for a Twilio account at <em><a href="https://www.twilio.com/">https://www.twilio.com/</a></em>, making sure to select that you’ll be using SMS (the rest of the questions <span epub:type="pagebreak" id="page_207"/>don’t matter, so you can leave them blank). You’ll have to provide a valid cell number to receive a confirmation code, and you’ll use that to complete the signup.</p></li>
<li class="noindent"><p class="list">When you log in, you should see a Get Started button; click that and then click <strong>Get a number</strong>. You should be offered a number to use; click <strong>Choose this number</strong>. Note this number for later. You’ll send messages from this number to display on the sash. If you can’t find it, scroll down to Phone Numbers from the dashboard and click it.</p></li>
<li class="noindent"><p class="list">You should see your number listed. Write down your number, then click the home button. You should see your account SID and Auth Token on the page. Put those into the <em>twilioConfig.js</em> file you renamed at the beginning of this section—remember you can see the files in my GitHub repo if you need more guidance.</p></li>
<li class="noindent"><p class="list">Plug your LED array into power and then in your terminal, run <span class="codestrong">node bot.js</span>. Now, from your phone, text a message you want to display to your Twilio number.</p>
<p class="indent">You should see the message queue up in the terminal, and then it should show up on the LED array. If something doesn’t work, check what error messages you get in your console and confirm that you set up your permissions IDs correctly.</p></li>
</ol>
<p class="indent">Now you have a simple way to interact with your LEDs! You can either keep your number to yourself and text new messages, or give it to some trusted friends to text as well.</p>
<div class="sidebar">
<p class="sidebart"><strong>GOING FURTHER WITH THE SERVER</strong></p>
<p class="spara">The final step in this section would be to put this program somewhere it won’t turn off when your computer shuts down. This is beyond the scope of this book, but if you have the know-how or a friend who does, I recommend using DigitalOcean (they have excellent help for beginners) and the npm library <code>forever</code> (<em><a href="https://github.com/foreverjs/forever">https://github.com/foreverjs/forever</a></em>), which lets you run the <em>bot.js</em> script continuously and will restart it if it fails.</p>
</div>
<h3 class="h3" id="lev143"><span epub:type="pagebreak" id="page_208"/><strong>ASSEMBLE IT</strong></h3>
<p class="noindent">Finally we’ll make the garment to hold the LED display. There are two routes you can take here—either build everything from scratch, or buy something and modify it to suit your project. This is why it’s important to do the electronics part first: you need to know what you’re putting in pockets before you start making them.</p>
<p class="indent">I’ll be showing you how to make a sash that holds everything—battery, voltage regulator, Photon, and LED array—in three pockets, as shown in <a href="ch10.xhtml#ch10fig27">Figure 10-27</a>.</p>
<div class="image"><a id="ch10fig27"/><img src="../images/f0208-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-27:</strong> The sash is constructed with three pockets, and straps to hold the wiring in place.</p>
<h4 class="h4" id="lev144"><strong>Gathering the Materials</strong></h4>
<p class="noindent">We’ll make a black sash, which shows off the colors of the LEDs nicely. However, dark colors can absorb the light and make the displayed text hard to see, so we need two layers—first a thin layer of terry cloth from a cut-up white towel or washcloth, and then the black fabric.</p>
<p class="indent"><span epub:type="pagebreak" id="page_209"/>The terry cloth diffuses the light well and counteracts the light absorption from the black fabric. <a href="ch10.xhtml#ch10fig28">Figures 10-28</a> through <a href="ch10.xhtml#ch10fig31">10-31</a> show the same LED light display behind different kinds of fabric.</p>
<div class="image"><a id="ch10fig28"/><img src="../images/f0209-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-28:</strong> The LED array with no cover</p>
<div class="image"><a id="ch10fig29"/><img src="../images/f0209-02.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-29:</strong> The LED array covered by black fabric. Notice the lights are not diffused at all—this is difficult to read when scrolling.</p>
<div class="image"><a id="ch10fig30"/><img src="../images/f0209-03.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-30:</strong> The LED array covered by terry cloth. Notice the lights are really diffused and bleed into each other really well.</p>
<div class="image"><a id="ch10fig31"/><img src="../images/f0209-04.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-31:</strong> The LED array covered by terry cloth and black fabric. This is the final piece.</p>
<h5 class="h5" id="lev145"><strong>Supplies</strong></h5>
<p class="noindent">You’ll need the following supplies:</p>
<ul>
<li class="noindent">1.5 yards of black fabric (I used plain black cotton)</li>
<li class="noindent">White terry cloth (either bulk or a towel to cut up)</li>
<li class="noindent">Newspaper or scrap paper</li>
</ul>
<h5 class="h5" id="lev146"><span epub:type="pagebreak" id="page_210"/><strong>Tools</strong></h5>
<p class="noindent">You’ll also need the following tools:</p>
<ul>
<li class="noindent">Scissors—preferably fabric scissors or pinking shears</li>
<li class="noindent">Tape measure</li>
<li class="noindent">Marker pen</li>
<li class="noindent">Needles, thread, and straight pins</li>
<li class="noindent">(Optional) Sewing machine; you could also hand-sew the sash instead</li>
<li class="noindent">(Optional) White fabric pen or chalk; this helps with marking where you need to sew</li>
<li class="noindent">(Optional) Iron</li>
</ul>
<h4 class="h4" id="lev147"><strong>Constructing the Sash</strong></h4>
<p class="noindent">First, think of where you might put the parts of the project; we need the battery near the base because it’s heavy and cumbersome, and if it’s at the top it will gradually pull down. We want the LED array front and center, and we need the Photon nearby to minimize interference on the wire. We’ll try making the sash out of paper first, to experiment with how things fit.</p>
<ol>
<li class="noindent"><p class="list">First, measure from the top of your shoulder to your opposite hip to get an estimate of size. For me, 30 inches was about right.</p></li>
<li class="noindent"><p class="list">Lay two pages of a newspaper or a large sheet of newsprint flat on the ground. The front and back of the sash are the same shape, so you can cut them both out at the same time. Lay the tape measure on the paper in a slight curve, to mimic the shape you’ll want your sash (<a href="ch10.xhtml#ch10fig32">Figure 10-32</a>). Draw that curve on the newspaper, marking the beginning and end points of the length you measured earlier.</p></li>
<li class="noindent"><p class="list">For the width, think about the width of the LED array, and how much space you want on either side. The LED array is 3.5 inches wide, and I made my sash pattern about 7 to 8 inches wide to begin with. Using the line you drew as the center, mark half your width on both sides (<a href="ch10.xhtml#ch10fig33">Figure 10-33</a>).</p>
<div class="image"><span epub:type="pagebreak" id="page_211"/><a id="ch10fig32"/><img src="../images/f0211-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-32:</strong> Using the measuring tape to ensure the sash is about the correct length</p>
<div class="image"><a id="ch10fig33"/><img src="../images/f0211-02.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-33:</strong> Use the centerline and the width you want to get the rest of the sash shape on the newspaper.</p></li>
<li class="noindent"><p class="list">You’ll end up with two pieces of a vaguely sash-like shape. Cut it out of the paper and tape the ends together to form a sash. Put this paper sash on (<a href="ch10.xhtml#ch10fig34">Figure 10-34</a>) and see if you want to make any adjustments to the shape. I always take a lot off the shoulder and some from the bottom because it sticks out.</p>
<div class="image"><span epub:type="pagebreak" id="page_212"/><a id="ch10fig34"/><img src="../images/f0212-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-34:</strong> Try on the paper sash and trim as needed.</p>
<p class="indent">Keep adjusting the shape until you’re happy with it. My final paper sash looked like <a href="ch10.xhtml#ch10fig35">Figure 10-35</a>.</p>
<div class="image"><a id="ch10fig35"/><img src="../images/f0212-02.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-35:</strong> The sash shape once adjusted</p></li>
<li class="noindent"><p class="list">Once you have the shape right, you can use it as a pattern to cut out the fabric. We’ll have two layers to the sash to make it stronger, so you’ll need to cut out two full sash shapes and sew them on top of each other. The best way to do this is to fold your fabric with the fold going over the shoulder.</p>
<p class="indent">Mark the outline of the paper on the fabric directly or pin the pattern to the fabric and cut around the paper.</p>
<p class="indent">If you have a serger sewing machine, use fabric scissors to cut out the sash. If not, use pinking shears to prevent the fabric from fraying.</p></li>
<li class="noindent"><p class="list">If you couldn’t fold the fabric over the shoulder, just sew two pieces together so it looks like <a href="ch10.xhtml#ch10fig36">Figure 10-36</a>, with the front and back attached at the top. You’ll want two of these shapes.</p></li>
<li class="noindent"><p class="list">Mark the sides as shown in <a href="ch10.xhtml#ch10fig36">Figure 10-36</a> and sew the two layers on top of each other, either with a serger or using a straight <span epub:type="pagebreak" id="page_213"/>stitch on the zigzag edges if you cut your fabric with pinking shears.</p>
<div class="image"><a id="ch10fig36"/><img src="../images/f0213-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-36:</strong> Mark where you’ll stitch the two layers together.</p></li>
<li class="noindent"><p class="list">Turn the piece inside out so the sewn edges are now inside. You can iron the pieces flat or stitch on top to make sure they stay flat. You should have something like <a href="ch10.xhtml#ch10fig37">Figure 10-37</a> when you’re done.</p>
<div class="image"><a id="ch10fig37"/><img src="../images/f0213-02.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-37:</strong> The sash base is mostly done!</p></li>
<li class="noindent"><p class="list">Now sew one of the ends shut and tuck the raw edges on the other end inside so it has a nice folded edge. Place the sewn-up end inside the folded end about an inch and stitch both through to close the sash.</p></li>
</ol>
<p class="indent">Now that the base of the sash is done, we’re going to need a few more things: three pockets (one for the battery and the voltage regulator, one for the LED array, and one for the Photon) and straps to hold down the wiring. Let’s start with the pocket for the battery and the voltage regulator.</p>
<h4 class="h4" id="lev148"><strong>Sewing the Battery and Voltage Regulator Pocket</strong></h4>
<p class="noindent">The battery needs to fit snugly in its pocket so it doesn’t move around. To make this work, we’ll create a box-like pocket with sides about an inch deep. We’ll place this pocket at the bottom of the sash in the back, so it will rest on your lower back. This balances out the <span epub:type="pagebreak" id="page_214"/>weight of the array on the front of the sash. The most important thing here is to make sure the battery fits. I’ve thrown away plenty of pockets because they were too big or too tight.</p>
<ol>
<li class="noindent"><p class="list">To make sure the pocket fits the battery and voltage regulator, put the battery in the middle of some fabric and draw around it, leaving a couple inches on all sides and cutting off excess. Fold one side of the fabric over a little to create a hem and sew it in place—that will be the open end of the pocket.</p></li>
<li class="noindent"><p class="list">On the side opposite the hemmed edge, fold the end and sides in by an inch or so, fold the corners in until the point of the triangle meets the corner of the battery, and then pin the folds in place (see <a href="ch10.xhtml#ch10fig38">Figure 10-38</a>, top).</p></li>
<li class="noindent"><p class="list">Fold the sides of the pocket in, so that the triangle made in the corners keeps the sides and bottom up (<a href="ch10.xhtml#ch10fig38">Figure 10-38</a>, center), and pin it in place. Don’t worry if it’s ugly; no one will see the end of the pocket.</p></li>
<li class="noindent"><p class="list">Test the size with the battery, and if it fits well, sew the corner triangles in place, then sew along the outside edge of each corner for good measure (<a href="ch10.xhtml#ch10fig38">Figure 10-38</a>, bottom).</p>
<div class="image"><a id="ch10fig38"/><img src="../images/f0214-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-38:</strong> Beginning to shape the bottom of the pocket</p></li>
<li class="noindent"><p class="list">Place the pocket vertically with the open part up. You’ll want to place the pocket at the bottom of the back of the sash, since it’s heavy and you want it out of the way and out of sight.</p></li>
<li class="noindent"><p class="list"><span epub:type="pagebreak" id="page_215"/>Pin the pocket in place and stitch the bottom, then the sides, to the sash. Leave a bit of unstitched space at the corners so the case can bulge out a bit if it needs to.</p></li>
<li class="noindent"><p class="list">Try putting the battery and regulator in the pocket and putting the sash on. You’ll have more weight on the other side to even things out later, but if you need to move the battery or use another method to hold it down, feel free to do so.</p></li>
</ol>
<h4 class="h4" id="lev149"><strong>Sewing the LED Array Pocket</strong></h4>
<p class="noindent">Next up is the LED pocket, which is a flat pocket. We’ll add a layer of terry cloth to the inside of this pocket to diffuse the light. So the layers, from your body outward, will be: two layers of black sash fabric, then the LED array, and then the terry cloth and outer black fabric of the pocket.</p>
<ol>
<li class="noindent"><p class="list">On the terry cloth, mark and cut out around the LED matrix, with a tiny bit of wiggle room, as shown in <a href="ch10.xhtml#ch10fig39">Figure 10-39</a>. Use pinking shears if you don’t have a serger. Leave a bit more room on the top, so you can fold and sew an edge of black fabric over for the top of the pocket.</p>
<div class="image"><a id="ch10fig39"/><img src="../images/f0215-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-39:</strong> Cutting out and sewing the terry cloth and fabric layers</p></li>
<li class="noindent"><p class="list">Serge the edge of the terry cloth, or leave a zigzag edge if you don’t have a serger. We’ll be covering the edges in the pocket fabric so it won’t be visible. Put the terry cloth on the black fabric and draw around it, leaving 3 to 4 inches around on each side.</p></li>
<li class="noindent"><p class="list"><span epub:type="pagebreak" id="page_216"/>Fold the black fabric over itself by an inch or so, and then fold it over again on the terry cloth so the serged or raw edge of the terry cloth doesn’t show, and pin the folds in place. Do that to all sides, as shown in the bottom panel of <a href="ch10.xhtml#ch10fig39">Figure 10-39</a>.</p></li>
<li class="noindent"><p class="list">Place the LED array on the cloth to make sure it still fits.</p></li>
<li class="noindent"><p class="list">Determine where you want the pocket to go on the sash, line it up, and then pin it in place. This is a good opportunity to try the sash on again, to make sure the pocket looks right when worn and that the array fits. Stitch the pocket in place onto the sash, trying to keep close to the edge of the pocket.</p></li>
</ol>
<p class="indent">Now we’ll build a pocket for the Photon.</p>
<h4 class="h4" id="lev150"><strong>Sewing the Photon Pocket</strong></h4>
<p class="noindent">If your Photon doesn’t have headers, follow the same idea as the LED pocket to make a flat pocket. If your Photon has headers, follow the same idea as the battery pocket to fit the bulk. You may need to hand-sew the bottom. Then place it on the sash as follows:</p>
<ol>
<li class="noindent"><p class="list">Once you’ve made the Photon pocket, position it just above the LED pocket, as shown in <a href="ch10.xhtml#ch10fig40">Figure 10-40</a>, so that the wire from the Photon to the LED is as short as possible.</p>
<div class="image"><a id="ch10fig40"/><img src="../images/f0216-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-40:</strong> The Photon pocket positioned a small distance above the LED pocket</p></li>
<li class="noindent"><p class="list"><span epub:type="pagebreak" id="page_217"/>Sew only the two long sides, so wires can come out of the top and bottom. They’ll hold the Photon in place. If it ever seems like it’s poking out too much, you can add a snap to the top of the pocket to keep the Photon in place.</p></li>
</ol>
<h4 class="h4" id="lev151"><strong>Adding Wire Straps</strong></h4>
<p class="noindent">The last thing we’ll add are little straps to hold the wires down to the sash.</p>
<ol>
<li class="noindent"><p class="list">Cut out a strip of fabric, about 3 inches wide and 1.5 feet long. Serge or sew the long sides together to make a cylinder, then turn it inside out—you might want to attach a safety pin to one side of one end and push it through to the other end to make this easier.</p></li>
<li class="noindent"><p class="list">Once the right side is out, you’ll end up with something more tube-like than strap-like. Stitch the long side opposite the seam or iron it so it stays flat.</p></li>
<li class="noindent"><p class="list">Cut the fabric into shorter sections, about 3 inches long. You’ll probably need about four of them. Hang on to them for now; once you’ve figured out where your wires will be sticking out in the next section, you’ll stitch them to the sash.</p></li>
<li class="noindent"><p class="list">Now you’ll need to make the connecting wires of the project longer or shorter to fit your sash.</p>
<p class="indent">This is your project, so you can make any adjustments you want! I’ve taken out some seams so wires can come out of the sides of pockets, added snaps to pockets that don’t close up, and more.</p>
<p class="indent">To lengthen or shorten the wires, you just need to undo the soldering and either cut down or add new wires, making sure to note where to reconnect them. See the appendix for more soldering tips.</p>
<p class="indent">Remember the voltage regulator doesn’t necessarily need to be soldered, so you can unscrew the wires, thread them under straps, and then screw them back up after. Look back at the electronics part of this chapter if you need to remember the wiring. Now you should be able to fit your electronics inside your sash!</p></li>
<li class="noindent"><p class="list">Once you’re done figuring out wire length, space your straps along the sash so the wires lie flat. Pin and then sew the straps in place. I only needed those going from the front over the shoulder <span epub:type="pagebreak" id="page_218"/>to the back battery pocket. See <a href="ch10.xhtml#ch10fig41">Figure 10-41</a> for where I put my straps to hold wires.</p>
<div class="image"><a id="ch10fig41"/><img src="../images/f0218-01.jpg" alt="image"/></div>
<p class="figcap"><strong>FIGURE 10-41:</strong> The front and back of the sash, with the wires at a good length and positioned under straps. All the components are in their pockets and it’s ready to wear!</p></li>
</ol>
<p class="indent">Once you’re done with that, put all the items in their pockets and the wires in their holders, and your sash is finished!</p>
<h3 class="h3" id="lev152"><strong>SUMMARY</strong></h3>
<p class="noindent">Now you have a wearable LED array that can display text. I’ve included a sample server to send text messages, but other options are available too. Small pictures, colors, and designs are all available. Just remember: the more LEDs on at one time, the more current draw. Go out in the world with your own fantastic LED sash!</p>
</div>
  </body>
</html>
