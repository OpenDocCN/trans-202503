<html><head></head><body><div class="chapter" title="Chapter&#xA0;11.&#xA0;Layers"><div class="titlepage"><div><div><h1 class="title"><a id="layers"/>Chapter 11. Layers</h1></div></div></div><p><a id="iddle1570" class="indexterm"/><a id="iddle1628" class="indexterm"/><a id="iddle2216" class="indexterm"/><a id="iddle3493" class="indexterm"/><a id="iddle3597" class="indexterm"/><a id="iddle3647" class="indexterm"/><a id="iddle3880" class="indexterm"/><a id="iddle5077" class="indexterm"/><a id="iddle5187" class="indexterm"/><a id="iddle6027" class="indexterm"/>Layers are so central to GIMP that without them, this powerful application would be almost useless. Instead, we would only be able to use GIMP for simple drawings or minor photo touch-ups. All of GIMP’s more powerful and versatile features rely on layers.</p><p>When an image has multiple layers, the GIMP workspace acts as a stack of transparencies. Draw or paint on these transparencies, or arrange parts of an existing picture on separate layers. Set the layers’ visibility, or adjust how transparent they are or how they blend with other layers. Move them around the canvas and control their order in the layer stack. Duplicate a layer before changing it so an intact copy remains in case you make a mistake or want to use the layer for other purposes. Layering makes possible so many things that this chapter covers only the basic concepts, while later chapters combine these concepts with the tools and features provided by GIMP. In this chapter, we examine the Layers dialog, the Layers menu, and the <span class="strong"><strong>Image: Layer</strong></span> menu.</p></div>
<div class="sect1" title="11.1 The Layers Dialog"><div class="titlepage"><div><div><h1 class="title"><a id="one1dot1_the_layers_dialog"/>11.1 The Layers Dialog</h1></div></div></div><p><a class="xref" href="ch11s01.html#layers_dialog-id00088" title="Figure 11-1. The Layers dialog">Figure 11-1</a> shows an example of a Layers dialog for the painting created in <a class="xref" href="ch03.html" title="Chapter 3. Drawing and Illustration">Chapter 3</a>. This dialog is probably the most important of all the GIMP dialogs, including the Toolbox, since the latter can be replaced with the <span class="strong"><strong>Image: Tools</strong></span> menu (or keyboard shortcuts). The Layers dialog is a component of the multi-dialog window by default, and you will most likely want to keep it open. If you do close it, you can open it again by going to <span class="strong"><strong>Image: Windows &gt; Dockable Dialogs &gt; Layers</strong></span> or pressing <span class="inlinemediaobject"><a id="inline_id00311"/><img src="httpatomoreillycomsourcenostarchimages1455224.png.jpg" alt=""/></span> to bring it back. The keyboard shortcut brings up the dialog in the foreground, even if it was hidden by a <span class="inlinemediaobject"><a id="inline_id00312"/><img src="httpatomoreillycomsourcenostarchimages1453814.png" alt=""/></span> command.</p><div class="sect2" title="Components of the Layers Dialog"><div class="titlepage"><div><div><h2 class="title"><a id="components_of_the_layers_dialog"/>Components of the Layers Dialog</h2></div></div></div><p>Let’s examine the components of the Layers dialog. The numbers below refer to <a class="xref" href="ch11s01.html#layers_dialog-id00088" title="Figure 11-1. The Layers dialog">Figure 11-1</a>.</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p>The image name is not really a component of the dialog but rather of the multi-dialog window. If you select a different tab (the Channels dialog, for example), the image name will remain visible. You can change whether the image name is visible in the Configuration menu (opened with the button labeled 4). To show the image name, check S<span class="smaller">HOW</span> I<span class="smaller">MAGE</span> S<span class="smaller">ELECTION</span>. Showing the image name is very useful when you’re working with several images at the same time.</p><div class="figure"><a id="layers_dialog-id00088"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00703"/><img src="httpatomoreillycomsourcenostarchimages1455394.png.jpg" alt="The Layers dialog"/></div></div><p class="title">Figure 11-1. The Layers dialog</p></div><div class="figure"><a id="configuration_menu"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00704"/><img src="httpatomoreillycomsourcenostarchimages1455396.png.jpg" alt="The Configuration menu"/></div></div><p class="title">Figure 11-2. The Configuration menu</p></div></li><li class="listitem"><p><a id="iddle1055" class="indexterm"/><a id="iddle1088" class="indexterm"/><a id="iddle1114" class="indexterm"/><a id="iddle1257" class="indexterm"/><a id="iddle1279" class="indexterm"/><a id="iddle1282" class="indexterm"/><a id="iddle1301" class="indexterm"/><a id="iddle1319" class="indexterm"/><a id="iddle1347" class="indexterm"/><a id="iddle1916" class="indexterm"/><a id="iddle2129" class="indexterm"/><a id="iddle2155" class="indexterm"/><a id="iddle3722" class="indexterm"/><a id="iddle3729" class="indexterm"/><a id="iddle3881" class="indexterm"/><a id="iddle4339" class="indexterm"/><a id="iddle6028" class="indexterm"/>This button toggles whether the multi-dialog window always reflects the current image.</p></li><li class="listitem"><p>The M<span class="smaller">ODE</span> drop-down menu sets the blending mode of the current layer. For a description of the 21 blending modes available, see <a class="xref" href="ch12s02.html" title="12.2 Blending Modes">12.2 Blending Modes</a>.</p></li><li class="listitem"><p>This button brings up the Configuration menu, found in all dockable dialogs and shown in <a class="xref" href="ch11s01.html#configuration_menu" title="Figure 11-2. The Configuration menu">Figure 11-2</a>. The first entry opens the Layers menu, which will be discussed later in this chapter. The Configuration menu also allows you to add, close, or detach tabs from the multi-dialog menu; change the preview size and the tab style; and show or hide elements in the dialog. The last entry allows you to navigate between multiple displays, if you’re working with more than one monitor.</p></li><li class="listitem"><p>The Opacity slider allows you to set the opacity of the current layer. This is independent of the transparency, so a layer without an Alpha channel can be made semi-transparent with the Opacity slider. The layer opacity combines with the layer blending mode to determine the interaction between the pixels of the current layer and those of the underlying layers. For example, Dissolve mode is different from Normal mode only if the layer opacity is less than 100%.</p></li><li class="listitem"><p>The paintbrush icon is a toggle button. If pressed, the layer pixels are locked, which means they cannot be changed. This is useful if you want to protect a layer from accidental alterations. Painting on a layer with locked pixels is very similar to painting on it in Behind mode: When the pixels are locked, the painting tools will still work in transparent areas.</p></li><li class="listitem"><p>The square icon, another toggle button, locks a layer’s Alpha channel, if there is one. If the Alpha channel is locked, painting tools don’t work in transparent areas of the current layer, but they do work in opaque areas, as long as the pixels are unlocked. If both locks (pixels and Alpha channel) are checked, the layer cannot be changed at all. These buttons are useful, for example, when building logos, as shown in <a class="xref" href="ch04.html" title="Chapter 4. Logos and Textures">Chapter 4</a>. If you want to blur the logo to add relief to it, the Alpha channel must be unlocked. If you want to paint the logo, the Alpha channel must be locked.</p></li><li class="listitem"><p>The main part of the Layers dialog contains as many entries as there are layers in the image. The current layer is noted by an emphasis on the corresponding entry (blue in <a class="xref" href="ch11s01.html#layers_dialog-id00088" title="Figure 11-1. The Layers dialog">Figure 11-1</a>, where the current layer is named <code class="literal">River</code>).</p><div class="figure"><a id="example_layer_in_the_layers_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00705"/><img src="httpatomoreillycomsourcenostarchimages1455398.png.jpg" alt="An example layer in the Layers dialog"/></div></div><p class="title">Figure 11-3. An example layer in the Layers dialog</p></div><p><a id="iddle1007" class="indexterm"/><a id="iddle1056" class="indexterm"/><a id="iddle1611" class="indexterm"/><a id="iddle2198" class="indexterm"/><a id="iddle2275" class="indexterm"/><a id="iddle2769" class="indexterm"/><a id="iddle3366" class="indexterm"/><a id="iddle3517" class="indexterm"/><a id="iddle3537" class="indexterm"/><a id="iddle3569" class="indexterm"/><a id="iddle3587" class="indexterm"/><a id="iddle3648" class="indexterm"/><a id="iddle3776" class="indexterm"/><a id="iddle3796" class="indexterm"/><a id="iddle3860" class="indexterm"/><a id="iddle3932" class="indexterm"/><a id="iddle3959" class="indexterm"/><a id="iddle3964" class="indexterm"/><a id="iddle5188" class="indexterm"/><a id="iddle5346" class="indexterm"/><a id="iddle5651" class="indexterm"/>Always be aware of which layer is current, because anything you do to the image will be applied to that layer, which can be invisible or hidden by another layer. When the current layer is hidden, changes appear to have no effect, yet the current layer, hidden somewhere in the layer stack, is being affected by everything you do. Sometimes no layer is current, for example when a channel is active. In that case, when you apply changes to the image, the active channel is affected.</p></li><li class="listitem"><p>The bottom of the Layers dialog displays a row of seven buttons, which are shortcuts to entries in the Layers or <span class="strong"><strong>Image: Layer</strong></span> menus. From left to right, these buttons allow you to do the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Create a new layer. Hold down <span class="inlinemediaobject"><a id="inline_id00313"/><img src="httpatomoreillycomsourcenostarchimages1453922.png.jpg" alt=""/></span> to use the previous parameters. Otherwise a dialog opens to set them.</p></li><li class="listitem"><p>Create a new layer group.</p></li><li class="listitem"><p>Raise the current layer in the layer stack. Press <span class="inlinemediaobject"><a id="inline_id00314"/><img src="httpatomoreillycomsourcenostarchimages1453922.png.jpg" alt=""/></span> to move it to the top.</p></li><li class="listitem"><p>Lower the current layer in the layer stack. Press <span class="inlinemediaobject"><a id="inline_id00315"/><img src="httpatomoreillycomsourcenostarchimages1453922.png.jpg" alt=""/></span> to move it to the bottom.</p></li><li class="listitem"><p>Duplicate the current layer.</p></li><li class="listitem"><p>Anchor the floating layer.</p></li><li class="listitem"><p>Delete the current layer.</p></li></ul></div></li></ol></div></div><div class="sect2" title="A Layer Entry in the Layers Dialog"><div class="titlepage"><div><div><h2 class="title"><a id="layer_entry_in_the_layers_dialog"/>A Layer Entry in the Layers Dialog</h2></div></div></div><p><a class="xref" href="ch11s01.html#example_layer_in_the_layers_dialog" title="Figure 11-3. An example layer in the Layers dialog">Figure 11-3</a> shows all the possible components of a layer displayed in the Layers dialog. From left to right, these are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>The eye icon denotes the fact that the layer is visible (if no upper layer hides it). Clicking it toggles visibility. An invisible layer does not contribute to the visible image, but this does not prevent it from being changed.</p></li><li class="listitem"><p>The link icon denotes the fact that the layer is linked to something. This is meaningful only when it’s activated for more than one object. We can link several layers together, or we can link channels and paths, using their respective dialogs. See <a class="xref" href="ch14.html" title="Chapter 14. Masks">Chapter 14</a> for information on channels, and see <a class="xref" href="ch13s03.html" title="13.3 The Paths Tool">13.3 The Paths Tool</a> for information on paths. When several objects are linked, the Move tool and the transformation tools (see <a class="xref" href="ch16.html" title="Chapter 16. Transformation Tools">Chapter 16</a>) operate on the whole set of linked objects. However, each image is limited to only one set of linked objects. Clicking the chain turns the link on or off for that layer.</p></li><li class="listitem"><p>The thumbnail provides a miniature view of the layer contents. If its frame is white, that layer is the current layer and any modification made will affect it. Otherwise, the frame is black. Clicking on the thumbnail makes the layer active. If you click and hold, a larger thumbnail pops out. Clicking and dragging the thumbnail to the Toolbox creates a new image from the layer. Dragging it into another image copies the layer as a new layer in that image.</p></li><li class="listitem"><p>If the layer has a layer mask (see <a class="xref" href="ch14s02.html" title="14.2 Layer Masks">14.2 Layer Masks</a>), its thumbnail appears to the right and has the same properties as the layer thumbnail. If the mask frame is white, the mask is active, and any modifications made will be applied to the mask. If the mask frame is red, the layer mask is inactive. When the layer mask is selected, the dashed outline in the Image window changes from yellow and black to green and black. <span class="inlinemediaobject"><a id="inline_id00316"/><img src="httpatomoreillycomsourcenostarchimages1453844.png.jpg" alt=""/></span>-clicking the thumbnail toggles the layer mask activation, and <span class="inlinemediaobject"><a id="inline_id00317"/><img src="httpatomoreillycomsourcenostarchimages1454752.png.jpg" alt=""/></span>-clicking toggles the visibility of the layer mask.</p><p>Drag the layer mask thumbnail into another image to add it as a layer or into the Toolbox to create a copy as a new image.</p></li><li class="listitem"><p>The final item on the layer entry is the layer name. It is displayed in boldface if the layer does not have an Alpha channel. A name is <a id="iddle1089" class="indexterm"/><a id="iddle1293" class="indexterm"/><a id="iddle1917" class="indexterm"/><a id="iddle1982" class="indexterm"/><a id="iddle2293" class="indexterm"/><a id="iddle3494" class="indexterm"/><a id="iddle3572" class="indexterm"/><a id="iddle3588" class="indexterm"/><a id="iddle3730" class="indexterm"/><a id="iddle3960" class="indexterm"/><a id="iddle4030" class="indexterm"/><a id="iddle4295" class="indexterm"/><a id="iddle5078" class="indexterm"/><a id="iddle5162" class="indexterm"/>assigned to the layer when the layer is created, but it can be changed. Double-click it, press <span class="inlinemediaobject"><a id="inline_id00318"/><img src="httpatomoreillycomsourcenostarchimages1455250.png.jpg" alt=""/></span>, or select <span class="strong"><strong>Layers: right-click &gt; Edit Layer Attributes</strong></span> to change it.</p><p>If the layer is intended to be an animation frame (see <a class="xref" href="ch18.html" title="Chapter 18. Animation Tools">Chapter 18</a>), its name can be followed by text that alters the frame’s behavior: the duration in milliseconds, as in <code class="literal">(200ms)</code>, and the combination mode of the frame—either <code class="literal">(combine)</code> or <code class="literal">(replace)</code>.</p></li></ul></div></div><div class="sect2" title="Keyboard Shortcuts in the Layers Dialog"><div class="titlepage"><div><div><h2 class="title"><a id="keyboard_shortcuts_in_the_layers_dialog"/>Keyboard Shortcuts in the Layers Dialog</h2></div></div></div><p>Some handy keyboard shortcuts are available when the Layers dialog is active.</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>The up arrow key selects the layer above the current layer as the new current layer. The down arrow key selects the layer below.</p></li><li class="listitem"><p>The <span class="inlinemediaobject"><a id="inline_id00319"/><img src="httpatomoreillycomsourcenostarchimages1455400.png.jpg" alt=""/></span> key makes the top layer in the stack current, and the <span class="inlinemediaobject"><a id="inline_id00320"/><img src="httpatomoreillycomsourcenostarchimages1455402.png.jpg" alt=""/></span> key makes the bottom layer current.</p></li><li class="listitem"><p>The horizontal arrow keys switch among the four (or five) components of the current layer: visibility, linking, layer thumbnail, layer mask thumbnail, and layer name.</p></li><li class="listitem"><p>The <span class="inlinemediaobject"><a id="inline_id00321"/><img src="httpatomoreillycomsourcenostarchimages1453920.png.jpg" alt=""/></span> and <span class="inlinemediaobject"><a id="inline_id00322"/><img src="httpatomoreillycomsourcenostarchimages1453866.png.jpg" alt=""/></span> keys toggle the selected layer component (visibility, linking, activity of the layer or its layer mask, and the layer name), even if its layer is not active.</p></li><li class="listitem"><p>Pressing <span class="inlinemediaobject"><a id="inline_id00323"/><img src="httpatomoreillycomsourcenostarchimages1453844.png.jpg" alt=""/></span> along with the up or down arrow key moves from layer to layer without changing the current layer. You can use this in combination with the horizontal arrow keys or the <span class="inlinemediaobject"><a id="inline_id00324"/><img src="httpatomoreillycomsourcenostarchimages1453920.png.jpg" alt=""/></span> or <span class="inlinemediaobject"><a id="inline_id00325"/><img src="httpatomoreillycomsourcenostarchimages1453866.png.jpg" alt=""/></span> keys.</p></li><li class="listitem"><p>The <span class="inlinemediaobject"><a id="inline_id00326"/><img src="httpatomoreillycomsourcenostarchimages1454482.png.jpg" alt=""/></span> key erases the contents of the current layer (or the selection in this layer).</p></li></ul></div></div><div class="sect2" title="Uses of the Layers Dialog"><div class="titlepage"><div><div><h2 class="title"><a id="uses_of_the_layers_dialog"/>Uses of the Layers Dialog</h2></div></div></div><p>In summary, the Layers dialog allows you to do the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Open the configuration menu by clicking the top-right button. The first entry in this menu opens the Layers menu (covered later in this chapter).</p></li><li class="listitem"><p>Change the blending mode of the layer. See <a class="xref" href="ch12s02.html" title="12.2 Blending Modes">12.2 Blending Modes</a> for examples and a complete description of the blending modes.</p></li><li class="listitem"><p>Set the layer opacity.</p></li><li class="listitem"><p>Lock the pixels or the Alpha channel.</p></li><li class="listitem"><p>Set the visibility of the layer by clicking the eye icon. Note that this is independent of the activity of the layer. An invisible layer can still be altered.</p></li><li class="listitem"><p>Set the activity of the layer by clicking its thumbnail. Note that this does not change its visibility.</p></li><li class="listitem"><p>Set the activity of the layer mask by clicking, <span class="inlinemediaobject"><a id="inline_id00327"/><img src="httpatomoreillycomsourcenostarchimages1453844.png.jpg" alt=""/></span>-clicking, or <span class="inlinemediaobject"><a id="inline_id00328"/><img src="httpatomoreillycomsourcenostarchimages1454752.png.jpg" alt=""/></span>-clicking its thumbnail image.</p></li><li class="listitem"><p>Change the name of the layer by double-clicking its name.</p></li><li class="listitem"><p>Move the layer in the layer stack by clicking and dragging its thumbnail or name up or down the layer stack. This method can also be used to move a layer into, or out of, a layer group.</p></li><li class="listitem"><p>Open the Layers menu by right-clicking anywhere in the layer’s entry.</p></li><li class="listitem"><p>Use the seven buttons in the bottom row to perform common layer-related tasks.</p></li></ul></div></div></div>
<div class="sect1" title="11.2 The Layers Menu"><div class="titlepage"><div><div><h1 class="title"><a id="one1dot2_the_layers_menu"/>11.2 The Layers Menu</h1></div></div></div><p>The Layers menu (<a class="xref" href="ch11s02.html#layers_menu" title="Figure 11-4. The Layers menu">Figure 11-4</a>) is selected by right-clicking any of the layer entries in the Layers dialog or by selecting the first entry in the Configure menu of the Layers dialog. If the current layer is a text layer, this menu contains five additional entries, described in <a class="xref" href="ch15s08.html" title="15.8 The Text Tool">15.8 The Text Tool</a>. In this section, we examine each of the entries in the Layers menu.</p><p>E<span class="smaller">DIT</span> L<span class="smaller">AYER</span> A<span class="smaller">TTRIBUTES</span> opens the dialog shown in <a class="xref" href="ch11s02.html#edit_layer_attributes_dialog" title="Figure 11-5. The Edit Layer Attributes dialog">Figure 11-5</a>. The only attribute that can be changed is the layer name.</p><div class="figure"><a id="layers_menu"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00706"/><img src="httpatomoreillycomsourcenostarchimages1455404.png.jpg" alt="The Layers menu"/></div></div><p class="title">Figure 11-4. The Layers menu</p></div><div class="figure"><a id="edit_layer_attributes_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00707"/><img src="httpatomoreillycomsourcenostarchimages1455406.png.jpg" alt="The Edit Layer Attributes dialog"/></div></div><p class="title">Figure 11-5. The Edit Layer Attributes dialog</p></div><p><a id="iddle1057" class="indexterm"/><a id="iddle1203" class="indexterm"/><a id="iddle1346" class="indexterm"/><a id="iddle1567" class="indexterm"/><a id="iddle2637" class="indexterm"/><a id="iddle2659" class="indexterm"/><a id="iddle2702" class="indexterm"/><a id="iddle3570" class="indexterm"/><a id="iddle3649" class="indexterm"/><a id="iddle3815" class="indexterm"/><a id="iddle3970" class="indexterm"/><a id="iddle5189" class="indexterm"/>N<span class="smaller">EW</span> L<span class="smaller">AYER</span> opens the dialog shown in <a class="xref" href="ch11s02.html#create_a_new_layer_dialog" title="Figure 11-6. The Create a New Layer dialog">Figure 11-6</a>. A descriptive layer name can help you quickly identify the various components of an image. If you don’t input one, a name is automatically generated, such as <code class="literal">Layer #1</code>. The width and height are initially the same as those of the canvas, but you can input different values. If the new layer is larger than the canvas, the areas of the layer that extend beyond the canvas won’t be visible. The new layer’s dimensions can be assigned as a percentage of the canvas dimensions, in pixels, or in a number of other units. Note that measurements in inches, millimeters, or other standard units of measurement are calculated with regard to the current resolution (see <a class="xref" href="ch10s01.html" title="10.1 Rulers and Units">10.1 Rulers and Units</a>). Finally, the four radio buttons allow you to choose how the layer is initially filled. The layer can be filled with the foreground color, the background color, white, or transparency. Unless transparency is chosen, the new layer does not have an Alpha channel.</p><div class="figure"><a id="create_a_new_layer_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00708"/><img src="httpatomoreillycomsourcenostarchimages1455408.png.jpg" alt="The Create a New Layer dialog"/></div></div><p class="title">Figure 11-6. The Create a New Layer dialog</p></div><p>N<span class="smaller">EW FROM</span> V<span class="smaller">ISIBLE</span> creates a new layer, initially called <code class="literal">Visible</code>, filled with the image as it currently appears. This new layer is placed in the stack just above the current layer. The layers contributing to this new layer are flattened before its creation such that only one new layer is created, even if several are visible.</p><p>N<span class="smaller">EW</span> L<span class="smaller">AYER</span> G<span class="smaller">ROUP</span> creates a new, empty layer group, initially called <code class="literal">Layer Group</code>. This concept is discussed in <a class="xref" href="ch11s03.html" title="11.3 Layer Groups">11.3 Layer Groups</a>.</p><p>D<span class="smaller">UPLICATE</span> L<span class="smaller">AYER</span> makes a copy of the current layer (or layer group), places it into the layer stack just above the current layer, and names it the same name as that the current layer plus the word <code class="literal">copy</code>. The copy inherits all the characteristics of the original, including its blending mode, opacity, and locks.</p><p>A<span class="smaller">NCHOR</span> L<span class="smaller">AYER</span> is active only when there is a floating selection. See <a class="xref" href="ch13s04.html" title="13.4 Using Selections">13.4 Using Selections</a>. The floating selection is anchored to the last current layer.</p><div class="figure"><a id="layers_merge_options_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00709"/><img src="httpatomoreillycomsourcenostarchimages1455410.png.jpg" alt="The Layers Merge Options dialog"/></div></div><p class="title">Figure 11-7. The Layers Merge Options dialog</p></div><p><a id="iddle1010" class="indexterm"/><a id="iddle1354" class="indexterm"/><a id="iddle1568" class="indexterm"/><a id="iddle2644" class="indexterm"/><a id="iddle3541" class="indexterm"/><a id="iddle3545" class="indexterm"/><a id="iddle3623" class="indexterm"/><a id="iddle3624" class="indexterm"/><a id="iddle3650" class="indexterm"/><a id="iddle3723" class="indexterm"/><a id="iddle3816" class="indexterm"/><a id="iddle3858" class="indexterm"/><a id="iddle4034" class="indexterm"/><a id="iddle5190" class="indexterm"/><a id="iddle5649" class="indexterm"/>M<span class="smaller">ERGE</span> D<span class="smaller">OWN</span> merges the current layer with the layer below. If the current layer is invisible, it merges as if it were visible. However, if the layer below is invisible, and there is no visible layer below that, M<span class="smaller">ERGE</span> D<span class="smaller">OWN</span> is inactive. M<span class="smaller">ERGE</span> D<span class="smaller">OWN</span> is also inactive when the layers below the current layer form a layer group.</p><p>M<span class="smaller">ERGE</span> L<span class="smaller">AYER</span> G<span class="smaller">ROUP</span> appears in the menu only if the current layer is a layer group. This group is replaced with a single layer, composed of all layers of the group.</p><p>D<span class="smaller">ELETE</span> L<span class="smaller">AYER</span> deletes the active layer or layer group. Like the other Layers menu operations, this one can be undone.</p><p>The next four entry groups in the Layers menu are also found in the <span class="strong"><strong>Image: Layer</strong></span> menu, and they are discussed in <a class="xref" href="ch11s04.html" title="11.4 The Image: Layer Menu">11.4 The Image: Layer Menu</a>. Therefore we skip to the last two entries in the Layers menu.</p><p>M<span class="smaller">ERGE</span> V<span class="smaller">ISIBLE</span> L<span class="smaller">AYERS</span> acts only on the layers with the eye icon checked, and it merges them according to their respective opacity and blending mode. The dialog is shown in <a class="xref" href="ch11s02.html#layers_merge_options_dialog" title="Figure 11-7. The Layers Merge Options dialog">Figure 11-7</a>. The new layer can be sized to match the largest layer, the canvas, or the bottom layer. If the D<span class="smaller">ISCARD INVISIBLE LAYERS</span> box is checked, the invisible layers are deleted. Otherwise, they remain in the image. Note that this operation deletes the visible layers from the image, unlike N<span class="smaller">EW FROM</span> V<span class="smaller">ISIBLE</span>, which is generally a better choice. If you do choose to use M<span class="smaller">ERGE</span> V<span class="smaller">ISIBLE</span> L<span class="smaller">AYERS</span>, we strongly suggest that you save a copy of the image first with <span class="strong"><strong>Image: File &gt; Save a Copy</strong></span>.</p><p>F<span class="smaller">LATTEN</span> I<span class="smaller">MAGE</span> replaces all the layers with a single-layer representation of the image. This is a destructive operation and should be used only after you’ve saved a copy of the image with the layers intact.</p></div>
<div class="sect1" title="11.3 Layer Groups"><div class="titlepage"><div><div><h1 class="title"><a id="one1dot3_layer_groups"/>11.3 Layer Groups</h1></div></div></div><p>Layer groups are a new feature in GIMP 2.8, and the concept is still evolving.</p><p>To create a new layer group, click the corresponding button in the bottom of the Layers dialog or use <span class="strong"><strong>Image: Layer &gt; New Layer Group</strong></span> or <span class="strong"><strong>Layers: right-click &gt; New Layer Group</strong></span>.</p><p>The layer group appears just above the current layer and is initially empty. A good idea is to immediately give it a meaningful name. To add a layer to a group, click and drag it to the group in the layer stack. Do the same to move a layer out of its current group or to move an entire layer group around in the stack. You can also add a new layer to a layer group, using the corresponding button in the Layers dialog or the entry in the Layers menu. Click the small triangle to show (<a class="xref" href="ch11s03.html#this_layer_group_has_three_layers" title="Figure 11-8. This layer group has three layers">Figure 11-8</a>) or hide (<a class="xref" href="ch11s03.html#three_minimized_layer_groups" title="Figure 11-9. Three minimized layer groups">Figure 11-9</a>) the contents of the group. A layer group can be placed within another layer group.</p><p>A layer group is a useful way to organize the layers in a complex image. The following operations can be done on a layer group:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Locking the pixels</p></li><li class="listitem"><p>Changing the group opacity</p></li><li class="listitem"><p>Toggling visibility with the eye icon</p></li><li class="listitem"><p>Toggling layer links with the chain icon</p></li><li class="listitem"><p>Moving the group in the layer stack</p></li><li class="listitem"><p>Moving the layers with the Move tool</p></li><li class="listitem"><p>Applying a transformation to all layers (see <a class="xref" href="ch16.html" title="Chapter 16. Transformation Tools">Chapter 16</a>)</p></li><li class="listitem"><p>Duplicating the layer group and its contents</p></li><li class="listitem"><p>Copying the layer group and its contents to another image by clicking and dragging it, or by copying and pasting it</p><div class="figure"><a id="this_layer_group_has_three_layers"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00710"/><img src="httpatomoreillycomsourcenostarchimages1455412.png.jpg" alt="This layer group has three layers"/></div></div><p class="title">Figure 11-8. This layer group has three layers</p></div><div class="figure"><a id="three_minimized_layer_groups"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00711"/><img src="httpatomoreillycomsourcenostarchimages1455414.png.jpg" alt="Three minimized layer groups"/></div></div><p class="title">Figure 11-9. Three minimized layer groups</p></div></li><li class="listitem"><p><a id="iddle1365" class="indexterm"/><a id="iddle3859" class="indexterm"/><a id="iddle3897" class="indexterm"/><a id="iddle5650" class="indexterm"/>Deleting the layer group and its contents</p></li><li class="listitem"><p>Applying a layer blending mode to a layer group, which effects only the layers of the layer group</p></li></ul></div><p>We’ll use the result of the tutorial from <a class="xref" href="ch03.html" title="Chapter 3. Drawing and Illustration">Chapter 3</a> to demonstrate the properties of a layer group. This image has 20 layers, which we organized as we built the image. Each of the four mushroom caps is composed of two layers, one of which contains a layer mask. The mushroom stems are composed of six layers. The flower and stone in the foreground are composed of four layers. Finally, there is a white background for the whole image, and another layer on the top of the stack, named <code class="literal">Background</code>, which is in multiply blend mode and contains the original drawing. These layers can be organized intuitively into three layer groups: <code class="literal">Mushroom stems</code>, <code class="literal">Mushroom caps</code>, and <code class="literal">Foreground</code>. To do this without changing the layer order in the stack, click the New Layer Group button when the topmost layer of the future group is active, and then move layers into the group by clicking and dragging them to the upper layer or to an empty layer group. <a class="xref" href="ch11s03.html#three_minimized_layer_groups" title="Figure 11-9. Three minimized layer groups">Figure 11-9</a> shows the result when these three layer groups are minimized.</p><div class="figure"><a id="moving_the_mushroom_caps_layer_group"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00712"/><img src="httpatomoreillycomsourcenostarchimages1455416.png.jpg" alt="Moving the Mushroom caps layer group"/></div></div><p class="title">Figure 11-10. Moving the Mushroom caps layer group</p></div><div class="figure"><a id="reducing_the_opacity_of_a_layer_group_to"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00713"/><img src="httpatomoreillycomsourcenostarchimages1455418.png.jpg" alt="Reducing the opacity of a layer group to 50%"/></div></div><p class="title">Figure 11-11. Reducing the opacity of a layer group to 50%</p></div><p>You can hide a layer group by clicking its eye icon, or you can move all of its layers simultaneously using the Move tool (see <a class="xref" href="ch11s03.html#moving_the_mushroom_caps_layer_group" title="Figure 11-10. Moving the Mushroom caps layer group">Figure 11-10</a>). If a layer group is hidden, the layers it contains are invisible and their eye icons are stroked out. You can also change the opacity of an entire layer group (see <a class="xref" href="ch11s03.html#reducing_the_opacity_of_a_layer_group_to" title="Figure 11-11. Reducing the opacity of a layer group to 50%">Figure 11-11</a>).</p><div class="figure"><a id="linking_noncontiguous_layers"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00714"/><img src="httpatomoreillycomsourcenostarchimages1455420.png.jpg" alt="Linking noncontiguous layers"/></div></div><p class="title">Figure 11-12. Linking noncontiguous layers</p></div><div class="figure"><a id="moving_only_the_capsapostrophe_spots"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00715"/><img src="httpatomoreillycomsourcenostarchimages1455422.png.jpg" alt="Moving only the caps’ spots"/></div></div><p class="title">Figure 11-13. Moving only the caps’ spots</p></div><p><a id="iddle1117" class="indexterm"/><a id="iddle2660" class="indexterm"/><a id="iddle3495" class="indexterm"/><a id="iddle3518" class="indexterm"/><a id="iddle3571" class="indexterm"/><a id="iddle3651" class="indexterm"/><a id="iddle3777" class="indexterm"/><a id="iddle3973" class="indexterm"/><a id="iddle5079" class="indexterm"/><a id="iddle5191" class="indexterm"/><a id="iddle6068" class="indexterm"/>All the layers in a layer group must be contiguous in the layer stack. This is not the case for linking layers. For example, let’s chain together the second layer of all mushroom caps, the one containing a layer mask and used to draw the spots on the caps (see <a class="xref" href="ch11s03.html#linking_noncontiguous_layers" title="Figure 11-12. Linking noncontiguous layers">Figure 11-12</a>). Now we can move the linked layers together, but separately from the group, as shown in <a class="xref" href="ch11s03.html#moving_only_the_capsapostrophe_spots" title="Figure 11-13. Moving only the caps’ spots">Figure 11-13</a> (compare with <a class="xref" href="ch11s03.html#moving_the_mushroom_caps_layer_group" title="Figure 11-10. Moving the Mushroom caps layer group">Figure 11-10</a>). The linked layers can even be in different layer groups.</p><div class="figure"><a id="image_layer_menu"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00716"/><img src="httpatomoreillycomsourcenostarchimages1455424.png.jpg" alt="The Image: Layer menu"/></div></div><p class="title">Figure 11-14. The Image: Layer menu</p></div><p>Layer groups are saved in an XCF file, independently from the individual layers. In GIMP 2.8, it’s possible to rotate or scale a layer group without rotating or scaling the individual layer components of the group. When the layer group is rotated or scaled, a floating selection is created with the result of the transformation, and the initial layer group is replaced with the merged, transformed components. The individual layers, however, are unchanged.</p></div>
<div class="sect1" title="11.4 The Image: Layer Menu"><div class="titlepage"><div><div><h1 class="title"><a id="one1dot4_the_image_layer_menu"/>11.4 The Image: Layer Menu</h1></div></div></div><p>The <span class="strong"><strong>Image: Layer</strong></span> menu is shown in <a class="xref" href="ch11s03.html#image_layer_menu" title="Figure 11-14. The Image: Layer menu">Figure 11-14</a>. Some of the entries are also found in the <span class="strong"><strong>Layers: right-click &gt; Layers</strong></span> menu, but there are many new entries as well.</p><p>The first eight entries (or seven if there is no existing layer group) can also be found in the <span class="strong"><strong>Layers: right-click &gt; Layers</strong></span> menu, but in the <span class="strong"><strong>Image: Layer</strong></span> menu three of these entries are accompanied by keyboard shortcuts:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><span class="inlinemediaobject"><a id="inline_id00329"/><img src="httpatomoreillycomsourcenostarchimages1454182.png.jpg" alt=""/></span> opens the new layer dialog.</p></li><li class="listitem"><p><span class="inlinemediaobject"><a id="inline_id00330"/><img src="httpatomoreillycomsourcenostarchimages1453960.png.jpg" alt=""/></span> duplicates the current layer.</p></li><li class="listitem"><p><span class="inlinemediaobject"><a id="inline_id00331"/><img src="httpatomoreillycomsourcenostarchimages1454186.png.jpg" alt=""/></span> anchors the floating selection.</p></li></ul></div><div class="figure"><a id="stack_menu"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00717"/><img src="httpatomoreillycomsourcenostarchimages1455426.png.jpg" alt="The Stack menu"/></div></div><p class="title">Figure 11-15. The Stack menu</p></div><p><a id="iddle2650" class="indexterm"/><a id="iddle3496" class="indexterm"/><a id="iddle3539" class="indexterm"/><a id="iddle3593" class="indexterm"/><a id="iddle3595" class="indexterm"/><a id="iddle3652" class="indexterm"/><a id="iddle3773" class="indexterm"/><a id="iddle4735" class="indexterm"/><a id="iddle5080" class="indexterm"/><a id="iddle5192" class="indexterm"/><a id="iddle5732" class="indexterm"/><a id="iddle5843" class="indexterm"/><a id="iddle5865" class="indexterm"/>This menu, and these shortcuts, allow us to make major changes to the layer stack without looking at it, which is generally not advisable. It’s much easier to make a mistake when you can’t see what you’re doing. It’s better to adjust layers in the Layers dialog whenever possible.</p><p>If the current layer is a text layer, the Layer menu will also contain four text-specific entries, described in <a class="xref" href="ch15s08.html" title="15.8 The Text Tool">15.8 The Text Tool</a>. After that are the four menus discussed next.</p><div class="sect2" title="The Stack Menu"><div class="titlepage"><div><div><h2 class="title"><a id="stack_menu-id00089"/>The Stack Menu</h2></div></div></div><p>The Stack menu is shown in <a class="xref" href="ch11s04.html#stack_menu" title="Figure 11-15. The Stack menu">Figure 11-15</a>. Within it are four commands which are most useful when dealing with an image that has a lot of layers:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>S<span class="smaller">ELECT</span> P<span class="smaller">REVIOUS</span> L<span class="smaller">AYER</span> (<span class="inlinemediaobject"><a id="inline_id00332"/><img src="httpatomoreillycomsourcenostarchimages1455428.png.jpg" alt=""/></span>) is equivalent to clicking in the previous layer in the Layers dialog, with one exception: If the current layer is within a layer group, this command does not extend to layers outside of the group.</p></li><li class="listitem"><p>S<span class="smaller">ELECT</span> N<span class="smaller">EXT</span> L<span class="smaller">AYER</span> (<span class="inlinemediaobject"><a id="inline_id00333"/><img src="httpatomoreillycomsourcenostarchimages1455430.png.jpg" alt=""/></span>) selects the next layer, with the same exception as above.</p></li><li class="listitem"><p>S<span class="smaller">ELECT</span> T<span class="smaller">OP</span> L<span class="smaller">AYER</span> (<span class="inlinemediaobject"><a id="inline_id00334"/><img src="httpatomoreillycomsourcenostarchimages1455400.png.jpg" alt=""/></span>) selects the topmost layer in the stack or the topmost layer in the group.</p></li><li class="listitem"><p>S<span class="smaller">ELECT</span> B<span class="smaller">OTTOM</span> L<span class="smaller">AYER</span> (<span class="inlinemediaobject"><a id="inline_id00335"/><img src="httpatomoreillycomsourcenostarchimages1455402.png.jpg" alt=""/></span>) selects the bottom layer in the stack or the bottom layer in the group.</p></li></ul></div><p>Note that the arrow keys on the keyboard can be used to select the previous or next layer, but only when the Layers dialog is active. See <a class="xref" href="ch11s01.html#keyboard_shortcuts_in_the_layers_dialog" title="Keyboard Shortcuts in the Layers Dialog">Keyboard Shortcuts in the Layers Dialog</a> for other keyboard shortcuts available in this dialog.</p><p>The next four commands move the current layer in the layer stack:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>R<span class="smaller">AISE</span> L<span class="smaller">AYER</span> moves the layer up in the stack. It cannot raise a layer outside of its current group. To move a layer out of its group, click and drag it.</p></li><li class="listitem"><p>L<span class="smaller">OWER</span> L<span class="smaller">AYER</span> moves the layer down in the stack.</p></li><li class="listitem"><p>L<span class="smaller">AYER TO</span> T<span class="smaller">OP</span> moves the current layer to the top of the stack, or of its group if it belongs to a layer group.</p></li><li class="listitem"><p>L<span class="smaller">AYER TO</span> B<span class="smaller">OTTOM</span> moves the layer to the bottom of the stack or group.</p></li></ul></div><p>Finally, R<span class="smaller">EVERSE</span> L<span class="smaller">AYER</span> O<span class="smaller">RDER</span> can be called only from this menu. A layer group counts as a single layer, and there is no action to reverse the layer order within a layer group.</p></div><div class="sect2" title="The Mask, Transparency, and Transform Menus"><div class="titlepage"><div><div><h2 class="title"><a id="maskcomma_transparencycomma_and_transfor"/>The Mask, Transparency, and Transform Menus</h2></div></div></div><p>The Mask menu deals with layer masks and is discussed in <a class="xref" href="ch14s02.html" title="14.2 Layer Masks">14.2 Layer Masks</a>. It offers slightly more options than are found in the <span class="strong"><strong>Layers: right-click &gt; Layers</strong></span> menu.</p><p>The Transparency menu is discussed in <a class="xref" href="ch14s03.html#transparency_and_the_alpha_channel" title="Transparency and the Alpha Channel">Transparency and the Alpha Channel</a>. Only three of its entries also appear in the <span class="strong"><strong>Layers: right-click &gt; Layers</strong></span> menu.</p><p>Using the Transform menu is the easiest way to flip or rotate the current layer. You could also use the Flip tool (<span class="inlinemediaobject"><a id="inline_id00336"/><img src="httpatomoreillycomsourcenostarchimages1455432.png.jpg" alt=""/></span>) or Arbitrary Rotation, which is also accessed through the Rotate tool (<span class="inlinemediaobject"><a id="inline_id00337"/><img src="httpatomoreillycomsourcenostarchimages1453928.png.jpg" alt=""/></span>). See <a class="xref" href="ch16s01.html#transforming_a_layer" title="Transforming a Layer">Transforming a Layer</a> for more information on the Transform menu.</p><div class="figure"><a id="set_layer_boundary_size_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00718"/><img src="httpatomoreillycomsourcenostarchimages1455434.png.jpg" alt="The Set Layer Boundary Size dialog"/></div></div><p class="title">Figure 11-16. The Set Layer Boundary Size dialog</p></div></div><div class="sect2" title="The Final Five Entries"><div class="titlepage"><div><div><h2 class="title"><a id="final_five_entries"/>The Final Five Entries</h2></div></div></div><p><a id="iddle1189" class="indexterm"/><a id="iddle1450" class="indexterm"/><a id="iddle1566" class="indexterm"/><a id="iddle2000" class="indexterm"/><a id="iddle3540" class="indexterm"/><a id="iddle3554" class="indexterm"/><a id="iddle3582" class="indexterm"/><a id="iddle4597" class="indexterm"/><a id="iddle4802" class="indexterm"/><a id="iddle4814" class="indexterm"/><a id="iddle4927" class="indexterm"/><a id="iddle5022" class="indexterm"/>The remaining five entries in the Image: Layer menu provide the only access to their respective operations:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>L<span class="smaller">AYER</span> B<span class="smaller">OUNDARY</span> S<span class="smaller">IZE</span> opens the dialog shown in <a class="xref" href="ch11s04.html#set_layer_boundary_size_dialog" title="Figure 11-16. The Set Layer Boundary Size dialog">Figure 11-16</a>, which is very similar to the dialog of <span class="strong"><strong>Image: Image &gt; Canvas Size</strong></span>, described in <a class="xref" href="ch16s01.html#resizing_an_image-id00142" title="Resizing an Image">Resizing an Image</a>. You can choose the exact dimensions of the layer, and the position of its contents within the new dimensions. Adjust the position by setting the <span class="emphasis"><em>X</em></span> and <span class="emphasis"><em>Y</em></span> fields, by dragging the layer preview in its window, or by using the C<span class="smaller">ENTER</span> button. If you reduce the size of the layer, the clipped contents are deleted, but if you enlarge the layer beyond the border of the image, the contents outside of the image border are retained, though invisible. This tool also works with a layer group.</p></li><li class="listitem"><p>L<span class="smaller">AYER TO</span> I<span class="smaller">MAGE</span> S<span class="smaller">IZE</span> sets the layer to the image size, without a dialog and without moving the layer contents. Any part of the layer that’s beyond the canvas limits is deleted. This tool also works with layer groups.</p></li><li class="listitem"><p>S<span class="smaller">CALE</span> L<span class="smaller">AYER</span> opens the dialog shown in <a class="xref" href="ch11s04.html#scale_layer_dialog-id00090" title="Figure 11-17. The Scale Layer dialog">Figure 11-17</a>, which is the same as the <span class="strong"><strong>Image: Image &gt; Scale Image</strong></span> dialog, described in <a class="xref" href="ch10s01.html" title="10.1 Rulers and Units">10.1 Rulers and Units</a> and in <a class="xref" href="ch16s01.html#resizing_an_image-id00142" title="Resizing an Image">Resizing an Image</a>. The only difference is that you cannot change the layer resolution, which is fixed by the image resolution. This tool also works with layer groups.</p><div class="figure"><a id="scale_layer_dialog-id00090"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00719"/><img src="httpatomoreillycomsourcenostarchimages1455436.png.jpg" alt="The Scale Layer dialog"/></div></div><p class="title">Figure 11-17. The Scale Layer dialog</p></div><div class="figure"><a id="autocropping_a_layer_group"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00720"/><img src="httpatomoreillycomsourcenostarchimages1455438.png.jpg" alt="Autocropping a layer group"/></div></div><p class="title">Figure 11-18. Autocropping a layer group</p></div></li><li class="listitem"><p>C<span class="smaller">ROP TO</span> S<span class="smaller">ELECTION</span> is active only if there is a current selection. The layer dimensions are set to the smallest rectangle that includes the selection.</p></li><li class="listitem"><p>A<span class="smaller">UTOCROP</span> L<span class="smaller">AYER</span> crops the layer to the smallest rectangle that contains data of a color different from that of the layer border. It’s similar to <span class="strong"><strong>Image: Image &gt; Autocrop Image</strong></span>, described in <a class="xref" href="ch16s01.html#cropping_an_image-id00145" title="Cropping an Image">Cropping an Image</a>. This tool also works with layer groups, as demonstrated in <a class="xref" href="ch11s04.html#autocropping_a_layer_group" title="Figure 11-18. Autocropping a layer group">Figure 11-18</a>, where the current layer is the entire <code class="literal">Mushroom caps</code> layer group.</p></li></ul></div></div></div></body></html>